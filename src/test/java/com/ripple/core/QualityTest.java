package com.ripple.core;

import java.util.ArrayList;
import java.util.Collections;

import org.json.JSONObject;
import org.junit.Test;

import com.ripple.core.coretypes.Amount;
import com.ripple.core.coretypes.STObject;
import com.ripple.core.coretypes.hash.Hash256;
import com.ripple.core.fields.Field;
import com.ripple.core.types.known.sle.LedgerEntry;
import com.ripple.core.types.known.sle.entries.Offer;
import com.ripple.core.types.known.tx.Transaction;
import com.ripple.core.types.known.tx.result.AffectedNode;
import com.ripple.core.types.known.tx.result.TransactionMeta;

public class QualityTest {

	
	
	/*
	 * Our order consumes
	 * - OC belongs to us
	 * - OE belongs to others. 
	 * - If the order is fully consumed in the process then no order is created
	 * - If the order is partially consumed in the process then new order with remainder as quantity is created
	 * - Sequence always increases
	 * - OE with other account and FinalFields.TakerPays and TakerGets == 0 means their order is fully consumed, but we don't care
	 * - Counter : OE belonging to others
	 */
	@Test
	public void consume() throws Exception{
		String consumeOneHalf = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"A53C42A135396D1C9B7708E96977CB71454F4AE6C7900D0CF30B62AEC3FE5851\",\"ledger_index\":30854512,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A7AB7B21D6FCE\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25493.59330038829\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25552.70487260873\"}},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000001044\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"3B2BE34F74E8E10113F2D4C84053344F678D64E12D537D8D931D8981DF3AC7F4\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2517023578\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5451},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2515023698\",\"Sequence\":5450},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1686510443008\",\"Flags\":0,\"OwnerCount\":2546,\"Sequence\":229780},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1686512443008\",\"OwnerCount\":2547},\"PreviousTxnID\":\"9563022137D4F43F080FE59F74847D41C4C3222DB4FC0A70560AFDC33771712A\",\"PreviousTxnLgrSeq\":30854493}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7C76B2D09\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001045\",\"Sequence\":229778,\"TakerGets\":\"7885940\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"232.6099563824587\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"83F71EE4B60B9016D25138FCE5D0D1E8DEF8C794940B42B53C8082516F1BEF40\",\"PreviousFields\":{\"TakerGets\":\"8442902\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"249.0385503771742\"}},\"PreviousTxnID\":\"5A2B58D139CDEADCD4B1F6DDE2CB766E5C9BECCD893AEB6747558D76E6586785\",\"PreviousTxnLgrSeq\":30854493}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001045\",\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492,\"Sequence\":229774,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"85794675649594FC8F8595FB5BB02342ABA3D5801DA543C13BCE89558BA3021C\",\"PreviousFields\":{\"TakerGets\":\"1443038\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"42.56499105563746\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-25536929.46912782\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FB9399D7485EA21D73E649E9F821B8C10A1008285E32107B6F30F934723EB5C8\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-25536870.47554278\"}},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}}],\"TransactionIndex\":4,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"120\",\"Flags\":2147483648,\"LastLedgerSequence\":30854514,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5450,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"60\"},\"TakerPays\":\"2000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100EE1BC622B0768D2F01515AE8BC8157EA3EF361BB65C9E680C44CE7C87066CE4402207594042DD3E0FD7C8D0B59B84C96ECD0BF8780CB85B893FD5626F877CB3FB6F5\",\"date\":552025652,\"hash\":\"024C1B17CE1C35425550B6CC5676230B488C5680CADE21D226F8EA2D3594204D\",\"owner_funds\":\"25493.59330038829\"},\"type\":\"transaction\",\"validated\":true}\r\n";
		String consumeOneHalfStillRemains1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"BD67C885A799D7CF8DDC5986C5D4EBED0BF628C9EF120F1463A77A5932BDE8D0\",\"ledger_index\":30855037,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A7B0266166000\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7B0266166000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7B0266166000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25434.47530038829\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25493.59330038829\"}},\"PreviousTxnID\":\"024C1B17CE1C35425550B6CC5676230B488C5680CADE21D226F8EA2D3594204D\",\"PreviousTxnLgrSeq\":30854512}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"594A0491BDA278A3B4E112B046046EF41246B1F70BAD846F39E985897F99C8F3\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C05D0F5BCC3CA\",\"OwnerNode\":\"0000000000000018\",\"Sequence\":5451,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"59.1\"},\"TakerPays\":\"2000000\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2519023566\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5452},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2517023578\",\"OwnerCount\":9,\"Sequence\":5451},\"PreviousTxnID\":\"024C1B17CE1C35425550B6CC5676230B488C5680CADE21D226F8EA2D3594204D\",\"PreviousTxnLgrSeq\":30854512}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4931.7762257212\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4872.7762257212\"}},\"PreviousTxnID\":\"5119074CF81B535F92AF56E2202343A5C2896668BFA616D611A303F8E19DEB9E\",\"PreviousTxnLgrSeq\":30757891}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C05D0F5BCC3CA\",\"NewFields\":{\"ExchangeRate\":\"590C05D0F5BCC3CA\",\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C05D0F5BCC3CA\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7B0266166000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"7D3DE72B6F0253FF415E6E0BE4B3A36A40B042795E2C9D34899F03DB0D2814F9\",\"PreviousTxnLgrSeq\":30855033,\"Sequence\":37,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"D0F92EBE08ECA281A46EB111CFEB2A1B56D32FBEC89945A7847F8CE8FB44F00E\",\"PreviousFields\":{\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"59\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3429983993\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":38},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3431983993\",\"OwnerCount\":3},\"PreviousTxnID\":\"7D3DE72B6F0253FF415E6E0BE4B3A36A40B042795E2C9D34899F03DB0D2814F9\",\"PreviousTxnLgrSeq\":30855033}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"RootIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"}}],\"TransactionIndex\":8,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30855039,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5451,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"118.2\"},\"TakerPays\":\"4000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100F4A42EDB93AB51DFAE34C9C499B5DE922E8F52796FBB214FC8A0520809A6E78A022065A9BDCCFFAC4485C7C44378BD3DB5F6CE4081FDF1F7324806C0546D6D00DE43\",\"date\":552027610,\"hash\":\"B3ECE9E61BEA532BC92DAC8D593D2F595C78D3A2DDC8861ED60685FB2D290F4D\",\"owner_funds\":\"25434.47530038829\"},\"type\":\"transaction\",\"validated\":true}\r\n";
		String consumeOneHalfStillRemains2 = " {\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"5F362744C0BBA4CA4ED9C9AF55A4BDD0036F74A11311D8E8ED406947F15192AF\",\"ledger_index\":30866350,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"E9ACC38D67286EDE5D6E4A76C68A6CDCFC2C423CF856D2DF1CA7257FE46480A9\",\"PreviousTxnLgrSeq\":30866347,\"Sequence\":49,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"0BEE9F84EF5B621C558B8E18FAA7161129145956C44BE17E02624DBDA3266782\",\"PreviousFields\":{\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"58.6\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A68D1C9312000\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24256.81841590657\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24315.53561590657\"}},\"PreviousTxnID\":\"B7D883EC0A5C2F5E8DB36B224B02DE228EBFA41604E39EE0759E213E02B25050\",\"PreviousTxnLgrSeq\":30866329}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2559023398\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5466},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2557023410\",\"OwnerCount\":9,\"Sequence\":5465},\"PreviousTxnID\":\"E423770B348A25B142DB99249E44B751208B515CAC85D8D26FF057052FB06DF1\",\"PreviousTxnLgrSeq\":30866343}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5984.407355877956\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5925.807355877956\"}},\"PreviousTxnID\":\"B7D883EC0A5C2F5E8DB36B224B02DE228EBFA41604E39EE0759E213E02B25050\",\"PreviousTxnLgrSeq\":30866329}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA2\",\"NewFields\":{\"ExchangeRate\":\"590C2013D5C24EA2\",\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA2\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"CB812A1ABB9D41D653857DF779D4DF1B0C67D138E1ED747A19695A4EB6C1D762\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA2\",\"OwnerNode\":\"0000000000000018\",\"Sequence\":5465,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"87.9\"},\"TakerPays\":\"3000000\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3393983741\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":50},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3395983741\",\"OwnerCount\":3},\"PreviousTxnID\":\"E9ACC38D67286EDE5D6E4A76C68A6CDCFC2C423CF856D2DF1CA7257FE46480A9\",\"PreviousTxnLgrSeq\":30866347}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"RootIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"}}],\"TransactionIndex\":8,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30866352,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5465,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"146.5\"},\"TakerPays\":\"5000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100B44CEDC64776D29B329199B5976351E2B1C150761C4984F13260D6D4D21872890220260E89408A5B1C7EAA2EC4951EE0C26C900CE500EE49A043A41C0FEF31C41554\",\"date\":552067730,\"hash\":\"5ADB0FDB436D248AE6FD7192DC557AF89753F347F0C0EE2E42C4280DF291C5F7\",\"owner_funds\":\"24256.81841590657\"},\"type\":\"transaction\",\"validated\":true}\r\n";
		System.out.println("consumeOneHalf- Ours all consumed 1");
		testOfferQuality(consumeOneHalf);
		System.out.println("consume - ours all consumed 2");
		String consumeOneHalf2 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"C3C04E16DD32580668852A818FFC544B0AEF3C08EED981E60F949E18E74758D5\",\"ledger_index\":30866456,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24168.74261590657\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24198.10121590657\"}},\"PreviousTxnID\":\"21E64C8C2D106FA94C60CDE58F49A7EC9543558246777EABAFA1650F7CDA63C2\",\"PreviousTxnLgrSeq\":30866413}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":51,\"TakerGets\":\"1000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29.3\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"47556CC80BECFE5978A442F2B111911C2094C6AD57242D137A9C7D9C10C45058\",\"PreviousFields\":{\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"58.6\"}},\"PreviousTxnID\":\"6E8AFBA36734F820E29EC67C3F254E180E6BF68B6DCC7F3AFE0C0ACCAD1F4F02\",\"PreviousTxnLgrSeq\":30866453}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2562023362\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5469},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2561023374\",\"Sequence\":5468},\"PreviousTxnID\":\"21E64C8C2D106FA94C60CDE58F49A7EC9543558246777EABAFA1650F7CDA63C2\",\"PreviousTxnLgrSeq\":30866413}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6072.307355877956\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6043.007355877956\"}},\"PreviousTxnID\":\"21E64C8C2D106FA94C60CDE58F49A7EC9543558246777EABAFA1650F7CDA63C2\",\"PreviousTxnLgrSeq\":30866413}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3390983717\",\"Flags\":0,\"OwnerCount\":3,\"Sequence\":52},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3391983717\"},\"PreviousTxnID\":\"6E8AFBA36734F820E29EC67C3F254E180E6BF68B6DCC7F3AFE0C0ACCAD1F4F02\",\"PreviousTxnLgrSeq\":30866453}}],\"TransactionIndex\":1,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30866458,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5468,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29.3\"},\"TakerPays\":\"1000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100B278AEEE88A2F52575EADF5B71475B8AB20AD080EDC25F3439C0238FD2C8EB0502200B0D1A1BA171D400DD75F9F45CB1AE476F3E2DC86F7832921DC216ABFC739093\",\"date\":552068092,\"hash\":\"99854B0A28130EE77EB4949AD3B90E9EA8CC207397F2892F8794B7BB10584D1E\",\"owner_funds\":\"24168.74261590657\"},\"type\":\"transaction\",\"validated\":true}\r\n";
		testOfferQuality(consumeOneHalf2);
		System.out.println("consumeOneHalf - Ours still remains 1");
		testOfferQuality(consumeOneHalfStillRemains1);
		System.out.println("consumeOneHalf - Ours still remains 2");
		testOfferQuality(consumeOneHalfStillRemains2);
		System.out.println("consume fully match 1 ");
		String consumeFullyMatch1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"CCE62164682DE68112F0CE0E688B6A17E68EC77C21DD6B9472E275834C97E26A\",\"ledger_index\":30866413,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A68D1C9312000\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24198.10121590657\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24256.81841590657\"}},\"PreviousTxnID\":\"5ADB0FDB436D248AE6FD7192DC557AF89753F347F0C0EE2E42C4280DF291C5F7\",\"PreviousTxnLgrSeq\":30866350}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2561023374\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5468},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2559023386\",\"Sequence\":5467},\"PreviousTxnID\":\"1BE34C4C2B00DFE4A4FA3E5CAA33398018CFA13AB19AB9E945B64DF3928C8E0C\",\"PreviousTxnLgrSeq\":30866404}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6043.007355877956\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5984.407355877956\"}},\"PreviousTxnID\":\"5ADB0FDB436D248AE6FD7192DC557AF89753F347F0C0EE2E42C4280DF291C5F7\",\"PreviousTxnLgrSeq\":30866350}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3391983729\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":51},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3393983729\",\"OwnerCount\":3},\"PreviousTxnID\":\"77687E2805F496EF8F7CDD05AEB45AE1EF6860CED484B8A6B3D6392E92BC855A\",\"PreviousTxnLgrSeq\":30866410}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"RootIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"77687E2805F496EF8F7CDD05AEB45AE1EF6860CED484B8A6B3D6392E92BC855A\",\"PreviousTxnLgrSeq\":30866410,\"Sequence\":50,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"F39D5B3EDE43CDA45620E1DBEA51B172E645AEFB0F8B5D2FFE2C566F6A1F1833\",\"PreviousFields\":{\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"58.6\"}}}}],\"TransactionIndex\":1,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30866416,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5467,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"58.6\"},\"TakerPays\":\"2000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100D4A91F74421D779A6588FE59C67D7F91E9E8BA6D6272CFADBADC6920E38206C602203D123FD05686FC86A6F1895577EDEDC713E61F96A4E4252583283462BDE60D86\",\"date\":552067942,\"hash\":\"21E64C8C2D106FA94C60CDE58F49A7EC9543558246777EABAFA1650F7CDA63C2\",\"owner_funds\":\"24198.10121590657\"},\"type\":\"transaction\",\"validated\":true}\r\n";
		testOfferQuality(consumeFullyMatch1);
	}
	
	/*
	 * Our order is consumed
	 * - OC belongs to others. Can be payment which belongs to others. 
	 * - When consumed no new order is created
	 * - Sequence does not change if taken or partially taken. Only our first OC adds the sequence. 
	 * - Counter : OE with our account
	 * - OE with our account and FinalFields.TakerPays and TakerGets == 0 means fully consumed
	 */
	@Test
	public void consumed() throws Exception{
		System.out.println("partially consumed");
		String consumedHalf = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"23B2DF6090F92CF440EE8F3B9A57BC9855DBC7FF8D1EF3DA6ADEAC0690C3EF51\",\"ledger_index\":30856627,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C03BC0A6F7FDE\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000018\",\"Sequence\":5456,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"88.71\"},\"TakerPays\":\"3000000\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"056871F43F37D6B924F7D35F4D2C0DF6D1E02A71E638EA5D454F5211FBC21420\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"147.85\"},\"TakerPays\":\"5000000\"},\"PreviousTxnID\":\"677CA05F654AE8A07936A7205C6925746CB00A6B615105639C428857096963B3\",\"PreviousTxnLgrSeq\":30856614}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24903.01942038829\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24962.27770038829\"}},\"PreviousTxnID\":\"7FE4EDDC776B3ECC777444F5DF7CCB3AC7CC6C105B935BC72A63993DD9C86347\",\"PreviousTxnLgrSeq\":30856584}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2537023506\",\"Flags\":0,\"OwnerCount\":12,\"Sequence\":5457},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2535023506\"},\"PreviousTxnID\":\"677CA05F654AE8A07936A7205C6925746CB00A6B615105639C428857096963B3\",\"PreviousTxnLgrSeq\":30856614}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5226.319164203065\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5167.179164203065\"}},\"PreviousTxnID\":\"7FE4EDDC776B3ECC777444F5DF7CCB3AC7CC6C105B935BC72A63993DD9C86347\",\"PreviousTxnLgrSeq\":30856584}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3419983825\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":43},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3421983837\",\"Sequence\":42},\"PreviousTxnID\":\"7FE4EDDC776B3ECC777444F5DF7CCB3AC7CC6C105B935BC72A63993DD9C86347\",\"PreviousTxnLgrSeq\":30856584}}],\"TransactionIndex\":32,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Fee\":\"12\",\"Flags\":2148007936,\"LastLedgerSequence\":30856629,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":42,\"SigningPubKey\":\"03E8BBF8387DCDCE12F8B8F3CAC425D2587548E6510659E27F74E02EC7FE1DAE0E\",\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"59.14\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3044022045BE95C9BC4AEDABF74AA052E72394819A1B9D7374E7FDD0F92C35F438290E45022064DF94A41EBCAFCCE246E27EE336A97D669CA1D26085D4E1B2D2940E394AD6D6\",\"date\":552033351,\"hash\":\"FC1649A761A589BAE43B22657B1A6A41942818E92EB7715C98A3B382DAED9879\",\"owner_funds\":\"3389983825\"},\"type\":\"transaction\",\"validated\":true}\r\n";
		consumedHalf = " {\r\n   \"engine_result\": \"tesSUCCESS\",\r\n   \"engine_result_code\": 0,\r\n   \"engine_result_message\": \"The transaction was applied. Only final in a validated ledger.\",\r\n   \"ledger_hash\": \"D033EFA75F3E2F4ABE95BEB4703BA10180D9E6BDDC8774E607F51D2A780B04E8\",\r\n   \"ledger_index\": 30865654,\r\n   \"meta\": {\r\n     \"AffectedNodes\": [{\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"24579.52918038829\"\r\n           },\r\n           \"Flags\": 1114112,\r\n           \"HighLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"0\"\r\n           },\r\n           \"HighNode\": \"0000000000000399\",\r\n           \"LowLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n             \"value\": \"100000\"\r\n           },\r\n           \"LowNode\": \"0000000000000001\"\r\n         },\r\n         \"LedgerEntryType\": \"RippleState\",\r\n         \"LedgerIndex\": \"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"24637.40470038829\"\r\n           }\r\n         },\r\n         \"PreviousTxnID\": \"87CCE5476E812BF52E84DC28F6BBF5039CEB09A9C109E66701A6815F7D76B5F3\",\r\n         \"PreviousTxnLgrSeq\": 30857020\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n           \"Balance\": \"2548023470\",\r\n           \"Flags\": 0,\r\n           \"OwnerCount\": 10,\r\n           \"Sequence\": 5460\r\n         },\r\n         \"LedgerEntryType\": \"AccountRoot\",\r\n         \"LedgerIndex\": \"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": \"2546023470\"\r\n         },\r\n         \"PreviousTxnID\": \"72FB881031E415C24D676F524ADA3BA96ABDFBF15897AE56C96E93D34043C57E\",\r\n         \"PreviousTxnLgrSeq\": 30865648\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n           \"BookDirectory\": \"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C4D384A272BF7\",\r\n           \"BookNode\": \"0000000000000000\",\r\n           \"Flags\": 0,\r\n           \"OwnerNode\": \"0000000000000018\",\r\n           \"Sequence\": 5459,\r\n           \"TakerGets\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"115.52\"\r\n           },\r\n           \"TakerPays\": \"4000000\"\r\n         },\r\n         \"LedgerEntryType\": \"Offer\",\r\n         \"LedgerIndex\": \"8A0FF6C3369FA060CF381614999FCDC2CE71545CFAB8551CDEDFC4A80AAD9378\",\r\n         \"PreviousFields\": {\r\n           \"TakerGets\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"173.28\"\r\n           },\r\n           \"TakerPays\": \"6000000\"\r\n         },\r\n         \"PreviousTxnID\": \"72FB881031E415C24D676F524ADA3BA96ABDFBF15897AE56C96E93D34043C57E\",\r\n         \"PreviousTxnLgrSeq\": 30865648\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"5459.34132648114\"\r\n           },\r\n           \"Flags\": 1114112,\r\n           \"HighLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"0\"\r\n           },\r\n           \"HighNode\": \"00000000000001BC\",\r\n           \"LowLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\r\n             \"value\": \"10000000000\"\r\n           },\r\n           \"LowNode\": \"0000000000000000\"\r\n         },\r\n         \"LedgerEntryType\": \"RippleState\",\r\n         \"LedgerIndex\": \"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"5401.58132648114\"\r\n           }\r\n         },\r\n         \"PreviousTxnID\": \"691F3AAB618E4DB8AE0787326E4932A95970C50B555778C893F3077E0FBF44DF\",\r\n         \"PreviousTxnLgrSeq\": 30865630\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Account\": \"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\r\n           \"Balance\": \"3411983789\",\r\n           \"Flags\": 0,\r\n           \"OwnerCount\": 2,\r\n           \"Sequence\": 46\r\n         },\r\n         \"LedgerEntryType\": \"AccountRoot\",\r\n         \"LedgerIndex\": \"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": \"3413983801\",\r\n           \"Sequence\": 45\r\n         },\r\n         \"PreviousTxnID\": \"691F3AAB618E4DB8AE0787326E4932A95970C50B555778C893F3077E0FBF44DF\",\r\n         \"PreviousTxnLgrSeq\": 30865630\r\n       }\r\n     }],\r\n     \"TransactionIndex\": 0,\r\n     \"TransactionResult\": \"tesSUCCESS\"\r\n   },\r\n   \"status\": \"closed\",\r\n   \"transaction\": {\r\n     \"Account\": \"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\r\n     \"Fee\": \"12\",\r\n     \"Flags\": 2148007936,\r\n     \"LastLedgerSequence\": 30865656,\r\n     \"Memos\": [{\r\n       \"Memo\": {\r\n         \"MemoData\": \"726D2D312E322E33\",\r\n         \"MemoType\": \"636C69656E74\"\r\n       }\r\n     }],\r\n     \"Sequence\": 45,\r\n     \"SigningPubKey\": \"03E8BBF8387DCDCE12F8B8F3CAC425D2587548E6510659E27F74E02EC7FE1DAE0E\",\r\n     \"TakerGets\": \"2000000\",\r\n     \"TakerPays\": {\r\n       \"currency\": \"JPY\",\r\n       \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n       \"value\": \"57.4\"\r\n     },\r\n     \"TransactionType\": \"OfferCreate\",\r\n     \"TxnSignature\": \"3045022100DE76C78BF856494C88AE57919168ABC7E901541DE5D0A7654FAF66B8949AFFC902204FDFD2727CE3D314C8999BEA95763238B098411F14A7EE1D61D78D55BEB44146\",\r\n     \"date\": 552065342,\r\n     \"hash\": \"101271F524C97A5EA68DF34CABB6703143367A1BA05754E5FB85A4D63DA0AFE4\",\r\n     \"owner_funds\": \"3381983789\"\r\n   },\r\n   \"type\": \"transaction\",\r\n   \"validated\": true\r\n }";
		
		String consumedHalfAndFull1 = "{\r\n  \"engine_result\": \"tesSUCCESS\",\r\n  \"engine_result_code\": 0,\r\n  \"engine_result_message\": \"The transaction was applied. Only final in a validated ledger.\",\r\n  \"ledger_hash\": \"04EF2B9C096CD323A3B102A2C88B71EC643B9B156B9B64CD72ECBBAB78478611\",\r\n  \"ledger_index\": 30865952,\r\n  \"meta\": {\r\n    \"AffectedNodes\": [{\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Balance\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n            \"value\": \"24562.81142125649\"\r\n          },\r\n          \"Flags\": 1114112,\r\n          \"HighLimit\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"0\"\r\n          },\r\n          \"HighNode\": \"0000000000000399\",\r\n          \"LowLimit\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n            \"value\": \"100000\"\r\n          },\r\n          \"LowNode\": \"0000000000000001\"\r\n        },\r\n        \"LedgerEntryType\": \"RippleState\",\r\n        \"LedgerIndex\": \"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\r\n        \"PreviousFields\": {\r\n          \"Balance\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n            \"value\": \"24579.52918038829\"\r\n          }\r\n        },\r\n        \"PreviousTxnID\": \"101271F524C97A5EA68DF34CABB6703143367A1BA05754E5FB85A4D63DA0AFE4\",\r\n        \"PreviousTxnLgrSeq\": 30865654\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n          \"BookDirectory\": \"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C25623355ACDA\",\r\n          \"BookNode\": \"0000000000000000\",\r\n          \"Flags\": 0,\r\n          \"OwnerNode\": \"0000000000000018\",\r\n          \"Sequence\": 5461,\r\n          \"TakerGets\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"100.2822408681903\"\r\n          },\r\n          \"TakerPays\": \"3428452\"\r\n        },\r\n        \"LedgerEntryType\": \"Offer\",\r\n        \"LedgerIndex\": \"3BF312372EF6EB3F72D0562402005945F88E66437DEAE259545C789258DC8389\",\r\n        \"PreviousFields\": {\r\n          \"TakerGets\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"117\"\r\n          },\r\n          \"TakerPays\": \"4000000\"\r\n        },\r\n        \"PreviousTxnID\": \"C03EEBCA6A585271DD03A8ED4E59F067AADB36C32978F17589CE10412A278246\",\r\n        \"PreviousTxnLgrSeq\": 30865948\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Account\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\r\n          \"Balance\": \"31777122531\",\r\n          \"Flags\": 0,\r\n          \"OwnerCount\": 49,\r\n          \"Sequence\": 837\r\n        },\r\n        \"LedgerEntryType\": \"AccountRoot\",\r\n        \"LedgerIndex\": \"418E2A54C93ADD8D7EEBE5EDB240C4BBB98A919B8AF67756A2D52D5C461C37B0\",\r\n        \"PreviousFields\": {\r\n          \"Balance\": \"31777696708\",\r\n          \"OwnerCount\": 50\r\n        },\r\n        \"PreviousTxnID\": \"E1875B0DB074D4B85A2D62384A25E174086C056527290DCB6DF08B9460D21F9F\",\r\n        \"PreviousTxnLgrSeq\": 30865938\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Account\": \"r9KG7Du7aFmABzMvDnwuvPaEoMu4Eurwok\",\r\n          \"Balance\": \"371546507978\",\r\n          \"Flags\": 0,\r\n          \"OwnerCount\": 6,\r\n          \"Sequence\": 48945\r\n        },\r\n        \"LedgerEntryType\": \"AccountRoot\",\r\n        \"LedgerIndex\": \"5A667CB5FBAB4143EDEFBD6EDDD4B6D19C905209C8EE16486D5D7CD6CB083E78\",\r\n        \"PreviousFields\": {\r\n          \"Balance\": \"371546505359\",\r\n          \"Sequence\": 48944\r\n        },\r\n        \"PreviousTxnID\": \"39A1FDDAA00766559DE1B786A99542DD19F3E42CF851A041B6C605197BF09DF0\",\r\n        \"PreviousTxnLgrSeq\": 30865800\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Balance\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n            \"value\": \"-207793.3474527851\"\r\n          },\r\n          \"Flags\": 2228224,\r\n          \"HighLimit\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\r\n            \"value\": \"10000000000\"\r\n          },\r\n          \"HighNode\": \"0000000000000000\",\r\n          \"LowLimit\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"0\"\r\n          },\r\n          \"LowNode\": \"00000000000001B7\"\r\n        },\r\n        \"LedgerEntryType\": \"RippleState\",\r\n        \"LedgerIndex\": \"5F894CD5A7BE52AE1A1A74075313B891598C6FA41D820B84E2EE01457EAC5E8E\",\r\n        \"PreviousFields\": {\r\n          \"Balance\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n            \"value\": \"-207776.663062434\"\r\n          }\r\n        },\r\n        \"PreviousTxnID\": \"E1875B0DB074D4B85A2D62384A25E174086C056527290DCB6DF08B9460D21F9F\",\r\n        \"PreviousTxnLgrSeq\": 30865938\r\n      }\r\n    }, {\r\n      \"DeletedNode\": {\r\n        \"FinalFields\": {\r\n          \"ExchangeRate\": \"4B038D7EA4C68000\",\r\n          \"Flags\": 0,\r\n          \"RootIndex\": \"6CBBA821BB26420284E9C91F4E8B5D66FA66DDB55163D1F54B038D7EA4C68000\",\r\n          \"TakerGetsCurrency\": \"0000000000000000000000000000000000000000\",\r\n          \"TakerGetsIssuer\": \"0000000000000000000000000000000000000000\",\r\n          \"TakerPaysCurrency\": \"0000000000000000000000004254430000000000\",\r\n          \"TakerPaysIssuer\": \"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"\r\n        },\r\n        \"LedgerEntryType\": \"DirectoryNode\",\r\n        \"LedgerIndex\": \"6CBBA821BB26420284E9C91F4E8B5D66FA66DDB55163D1F54B038D7EA4C68000\"\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n          \"Balance\": \"2548594994\",\r\n          \"Flags\": 0,\r\n          \"OwnerCount\": 10,\r\n          \"Sequence\": 5462\r\n        },\r\n        \"LedgerEntryType\": \"AccountRoot\",\r\n        \"LedgerIndex\": \"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\r\n        \"PreviousFields\": {\r\n          \"Balance\": \"2548023446\"\r\n        },\r\n        \"PreviousTxnID\": \"C03EEBCA6A585271DD03A8ED4E59F067AADB36C32978F17589CE10412A278246\",\r\n        \"PreviousTxnLgrSeq\": 30865948\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Balance\": {\r\n            \"currency\": \"GCB\",\r\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n            \"value\": \"9999725342.910839\"\r\n          },\r\n          \"Flags\": 3211264,\r\n          \"HighLimit\": {\r\n            \"currency\": \"GCB\",\r\n            \"issuer\": \"rHaans8PtgwbacHvXAL3u6TG28gTAtCwr8\",\r\n            \"value\": \"0\"\r\n          },\r\n          \"HighNode\": \"0000000000000000\",\r\n          \"LowLimit\": {\r\n            \"currency\": \"GCB\",\r\n            \"issuer\": \"r9KG7Du7aFmABzMvDnwuvPaEoMu4Eurwok\",\r\n            \"value\": \"10000000000\"\r\n          },\r\n          \"LowNode\": \"0000000000000000\"\r\n        },\r\n        \"LedgerEntryType\": \"RippleState\",\r\n        \"LedgerIndex\": \"A2B41EE7818A5756B6A2276BDBB3CE0ED3A3B350787FD6B76E5EA1354A8F20D2\",\r\n        \"PreviousFields\": {\r\n          \"Balance\": {\r\n            \"currency\": \"GCB\",\r\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n            \"value\": \"9999725343.485016\"\r\n          }\r\n        },\r\n        \"PreviousTxnID\": \"730859F8ED581DAF22747A3936132E9DCEE89A68027C0EF606ECF81ECFE7F298\",\r\n        \"PreviousTxnLgrSeq\": 30865742\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Account\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\r\n          \"BookDirectory\": \"A5B25D747DFDAFA1FC9B7360BFF856CF39FAE55C9E92C8C35A0A4D88DDD94000\",\r\n          \"BookNode\": \"0000000000000000\",\r\n          \"Flags\": 131072,\r\n          \"OwnerNode\": \"0000000000000005\",\r\n          \"Sequence\": 817,\r\n          \"TakerGets\": {\r\n            \"currency\": \"BTC\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"0.06984000000000007\"\r\n          },\r\n          \"TakerPays\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"20253.60000000001\"\r\n          }\r\n        },\r\n        \"LedgerEntryType\": \"Offer\",\r\n        \"LedgerIndex\": \"B86255BAC491DA02534035A15FA76056298BF9BDBB049A1BED8242062B6556A7\",\r\n        \"PreviousFields\": {\r\n          \"TakerGets\": {\r\n            \"currency\": \"BTC\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"0.06989753238052113\"\r\n          },\r\n          \"TakerPays\": {\r\n            \"currency\": \"JPY\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"20270.28439035111\"\r\n          }\r\n        },\r\n        \"PreviousTxnID\": \"DA0B582AC7C8E6802FC2960F16E5C745146EE0EB5373C4E76E64861C7E76DBCA\",\r\n        \"PreviousTxnLgrSeq\": 30865716\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Account\": \"r9KG7Du7aFmABzMvDnwuvPaEoMu4Eurwok\",\r\n          \"BookDirectory\": \"E6E8A9842EA2ED1FD5D0599343692CE1EBF977AEA751B7DC5B038D7EA4C68000\",\r\n          \"BookNode\": \"0000000000000000\",\r\n          \"Flags\": 65536,\r\n          \"OwnerNode\": \"0000000000000000\",\r\n          \"Sequence\": 39018,\r\n          \"TakerGets\": {\r\n            \"currency\": \"GCB\",\r\n            \"issuer\": \"rHaans8PtgwbacHvXAL3u6TG28gTAtCwr8\",\r\n            \"value\": \"9999725342.910839\"\r\n          },\r\n          \"TakerPays\": \"9999725342910839\"\r\n        },\r\n        \"LedgerEntryType\": \"Offer\",\r\n        \"LedgerIndex\": \"C939B9B2C5803DD6D89B792E72470F79CBE9F9E999691789E0B68C3808BDDD8E\",\r\n        \"PreviousFields\": {\r\n          \"TakerGets\": {\r\n            \"currency\": \"GCB\",\r\n            \"issuer\": \"rHaans8PtgwbacHvXAL3u6TG28gTAtCwr8\",\r\n            \"value\": \"9999725343.485016\"\r\n          },\r\n          \"TakerPays\": \"9999725343485016\"\r\n        },\r\n        \"PreviousTxnID\": \"730859F8ED581DAF22747A3936132E9DCEE89A68027C0EF606ECF81ECFE7F298\",\r\n        \"PreviousTxnLgrSeq\": 30865742\r\n      }\r\n    }, {\r\n      \"DeletedNode\": {\r\n        \"FinalFields\": {\r\n          \"Account\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\r\n          \"BookDirectory\": \"6CBBA821BB26420284E9C91F4E8B5D66FA66DDB55163D1F54B038D7EA4C68000\",\r\n          \"BookNode\": \"0000000000000000\",\r\n          \"Flags\": 131072,\r\n          \"OwnerNode\": \"0000000000000004\",\r\n          \"PreviousTxnID\": \"D5617444A60AC738C2A6607C4FE754986D0BCF5443835AE3E1A7B25A293ECB8B\",\r\n          \"PreviousTxnLgrSeq\": 30865716,\r\n          \"Sequence\": 806,\r\n          \"TakerGets\": \"0\",\r\n          \"TakerPays\": {\r\n            \"currency\": \"BTC\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"0\"\r\n          }\r\n        },\r\n        \"LedgerEntryType\": \"Offer\",\r\n        \"LedgerIndex\": \"D56342176D5062463F75E5DD7E5DA1DF9C97A8F0A7FB3E353B167475C603078A\",\r\n        \"PreviousFields\": {\r\n          \"TakerGets\": \"574177\",\r\n          \"TakerPays\": {\r\n            \"currency\": \"BTC\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"0.0000574175454302\"\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Balance\": {\r\n            \"currency\": \"BTC\",\r\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n            \"value\": \"-4.884970810055803\"\r\n          },\r\n          \"Flags\": 2228224,\r\n          \"HighLimit\": {\r\n            \"currency\": \"BTC\",\r\n            \"issuer\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\r\n            \"value\": \"10000000000\"\r\n          },\r\n          \"HighNode\": \"0000000000000000\",\r\n          \"LowLimit\": {\r\n            \"currency\": \"BTC\",\r\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n            \"value\": \"0\"\r\n          },\r\n          \"LowNode\": \"0000000000000209\"\r\n        },\r\n        \"LedgerEntryType\": \"RippleState\",\r\n        \"LedgerIndex\": \"D9B53EADD8FDF624071138FEAAA38F603A0BF6C7D8B474096F32687731ACBDD6\",\r\n        \"PreviousFields\": {\r\n          \"Balance\": {\r\n            \"currency\": \"BTC\",\r\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n            \"value\": \"-4.884970924890894\"\r\n          }\r\n        },\r\n        \"PreviousTxnID\": \"D5617444A60AC738C2A6607C4FE754986D0BCF5443835AE3E1A7B25A293ECB8B\",\r\n        \"PreviousTxnLgrSeq\": 30865716\r\n      }\r\n    }, {\r\n      \"ModifiedNode\": {\r\n        \"FinalFields\": {\r\n          \"Flags\": 0,\r\n          \"IndexNext\": \"0000000000000005\",\r\n          \"IndexPrevious\": \"0000000000000003\",\r\n          \"Owner\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\r\n          \"RootIndex\": \"B44FEA42527C9C3F380F1838D2C29BB40FC67B906B65823F0028B3CF1BB6D838\"\r\n        },\r\n        \"LedgerEntryType\": \"DirectoryNode\",\r\n        \"LedgerIndex\": \"FFDD7CA97B030C097A1AABD446820DB0F00697E88DA8C09E2AEAC11483C3A9B0\"\r\n      }\r\n    }],\r\n    \"DeliveredAmount\": {\r\n      \"currency\": \"GCB\",\r\n      \"issuer\": \"rHaans8PtgwbacHvXAL3u6TG28gTAtCwr8\",\r\n      \"value\": \"0.574177\"\r\n    },\r\n    \"TransactionIndex\": 2,\r\n    \"TransactionResult\": \"tesSUCCESS\"\r\n  },\r\n  \"status\": \"closed\",\r\n  \"transaction\": {\r\n    \"Account\": \"r9KG7Du7aFmABzMvDnwuvPaEoMu4Eurwok\",\r\n    \"Amount\": {\r\n      \"currency\": \"GCB\",\r\n      \"issuer\": \"rHaans8PtgwbacHvXAL3u6TG28gTAtCwr8\",\r\n      \"value\": \"10000\"\r\n    },\r\n    \"Destination\": \"rHaans8PtgwbacHvXAL3u6TG28gTAtCwr8\",\r\n    \"Fee\": \"10\",\r\n    \"Flags\": 458752,\r\n    \"Paths\": [\r\n      [{\r\n        \"currency\": \"JPY\",\r\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n        \"type\": 48,\r\n        \"type_hex\": \"0000000000000030\"\r\n      }, {\r\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n        \"type\": 1,\r\n        \"type_hex\": \"0000000000000001\"\r\n      }, {\r\n        \"currency\": \"BTC\",\r\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n        \"type\": 48,\r\n        \"type_hex\": \"0000000000000030\"\r\n      }, {\r\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n        \"type\": 1,\r\n        \"type_hex\": \"0000000000000001\"\r\n      }, {\r\n        \"currency\": \"XRP\",\r\n        \"type\": 16,\r\n        \"type_hex\": \"0000000000000010\"\r\n      }],\r\n      [{\r\n        \"currency\": \"CNY\",\r\n        \"issuer\": \"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\r\n        \"type\": 48,\r\n        \"type_hex\": \"0000000000000030\"\r\n      }, {\r\n        \"currency\": \"XLM\",\r\n        \"issuer\": \"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\r\n        \"type\": 48,\r\n        \"type_hex\": \"0000000000000030\"\r\n      }, {\r\n        \"account\": \"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\r\n        \"type\": 1,\r\n        \"type_hex\": \"0000000000000001\"\r\n      }, {\r\n        \"currency\": \"BTC\",\r\n        \"issuer\": \"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B\",\r\n        \"type\": 48,\r\n        \"type_hex\": \"0000000000000030\"\r\n      }, {\r\n        \"account\": \"rvYAfWj5gh67oV6fW32ZzP3Aw4Eubs59B\",\r\n        \"type\": 1,\r\n        \"type_hex\": \"0000000000000001\"\r\n      }, {\r\n        \"currency\": \"XRP\",\r\n        \"type\": 16,\r\n        \"type_hex\": \"0000000000000010\"\r\n      }]\r\n    ],\r\n    \"SendMax\": \"9999990000\",\r\n    \"Sequence\": 48944,\r\n    \"SigningPubKey\": \"03580C9EBB7EEF804E020161E07DC8B904BDB718650F2DCF983E8638AB0EDFA415\",\r\n    \"TransactionType\": \"Payment\",\r\n    \"TxnSignature\": \"30460221009285C513166F291B012A28F62669365302DE1D6682632F36811B8785E5F44FC0022100DE33541D5EB6A0839AFEE741051B163A31A53A746B6B7253D6834696829B4768\",\r\n    \"date\": 552066390,\r\n    \"hash\": \"A0DC5ECFCB27E60955F4BC011F5A3BF3EA35693AA6F45723642DE025D8DED9C6\"\r\n  },\r\n  \"type\": \"transaction\",\r\n  \"validated\": true\r\n}";
		String consumedHalfAndFull1b = " {\r\n   \"engine_result\": \"tesSUCCESS\",\r\n   \"engine_result_code\": 0,\r\n   \"engine_result_message\": \"The transaction was applied. Only final in a validated ledger.\",\r\n   \"ledger_hash\": \"9022FC218C76ECAAB19BD196AE9C6B4D2696218B4E0D84C4E344F73D8CE9785C\",\r\n   \"ledger_index\": 30865954,\r\n   \"meta\": {\r\n     \"AffectedNodes\": [{\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"24462.32861590657\"\r\n           },\r\n           \"Flags\": 1114112,\r\n           \"HighLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"0\"\r\n           },\r\n           \"HighNode\": \"0000000000000399\",\r\n           \"LowLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n             \"value\": \"100000\"\r\n           },\r\n           \"LowNode\": \"0000000000000001\"\r\n         },\r\n         \"LedgerEntryType\": \"RippleState\",\r\n         \"LedgerIndex\": \"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"24562.81142125649\"\r\n           }\r\n         },\r\n         \"PreviousTxnID\": \"A0DC5ECFCB27E60955F4BC011F5A3BF3EA35693AA6F45723642DE025D8DED9C6\",\r\n         \"PreviousTxnLgrSeq\": 30865952\r\n       }\r\n     }, {\r\n       \"DeletedNode\": {\r\n         \"FinalFields\": {\r\n           \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n           \"BookDirectory\": \"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C25623355ACDA\",\r\n           \"BookNode\": \"0000000000000000\",\r\n           \"Flags\": 0,\r\n           \"OwnerNode\": \"0000000000000018\",\r\n           \"PreviousTxnID\": \"A0DC5ECFCB27E60955F4BC011F5A3BF3EA35693AA6F45723642DE025D8DED9C6\",\r\n           \"PreviousTxnLgrSeq\": 30865952,\r\n           \"Sequence\": 5461,\r\n           \"TakerGets\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"0\"\r\n           },\r\n           \"TakerPays\": \"0\"\r\n         },\r\n         \"LedgerEntryType\": \"Offer\",\r\n         \"LedgerIndex\": \"3BF312372EF6EB3F72D0562402005945F88E66437DEAE259545C789258DC8389\",\r\n         \"PreviousFields\": {\r\n           \"TakerGets\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"100.2822408681903\"\r\n           },\r\n           \"TakerPays\": \"3428452\"\r\n         }\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"1795560.195939358\"\r\n           },\r\n           \"Flags\": 1114112,\r\n           \"HighLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"0\"\r\n           },\r\n           \"HighNode\": \"0000000000000209\",\r\n           \"LowLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rn75cXegVgS1X7e9B2kzM3Q7rwfRkzXmTm\",\r\n             \"value\": \"10000000000\"\r\n           },\r\n           \"LowNode\": \"0000000000000000\"\r\n         },\r\n         \"LedgerEntryType\": \"RippleState\",\r\n         \"LedgerIndex\": \"3FB9C56D862461297C259416800AFE5A9E47074866EDEB0482340DB7F822461A\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"1795635.435319361\"\r\n           }\r\n         },\r\n         \"PreviousTxnID\": \"8F06AB70C3A842C163E67FADCC9C6D6961795F593D32F49E014F442153FCCD51\",\r\n         \"PreviousTxnLgrSeq\": 30865940\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Account\": \"rn75cXegVgS1X7e9B2kzM3Q7rwfRkzXmTm\",\r\n           \"BookDirectory\": \"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2AB537CE5EAF\",\r\n           \"BookNode\": \"0000000000000000\",\r\n           \"Flags\": 0,\r\n           \"OwnerNode\": \"0000000000000000\",\r\n           \"Sequence\": 347,\r\n           \"TakerGets\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"1794576.52876\"\r\n           },\r\n           \"TakerPays\": \"61458100300\"\r\n         },\r\n         \"LedgerEntryType\": \"Offer\",\r\n         \"LedgerIndex\": \"52F018B67940DCCF1B7D1C557AA00DBF85311E2C3AAFFD165710A80D3145E7B6\",\r\n         \"PreviousFields\": {\r\n           \"TakerGets\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"1794651.6179616\"\r\n           },\r\n           \"TakerPays\": \"61460671848\"\r\n         },\r\n         \"PreviousTxnID\": \"8F06AB70C3A842C163E67FADCC9C6D6961795F593D32F49E014F442153FCCD51\",\r\n         \"PreviousTxnLgrSeq\": 30865940\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Account\": \"rn75cXegVgS1X7e9B2kzM3Q7rwfRkzXmTm\",\r\n           \"Balance\": \"294599241449\",\r\n           \"Flags\": 0,\r\n           \"OwnerCount\": 5,\r\n           \"Sequence\": 348\r\n         },\r\n         \"LedgerEntryType\": \"AccountRoot\",\r\n         \"LedgerIndex\": \"690765BB002DD7977DD162D9CE11FB704D111E1C027BB9D77B31E56B43A00416\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": \"294596669901\"\r\n         },\r\n         \"PreviousTxnID\": \"8F06AB70C3A842C163E67FADCC9C6D6961795F593D32F49E014F442153FCCD51\",\r\n         \"PreviousTxnLgrSeq\": 30865940\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n           \"Balance\": \"2552023446\",\r\n           \"Flags\": 0,\r\n           \"OwnerCount\": 9,\r\n           \"Sequence\": 5462\r\n         },\r\n         \"LedgerEntryType\": \"AccountRoot\",\r\n         \"LedgerIndex\": \"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": \"2548594994\",\r\n           \"OwnerCount\": 10\r\n         },\r\n         \"PreviousTxnID\": \"A0DC5ECFCB27E60955F4BC011F5A3BF3EA35693AA6F45723642DE025D8DED9C6\",\r\n         \"PreviousTxnLgrSeq\": 30865952\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"5779.307355877956\"\r\n           },\r\n           \"Flags\": 1114112,\r\n           \"HighLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n             \"value\": \"0\"\r\n           },\r\n           \"HighNode\": \"00000000000001BC\",\r\n           \"LowLimit\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\r\n             \"value\": \"10000000000\"\r\n           },\r\n           \"LowNode\": \"0000000000000000\"\r\n         },\r\n         \"LedgerEntryType\": \"RippleState\",\r\n         \"LedgerIndex\": \"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": {\r\n             \"currency\": \"JPY\",\r\n             \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\r\n             \"value\": \"5603.935913409766\"\r\n           }\r\n         },\r\n         \"PreviousTxnID\": \"F2500448CE47E43AF02B4C38BB3C232506B2662DDABBF59D5B5652F9ED17BD30\",\r\n         \"PreviousTxnLgrSeq\": 30865662\r\n       }\r\n     }, {\r\n       \"DeletedNode\": {\r\n         \"FinalFields\": {\r\n           \"ExchangeRate\": \"590C25623355ACDA\",\r\n           \"Flags\": 0,\r\n           \"RootIndex\": \"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C25623355ACDA\",\r\n           \"TakerGetsCurrency\": \"0000000000000000000000004A50590000000000\",\r\n           \"TakerGetsIssuer\": \"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\r\n           \"TakerPaysCurrency\": \"0000000000000000000000000000000000000000\",\r\n           \"TakerPaysIssuer\": \"0000000000000000000000000000000000000000\"\r\n         },\r\n         \"LedgerEntryType\": \"DirectoryNode\",\r\n         \"LedgerIndex\": \"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C25623355ACDA\"\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Flags\": 0,\r\n           \"IndexPrevious\": \"0000000000000006\",\r\n           \"Owner\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\r\n           \"RootIndex\": \"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"\r\n         },\r\n         \"LedgerEntryType\": \"DirectoryNode\",\r\n         \"LedgerIndex\": \"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"\r\n       }\r\n     }, {\r\n       \"ModifiedNode\": {\r\n         \"FinalFields\": {\r\n           \"Account\": \"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\r\n           \"Balance\": \"3400983765\",\r\n           \"Flags\": 0,\r\n           \"OwnerCount\": 2,\r\n           \"Sequence\": 48\r\n         },\r\n         \"LedgerEntryType\": \"AccountRoot\",\r\n         \"LedgerIndex\": \"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\r\n         \"PreviousFields\": {\r\n           \"Balance\": \"3406983777\",\r\n           \"Sequence\": 47\r\n         },\r\n         \"PreviousTxnID\": \"F2500448CE47E43AF02B4C38BB3C232506B2662DDABBF59D5B5652F9ED17BD30\",\r\n         \"PreviousTxnLgrSeq\": 30865662\r\n       }\r\n     }],\r\n     \"TransactionIndex\": 7,\r\n     \"TransactionResult\": \"tesSUCCESS\"\r\n   },\r\n   \"status\": \"closed\",\r\n   \"transaction\": {\r\n     \"Account\": \"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\r\n     \"Fee\": \"12\",\r\n     \"Flags\": 2148007936,\r\n     \"LastLedgerSequence\": 30865957,\r\n     \"Memos\": [{\r\n       \"Memo\": {\r\n         \"MemoData\": \"726D2D312E322E33\",\r\n         \"MemoType\": \"636C69656E74\"\r\n       }\r\n     }],\r\n     \"Sequence\": 47,\r\n     \"SigningPubKey\": \"03E8BBF8387DCDCE12F8B8F3CAC425D2587548E6510659E27F74E02EC7FE1DAE0E\",\r\n     \"TakerGets\": \"6000000\",\r\n     \"TakerPays\": {\r\n       \"currency\": \"JPY\",\r\n       \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\r\n       \"value\": \"175.2\"\r\n     },\r\n     \"TransactionType\": \"OfferCreate\",\r\n     \"TxnSignature\": \"3044022010F3BB24A47D37FF1F50EC1245DBD345800D03F62FFC1BDCA0F8463CDF8024FA02206E440D5E6A327FA1B126CEF3F2E394DD1DBB7BAFC2B815D061D959C230BAD2F1\",\r\n     \"date\": 552066392,\r\n     \"hash\": \"EEDBE4E68CE7A49F26867949DBD177A4BBDF16CAFFC9519B3BD12FF3B4A2AF63\",\r\n     \"owner_funds\": \"3370983765\"\r\n   },\r\n   \"type\": \"transaction\",\r\n   \"validated\": true\r\n }";
 		testOfferQuality(consumedHalf);
		System.out.println("partially consumed followed by fully consumed");
		testOfferQuality(consumedHalfAndFull1);
		
		testOfferQuality(consumedHalfAndFull1b);
		System.out.println("create order, then fully consumed");
		String consumedFull1 = " {\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"CB63F891823DD0DC7A12484E9D4089997B2E93B7CF6710B733838D6204AA83E2\",\"ledger_index\":30866621,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2565023314\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5473},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2565023326\",\"OwnerCount\":9,\"Sequence\":5472},\"PreviousTxnID\":\"8AFB17B0CAD09062AF74D1CB85D5071A8161DAE7108505212ED1D1C3F0DCE051\",\"PreviousTxnLgrSeq\":30866590}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA3\",\"NewFields\":{\"ExchangeRate\":\"590C2013D5C24EA3\",\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA3\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"BC0A867800F99EB9870427801E3C9D4768CC3FED8794B270B17089867FFC3E3E\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA3\",\"OwnerNode\":\"0000000000000018\",\"Sequence\":5472,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29.3\"},\"TakerPays\":\"1000000\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}}],\"TransactionIndex\":0,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30866623,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5472,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29.3\"},\"TakerPays\":\"1000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100E2F111631AA381BF6592236BB6468B91CF54B5ACC22590808FDA72BD65BAD5810220287D1A94BD5DA205CD0394EEDF7CD92F5D2BFCC858F53876A88BC8BC2D024D87\",\"date\":552068652,\"hash\":\"A7BD5F7FA6AAF8B59B290884C9BF0238788B7EA9417B0670B35FAEE8914416C8\",\"owner_funds\":\"24080.98745590657\"},\"type\":\"transaction\",\"validated\":true}\r\n";
		String consumedFull1b = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"9611A85A48447EDD7A3D5DA4EA7D0822C52B56807B112E2D481EE8F5CD4F440E\",\"ledger_index\":30866590,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24080.98745590657\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24110.34605590657\"}},\"PreviousTxnID\":\"33FB02FFFC5A84B9A7EF85F6ED3197608BB06ADCDE887DCF67B13C21511709AC\",\"PreviousTxnLgrSeq\":30866549}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA3\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000018\",\"PreviousTxnID\":\"6CAC54B520507FFE502D023D8BECA5870B6F109AB1B704C20291CBCADB81EC1A\",\"PreviousTxnLgrSeq\":30866587,\"Sequence\":5471,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"5A2DE4704D2C23D3FCB458809857C6D7EBAA118AC7C1B2C3A63F3BEC22FBBFA9\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29.3\"},\"TakerPays\":\"1000000\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2565023326\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5472},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2564023326\",\"OwnerCount\":10},\"PreviousTxnID\":\"6CAC54B520507FFE502D023D8BECA5870B6F109AB1B704C20291CBCADB81EC1A\",\"PreviousTxnLgrSeq\":30866587}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6130.737355877956\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6101.437355877956\"}},\"PreviousTxnID\":\"33FB02FFFC5A84B9A7EF85F6ED3197608BB06ADCDE887DCF67B13C21511709AC\",\"PreviousTxnLgrSeq\":30866549}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590C2013D5C24EA3\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA3\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA3\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3388983657\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":57},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3389983669\",\"Sequence\":56},\"PreviousTxnID\":\"33FB02FFFC5A84B9A7EF85F6ED3197608BB06ADCDE887DCF67B13C21511709AC\",\"PreviousTxnLgrSeq\":30866549}}],\"TransactionIndex\":7,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Fee\":\"12\",\"Flags\":2148007936,\"LastLedgerSequence\":30866592,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":56,\"SigningPubKey\":\"03E8BBF8387DCDCE12F8B8F3CAC425D2587548E6510659E27F74E02EC7FE1DAE0E\",\"TakerGets\":\"1000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29.3\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100F538A39FA4525BB74816891FAF850A5FBC9B50327389F47D39837C1B64E338630220447086ECBB53C2D9CB4FD06CB6E09C2C58C18CC514055D56AEAFDC7BA2FE4C83\",\"date\":552068550,\"hash\":\"8AFB17B0CAD09062AF74D1CB85D5071A8161DAE7108505212ED1D1C3F0DCE051\",\"owner_funds\":\"3358983657\"},\"type\":\"transaction\",\"validated\":true}\r\n";
		testOfferQuality(consumedFull1);

		testOfferQuality(consumedFull1b);
	}
	
	/* SUMMARY
	 * Sequence increases when we jave Order Created
	 * Any FinalFields with prices zero means order fully consumed. But thw owner is another story.
	 * Payment doesn't have autobridge. 
	 * OC belogning to other don't have autobridge either
	 * hash also appears in executedoffer so we can trace it back to orderbook
	 * if our consuming orders leaves a remainder and is consumed then it is treated like our order is consumed
	 * total consumed doesn't raise sequence
	 * Payments can have multiple same account OEs when it consumes.
	 * OE contains previousTxnId  
	 * It's possible to create new OC with more funds than the account has
	 */ 
	
	/*
	 * - Rate = sum of all principal quantities / sum of all principal's counter quantities. 
	 */
	@Test
	public void consumeRJPJPY() throws Exception{
		String consumeFull = "{\n  \"engine_result\": \"tesSUCCESS\",\n  \"engine_result_code\": 0,\n  \"engine_result_message\": \"The transaction was applied. Only final in a validated ledger.\",\n  \"ledger_hash\": \"43B081E24925128F59E7F5A9ED206BB230806AF4ED7C415BBF9E0A2306EA2CC3\",\n  \"ledger_index\": 30873877,\n  \"meta\": {\n    \"AffectedNodes\": [{\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"24081.73300330657\"\n          },\n          \"Flags\": 1114112,\n          \"HighLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"0000000000000399\",\n          \"LowLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n            \"value\": \"100000\"\n          },\n          \"LowNode\": \"0000000000000001\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"24051.62885590657\"\n          }\n        },\n        \"PreviousTxnID\": \"325DE987EB6EFD3A9C65125A9CE306FD2B854213727C9F64F44C2249232979F3\",\n        \"PreviousTxnLgrSeq\": 30866623\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\n          \"Balance\": \"28303661734\",\n          \"Flags\": 0,\n          \"OwnerCount\": 68,\n          \"Sequence\": 954\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"418E2A54C93ADD8D7EEBE5EDB240C4BBB98A919B8AF67756A2D52D5C461C37B0\",\n        \"PreviousFields\": {\n          \"Balance\": \"28302620068\"\n        },\n        \"PreviousTxnID\": \"40E906009CC8305FFE9E2AC4FE5D9C37EF2A77AF532AB9CA2E2453D1D500920F\",\n        \"PreviousTxnLgrSeq\": 30873876\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n          \"BookDirectory\": \"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B221B2614BA428C\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 131072,\n          \"OwnerNode\": \"0000000000001097\",\n          \"Sequence\": 233142,\n          \"TakerGets\": \"8450966\",\n          \"TakerPays\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0.008112926320000001\"\n          }\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"46DDB3F3D734EE903642DCD16A7E415CE673646DFE02D62AFC854EE38CD9D1FE\",\n        \"PreviousFields\": {\n          \"TakerGets\": \"9492632\",\n          \"TakerPays\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0.009112926320000001\"\n          }\n        },\n        \"PreviousTxnID\": \"1DC0F4C5BD9D1F1C527CC3E2436643161D9B50C3D6122263A40D79608FAC111A\",\n        \"PreviousTxnLgrSeq\": 30873564\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"4.484119891940538\"\n          },\n          \"Flags\": 1114112,\n          \"HighLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"00000000000003FB\",\n          \"LowLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n            \"value\": \"10000\"\n          },\n          \"LowNode\": \"0000000000000006\",\n          \"LowQualityIn\": 1000000000\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"4.485121891940538\"\n          }\n        },\n        \"PreviousTxnID\": \"C128D92BA8C7E83D2C9975199B9408754E0CB230148A26460FFC23686081B612\",\n        \"PreviousTxnLgrSeq\": 30854329\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-61705.85196948187\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\n            \"value\": \"10000000000\"\n          },\n          \"HighNode\": \"0000000000000000\",\n          \"LowLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"00000000000001B7\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"5F894CD5A7BE52AE1A1A74075313B891598C6FA41D820B84E2EE01457EAC5E8E\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-61736.01632517667\"\n          }\n        },\n        \"PreviousTxnID\": \"8E6B1D722CD03E4307BE98159461BCD3375279FD8DF3BEB810FC853AFB75FE7A\",\n        \"PreviousTxnLgrSeq\": 30873851\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n          \"Balance\": \"2566023194\",\n          \"Flags\": 0,\n          \"OwnerCount\": 9,\n          \"Sequence\": 5474\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\n        \"PreviousFields\": {\n          \"Balance\": \"2566023314\",\n          \"Sequence\": 5473\n        },\n        \"PreviousTxnID\": \"325DE987EB6EFD3A9C65125A9CE306FD2B854213727C9F64F44C2249232979F3\",\n        \"PreviousTxnLgrSeq\": 30866623\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n          \"Balance\": \"1687582262539\",\n          \"Flags\": 0,\n          \"OwnerCount\": 2313,\n          \"Sequence\": 233190\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\n        \"PreviousFields\": {\n          \"Balance\": \"1687583304205\"\n        },\n        \"PreviousTxnID\": \"C76226FF30BC2A0DE8036381FCBC0788449056806BB5E7790169E902E9BA5464\",\n        \"PreviousTxnLgrSeq\": 30873792\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\n          \"BookDirectory\": \"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C4B0A5D96EF2B\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 0,\n          \"OwnerNode\": \"0000000000000007\",\n          \"Sequence\": 932,\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"20989.09899948029\"\n          },\n          \"TakerPays\": \"726266402\"\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"8C2F4D46ACB340604F73B65DE862B55950E57C1C5CE4F4E2F6A45B254DF32AEF\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"21019.20314688029\"\n          },\n          \"TakerPays\": \"727308068\"\n        },\n        \"PreviousTxnID\": \"8E6B1D722CD03E4307BE98159461BCD3375279FD8DF3BEB810FC853AFB75FE7A\",\n        \"PreviousTxnLgrSeq\": 30873851\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-287.0282725567708\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n            \"value\": \"10000000000\"\n          },\n          \"HighNode\": \"0000000000000009\",\n          \"HighQualityIn\": 1000000000,\n          \"LowLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"0000000000000012\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-287.0272725567708\"\n          }\n        },\n        \"PreviousTxnID\": \"EF65EBD379511A32D7864710A4464345AF0AE84314A1DFE9A4F64B430E0FE07D\",\n        \"PreviousTxnLgrSeq\": 30873563\n      }\n    }],\n    \"TransactionIndex\": 3,\n    \"TransactionResult\": \"tesSUCCESS\"\n  },\n  \"status\": \"closed\",\n  \"transaction\": {\n    \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n    \"Fee\": \"120\",\n    \"Flags\": 2148007936,\n    \"LastLedgerSequence\": 30873879,\n    \"Memos\": [{\n      \"Memo\": {\n        \"MemoData\": \"726D2D312E322E33\",\n        \"MemoType\": \"636C69656E74\"\n      }\n    }],\n    \"Sequence\": 5473,\n    \"SigningPubKey\": \"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\n    \"TakerGets\": {\n      \"currency\": \"RJP\",\n      \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n      \"value\": \"0.001\"\n    },\n    \"TakerPays\": {\n      \"currency\": \"JPY\",\n      \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n      \"value\": \"30.104\"\n    },\n    \"TransactionType\": \"OfferCreate\",\n    \"TxnSignature\": \"30440220207099A26325DB519294BF9BF8285BD9FFE14CCDB18DF78C6E7A8A84038BB11D0220485AE1080537A13442F44A4404859FB34FAD1E73A838B49933B975FE0E9C6E01\",\n    \"date\": 552093771,\n    \"hash\": \"A66479444652893737E9714589ABE9F7172AAB19AFFE5EDC4B3601F6E2267398\",\n    \"owner_funds\": \"4.484119891940538\"\n  },\n  \"type\": \"transaction\",\n  \"validated\": true\n}";
		System.out.println("Sell RJP consumes and matches 1 ");
		testOfferQuality(consumeFull);
		String consumeHalfFull1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"7937E1CDEA17A5961379466F1661CD7BA6C16BCA15D8F9C8699917C1583FE56C\",\"ledger_index\":30874094,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24075.84631073177\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24382.77467960657\"}},\"PreviousTxnID\":\"516019CFDB1946FCE566D4635C5C44B38AFBAEA63D073D99B57F81B0433DCEDB\",\"PreviousTxnLgrSeq\":30873985}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000001097\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"351426D7CD412846D56C4035C623A1770257CA90120EFD7DB608AA330FC90EFE\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\"Balance\":\"30024735003\",\"Flags\":0,\"OwnerCount\":80,\"Sequence\":972},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"418E2A54C93ADD8D7EEBE5EDB240C4BBB98A919B8AF67756A2D52D5C461C37B0\",\"PreviousFields\":{\"Balance\":\"30035261317\"},\"PreviousTxnID\":\"9AD173CD2F78D113421A488B7016BB8AFE6C27762BA5EDB5D50CA148A092EF77\",\"PreviousTxnLgrSeq\":30874089}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.484099891940538\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.474099891940538\"}},\"PreviousTxnID\":\"516019CFDB1946FCE566D4635C5C44B38AFBAEA63D073D99B57F81B0433DCEDB\",\"PreviousTxnLgrSeq\":30873985}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CCB26DFE5\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000001098\",\"PreviousTxnID\":\"77ACB453725CB0F58AB81D2C6CAC453505902F7F556EF09D58B414E3EEC34AA7\",\"PreviousTxnLgrSeq\":30873986,\"Sequence\":233192,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"51BAD4560D9416F95D5154B3CFC0BB3995DA4511E7DA2F7500992E19161C4C5B\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.00186741667\"},\"TakerPays\":\"1965701\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-44907.92771385582\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"00000000000001B7\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"5F894CD5A7BE52AE1A1A74075313B891598C6FA41D820B84E2EE01457EAC5E8E\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-44601.61197645582\"}},\"PreviousTxnID\":\"3C965853E20BBD852830B308D3D5BC7660A8E8773498C4AD96D2559EE0B6D9BC\",\"PreviousTxnLgrSeq\":30874051}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5E03BD5CBAC3DF66\",\"Flags\":0,\"RootIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CBAC3DF66\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CBAC3DF66\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5E03BD5CCB26DFE5\",\"Flags\":0,\"RootIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CCB26DFE5\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CCB26DFE5\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2566023038\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5478},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2566023050\",\"Sequence\":5477},\"PreviousTxnID\":\"4E9FB4A76215639946DBBE52D086D0DF5B67B0C01994250B5839F6AF2C498898\",\"PreviousTxnLgrSeq\":30874088}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1687582372150\",\"Flags\":0,\"OwnerCount\":2313,\"Sequence\":233193},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1687571845836\",\"OwnerCount\":2315},\"PreviousTxnID\":\"77ACB453725CB0F58AB81D2C6CAC453505902F7F556EF09D58B414E3EEC34AA7\",\"PreviousTxnLgrSeq\":30873986}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CE357AF28\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000001064\",\"Sequence\":231151,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.574668963109999\"},\"TakerPays\":\"604914698\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"C3EE6D21B4F91B51E8ED4D3EF500A3006AB34FB8B4C7485255D2DE97FCC0D81B\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.581811963099999\"},\"TakerPays\":\"612433645\"},\"PreviousTxnID\":\"EF65EBD379511A32D7864710A4464345AF0AE84314A1DFE9A4F64B430E0FE07D\",\"PreviousTxnLgrSeq\":30873563}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A56A12C4BE000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000007\",\"Sequence\":925,\"TakerGets\":\"989473686\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"28793.6842626\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"C4F604D7625B204DE706F82914901B5E06EBD224B1BFF9F45ECCA23625E55EE0\",\"PreviousFields\":{\"TakerGets\":\"1000000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29100\"}},\"PreviousTxnID\":\"FCD8CE052B68BAC14D0FE0F03E54D88AEBBAA9B7E60BB33A25ED6FDB599AC9F2\",\"PreviousTxnLgrSeq\":30873648}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CBAC3DF66\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000001098\",\"PreviousTxnID\":\"345E22DF582096D4B79102413F79A8A50B18F0FF81563C53F03E3E9D5960C710\",\"PreviousTxnLgrSeq\":30873878,\"Sequence\":233190,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"E24363CF617D80C41F4336DC3D70D3673540EA918744042EE06BC270CBA39D2B\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.00098958334\"},\"TakerPays\":\"1041666\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-287.028252556771\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-287.0382725567708\"}},\"PreviousTxnID\":\"516019CFDB1946FCE566D4635C5C44B38AFBAEA63D073D99B57F81B0433DCEDB\",\"PreviousTxnLgrSeq\":30873985}}],\"TransactionIndex\":10,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30874096,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5477,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"306.4\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.01\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"304502210080A4DAB6A3C7316CB7A64BCD6F87ED0BD7B019BDE0AAACD5B2E704D1C2C36C30022039ACFFA117B8EC9CAC6DA36345CCE2CBB1791DF62D5502465D6A3E36A9A59DD4\",\"date\":552094562,\"hash\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"owner_funds\":\"24075.84631073177\"},\"type\":\"transaction\",\"validated\":true}\n";
		System.out.println("Buy RJP one and half orders and consumed");
		System.out.println("2017-06-30, 08:36:02 Made offer to buy 0.01 RJP.MrRipple at price 30,640 JPY.MrRipple\n\n    bought 0.00186741 RJP.MrRipple at price 1,052.63 XRP\n    bought 0.00714299 RJP.MrRipple at price 1,052.63 XRP\n    bought 10.5263 XRP at price 29.1 JPY.MrRipple\n    bought 0.000989583 RJP.MrRipple at price 1,052.63 XRP ");
		testOfferQuality(consumeHalfFull1);
		String consumeHalfRemains1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"A977AE837ADADC05B9A3EE380FCEDC15ED44CFBD25F75B71CD1F72D51CABB205\",\"ledger_index\":30874153,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A4D88DDD94000\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A4D88DDD94000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A4D88DDD94000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"21170.04631073177\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24075.84631073177\"}},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rfjMiGNaJokVhb6mbvm6Y3ctsFYC8iEoKy\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A4D88DDD94000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"F1CB3F9E4B60161B0CAB23A42E608813B171834A857F519FA83AF83E28247C05\",\"PreviousTxnLgrSeq\":30874118,\"Sequence\":908,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"338EB27563C2BB7EA7691F319291AA85FE619D54A3EBC2D6850BAFFA54C3AC20\",\"PreviousFields\":{\"TakerGets\":\"100000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2900\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.579099891940538\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.484099891940538\"}},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2566023026\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5479},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2566023038\",\"OwnerCount\":9,\"Sequence\":5478},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500BA34FFA9C6CC9\",\"NewFields\":{\"ExchangeRate\":\"500BA34FFA9C6CC9\",\"RootIndex\":\"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500BA34FFA9C6CC9\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"000000000000000000000000524A500000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1687682372114\",\"Flags\":0,\"OwnerCount\":2316,\"Sequence\":233196},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1687582372114\"},\"PreviousTxnID\":\"FB3CFEA025850C83A838DB816D8D9AFA30E130F12338077C10BBFC424B127E07\",\"PreviousTxnLgrSeq\":30874096}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rfjMiGNaJokVhb6mbvm6Y3ctsFYC8iEoKy\",\"Balance\":\"15077834634\",\"Flags\":0,\"OwnerCount\":8,\"Sequence\":909},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"956ABE5E4595BE30025E1B088371C1028639FD7675AF66D23E089E1AA8C91661\",\"PreviousFields\":{\"Balance\":\"15177834634\",\"OwnerCount\":9},\"PreviousTxnID\":\"F1CB3F9E4B60161B0CAB23A42E608813B171834A857F519FA83AF83E28247C05\",\"PreviousTxnLgrSeq\":30874118}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rfjMiGNaJokVhb6mbvm6Y3ctsFYC8iEoKy\",\"RootIndex\":\"9821098F350622C02F8910ACA33827299AAC9458638C6721EE8402B08FDD1F0B\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"9821098F350622C02F8910ACA33827299AAC9458638C6721EE8402B08FDD1F0B\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CE357AF28\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000001064\",\"Sequence\":231151,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.479668963109999\"},\"TakerPays\":\"504914698\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"C3EE6D21B4F91B51E8ED4D3EF500A3006AB34FB8B4C7485255D2DE97FCC0D81B\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.574668963109999\"},\"TakerPays\":\"604914698\"},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"174654.287019404\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001E5\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rfjMiGNaJokVhb6mbvm6Y3ctsFYC8iEoKy\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"CCD2429E411D868A19057BBCC07497CBD83713C9A5107F612B4E89F8B612D1C5\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"171754.287019404\"}},\"PreviousTxnID\":\"FC173BB4BDA3FB7DD2858DE74BC7B794DD3E45FB453B82BB24560D6D6C10A72D\",\"PreviousTxnLgrSeq\":30798307}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-286.933062556771\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-287.028252556771\"}},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"FD2FC9B7D0E7CCB4770A68EA6D8B09417F9CA866AA23940B3D8EC4140FAC6A13\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500BA34FFA9C6CC9\",\"OwnerNode\":\"0000000000000018\",\"Sequence\":5478,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"152.635\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.005\"}}}}],\"TransactionIndex\":7,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30874155,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5478,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3052.7\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100D7B93B341949A48BC822A6EBA289021B7D03FE1F08C4899D640478E77CCB1A830220712A9C8B34D9A41A1B561930A04215673E61051D5D5432ACF9E46B88C1180AF5\",\"date\":552094780,\"hash\":\"0F7BEB8DFA7D37003BB80C40DF59DB535C57C1348E158E5F6F1C3BA86A27B56C\",\"owner_funds\":\"21170.04631073177\"},\"type\":\"transaction\",\"validated\":true}\n";
		System.out.println("Buy RJP one order, order remains");
		System.out.println("2017-06-30, 08:39:40 Made offer to buy 0.1 RJP.MrRipple at price 30,527 JPY.MrRipple\n\n    bought 100 XRP at price 29 JPY.MrRipple\n    bought 0.095 RJP.MrRipple at price 1,052.63 XRP\n    placed new order buying 0.005 RJP.MrRipple at price 30,527 JPY.MrRipple ");
		testOfferQuality(consumeHalfRemains1);
		System.out.println("Buy RJP 1, matched");
		String consumeFull2  = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"DD1B7089D06D559B39BBE3CA6E56F1CFF376E9BA5056102FBEF3F60EAA54F781\",\"ledger_index\":30757518,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"9307.377018112995\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"9634.383872184555\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03B363EB77AB2F\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000D35\",\"Sequence\":196197,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.06732305815689637\"},\"TakerPays\":\"70128187\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"49DDE07C77FB964A480CBAD36770DA50A3F9AF8B2992AC0767B0952BF0685750\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.07732305815689637\"},\"TakerPays\":\"80544853\"},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.916021472777412\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.906021472777412\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"6061125241\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":4747},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"6061125253\",\"Sequence\":4746},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1837100320562\",\"Flags\":0,\"OwnerCount\":1121,\"Sequence\":196737},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1837089903896\"},\"PreviousTxnID\":\"26ACBFBCBC70FF0915451A26CFE09BF10922661A759C9DAB606EC585803DDA92\",\"PreviousTxnLgrSeq\":30757489}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rnTJ9WASC95tgeNvap7sK4u2kUEj7iadTU\",\"Balance\":\"53552286\",\"Flags\":0,\"OwnerCount\":3,\"Sequence\":634},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"AEF1A89CEFB737F133254E26EC0435B0E133814E508467C05393ECB2CDD2423A\",\"PreviousFields\":{\"Balance\":\"63968952\"},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rnTJ9WASC95tgeNvap7sK4u2kUEj7iadTU\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500B21726814D000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":632,\"TakerGets\":\"13166668\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"412.51170844\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"D649167F2B0B0B3E469B23C702D69F7BE2E9CEAC1FB2B8CBA40DCB8B926D50B2\",\"PreviousFields\":{\"TakerGets\":\"23583334\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"738.86585422\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"51133.74415640994\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"000000000000027C\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rnTJ9WASC95tgeNvap7sK4u2kUEj7iadTU\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"EEFF7601F17BEB95A3A513AEC7969500CD48BB67ABA77F4C3ADBD3E3BD9E0ED3\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"50807.39001062994\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-258.2016097014542\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-258.2116297014542\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}}],\"TransactionIndex\":5,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30757521,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":4746,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"326.36\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.01\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"304502210099031DED458A3C99332CB701A8721F9A8A20978FE1570E4E7FEDAEAB5E15AD3302202F2D2176AEECEC72284930743929A63439AA905F0A4351DEE8ED3A940B768787\",\"date\":551685611,\"hash\":\"3167356610724D6C3C2EA09B6C5A62E157C17B6D3CD6EC06819CCF1DCDD735C0\",\"owner_funds\":\"9307.377018112995\"},\"type\":\"transaction\",\"validated\":true}\n";
		testOfferQuality(consumeFull2);

	}
	
	@Test
	public void consumedRJPJPY() throws Exception{
		String consumedPartial1a = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"C3E3FE21C4FBBFAF69961DE9958CC25063FF21EB3E6232354DF82B7F807112D3\",\"ledger_index\":30875162,\"meta\":{\"AffectedNodes\":[{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"24B0923F23E533C351E937487022DFA1641992E699A2FA0026787E7242B9F4C8\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590A9F639FE0E000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000018\",\"Sequence\":5480,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2990\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2566023002\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5481},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2566023014\",\"OwnerCount\":9,\"Sequence\":5480},\"PreviousTxnID\":\"7D966D76A537E016FE6BE46649A50435F7A6A283631E39DA98A1D955432CBA73\",\"PreviousTxnLgrSeq\":30875024}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590A9F639FE0E000\",\"NewFields\":{\"ExchangeRate\":\"590A9F639FE0E000\",\"RootIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590A9F639FE0E000\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}}],\"TransactionIndex\":11,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2148007936,\"LastLedgerSequence\":30875164,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5480,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2990\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100E37BF4304573B938D523D8925B911DC893D1C8B1AF80E0AF077FC7B2CDA1B4F302202D7F75C036636448A8A9FDBFD8035AF4F9A769F0F66EB5FA5AA8F320FE624D08\",\"date\":552098350,\"hash\":\"C9EA9CF02B7B595E753D8BE76C686D796B08A5CA67D6EB7CBFE8AED0D8D3DDD4\",\"owner_funds\":\"4.579099891940538\"},\"type\":\"transaction\",\"validated\":true}\n";
		String consumedPartial1b = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"E513F3FE42B29B71EC3C86E408036A975B0720B3BFD46DB1D76C19A910C08D91\",\"ledger_index\":30875168,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"22366.04631073177\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"21170.04631073177\"}},\"PreviousTxnID\":\"0F7BEB8DFA7D37003BB80C40DF59DB535C57C1348E158E5F6F1C3BA86A27B56C\",\"PreviousTxnLgrSeq\":30874153}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590A9F639FE0E000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000018\",\"Sequence\":5480,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.06\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"1794\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"24B0923F23E533C351E937487022DFA1641992E699A2FA0026787E7242B9F4C8\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2990\"}},\"PreviousTxnID\":\"C9EA9CF02B7B595E753D8BE76C686D796B08A5CA67D6EB7CBFE8AED0D8D3DDD4\",\"PreviousTxnLgrSeq\":30875162}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.539019891940538\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.579099891940538\"}},\"PreviousTxnID\":\"0F7BEB8DFA7D37003BB80C40DF59DB535C57C1348E158E5F6F1C3BA86A27B56C\",\"PreviousTxnLgrSeq\":30874153}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4961.645355877956\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6160.037355877956\"}},\"PreviousTxnID\":\"325DE987EB6EFD3A9C65125A9CE306FD2B854213727C9F64F44C2249232979F3\",\"PreviousTxnLgrSeq\":30866623}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3387983609\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":61},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3387983621\",\"Sequence\":60},\"PreviousTxnID\":\"066934AEF061F6E04D537A532192A1F356FB5BA69B3F9E2B3CFFF75A865D4BB0\",\"PreviousTxnLgrSeq\":30875158}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"0.09\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000434\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10\"},\"LowNode\":\"0000000000000000\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"EC0BFF5270FB0DA0779D8DEA1836B8B7782BA129F3BC5FE7222F217608B96AE4\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"0.05\"}},\"PreviousTxnID\":\"5119074CF81B535F92AF56E2202343A5C2896668BFA616D611A303F8E19DEB9E\",\"PreviousTxnLgrSeq\":30757891}}],\"TransactionIndex\":20,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30875170,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":60,\"SigningPubKey\":\"03E8BBF8387DCDCE12F8B8F3CAC425D2587548E6510659E27F74E02EC7FE1DAE0E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"1196\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.04\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"304502210094CCA254F6E220F2D0CD662326EAE11E44F210BABD7DA08B3BE7C9C48D5C2E5902207E7C0A237AC4F643A801BC31AD9B173F2CAAEFA886354B7B9465183DE43553BC\",\"date\":552098370,\"hash\":\"1C209F181A1A390448C597E0835C4AC6D7CF99084D898C965722770092E2FBB5\",\"owner_funds\":\"4961.645355877956\"},\"type\":\"transaction\",\"validated\":true}\n";
		System.out.println("Sell RJP order consumed partial 1");
		testOfferQuality(consumedPartial1a);
		testOfferQuality(consumedPartial1b);
		System.out.println("order consumed with payment");
		String consumedFullWithPayment1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"7E85B7AD37E1612891FFA1B5AB706872F19F0E00065FE4D7747BC5D55FF5BDDC\",\"ledger_index\":30769012,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"13673.94111715842\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"10417.94111715843\"}},\"PreviousTxnID\":\"B7ACEC821945F5C9C4B971B3EF21FD41AD7A899B9B917387258F7DB3C67CB35A\",\"PreviousTxnLgrSeq\":30768544}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"187938.7534543557\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000431\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rhEJyL3cTmBc46PDcUac6AqvQJ9TQLUpDW\",\"value\":\"0\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"246DDE0148F3DE979FE3DE63B5BAAE7FBB446D9DCC695E0473D8CE1A5BB6B22F\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"191170.6653543557\"}},\"PreviousTxnID\":\"B7ACEC821945F5C9C4B971B3EF21FD41AD7A899B9B917387258F7DB3C67CB35A\",\"PreviousTxnLgrSeq\":30768544}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rhEJyL3cTmBc46PDcUac6AqvQJ9TQLUpDW\",\"Balance\":\"10497454818\",\"Flags\":0,\"OwnerCount\":11,\"Sequence\":6660},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"440F615CCCAD4600753E0E01F1BD4BCCF725E49F61B530D0D7141EBB1EAD59A8\",\"PreviousFields\":{\"Balance\":\"10391836816\"},\"PreviousTxnID\":\"B7ACEC821945F5C9C4B971B3EF21FD41AD7A899B9B917387258F7DB3C67CB35A\",\"PreviousTxnLgrSeq\":30768544}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"r9PnngLgYcCWnrw1cCWm45YFEGc1UjNfMf\",\"Balance\":\"410542249197\",\"Flags\":0,\"OwnerCount\":4,\"Sequence\":25},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"47DD444DCB184EE7C017CFBFCBACEF462B03D9E59F9E0F626A76997BF0160263\",\"PreviousFields\":{\"Balance\":\"411621487002\",\"Sequence\":24},\"PreviousTxnID\":\"EB91E9EFE108242C7B8C2A71DFBF44ECFD07D8EF827256ABCA01761CBB6321F6\",\"PreviousTxnLgrSeq\":30768974}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.775521472777415\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.875521472777414\"}},\"PreviousTxnID\":\"B7ACEC821945F5C9C4B971B3EF21FD41AD7A899B9B917387258F7DB3C67CB35A\",\"PreviousTxnLgrSeq\":30768544}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F387E3344C\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000CDC\",\"PreviousTxnID\":\"F74753ABE6A1115287803143C27CC320D0604D553981FD19827B6ACDD25D87BC\",\"PreviousTxnLgrSeq\":30768126,\"Sequence\":192736,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"4C2D8782229049FA37E92F7D341B14D9F842616F50EA9ECC2E5B5522D98A38FA\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.5697144792549085\"},\"TakerPays\":\"612596215\"}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5E03D1F38716BAC6\",\"Flags\":0,\"RootIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F38716BAC6\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F38716BAC6\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5E03D1F387DA5439\",\"Flags\":0,\"RootIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F387DA5439\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F387DA5439\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5E03D1F387E3344C\",\"Flags\":0,\"RootIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F387E3344C\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F387E3344C\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5E03DC94C8E01C84\",\"Flags\":0,\"RootIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03DC94C8E01C84\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03DC94C8E01C84\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"6061125013\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":4766},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"OwnerCount\":10},\"PreviousTxnID\":\"A4069C4554C8BDB5F7E104EE187FB707FF225D70F7423821F257AF818804784E\",\"PreviousTxnLgrSeq\":30768597}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F38716BAC6\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000D6D\",\"PreviousTxnID\":\"41333BDDB6D1D9C897DA55F09151AE8E5AA50BF744542A7E5DAAB47CEDF942AF\",\"PreviousTxnLgrSeq\":30768545,\"Sequence\":198375,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"7AE30810079D796C8066BA1A9ABD4FCD60DCB02D8A295FC099EA2E840F83CC19\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.0525506494749084\"},\"TakerPays\":\"56506074\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rhEJyL3cTmBc46PDcUac6AqvQJ9TQLUpDW\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590B9C34353A24DE\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000000\",\"Sequence\":6652,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"183251.0696585842\"},\"TakerPays\":\"5988595091\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"7B20F8843A06CF04AE46646DF018A7A290B40A2567A0B0068C9E9EF5EEAF09EB\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"186482.9815585842\"},\"TakerPays\":\"6094213093\"},\"PreviousTxnID\":\"B7ACEC821945F5C9C4B971B3EF21FD41AD7A899B9B917387258F7DB3C67CB35A\",\"PreviousTxnLgrSeq\":30768544}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"r4bZ9qz12XFzoYt2c47ya92QaUHFDK8tHv\",\"RootIndex\":\"7CBEC83EB5FEDEC12905B174DDCF60DDBFC4009205FF89726DFFCB3138F92A8F\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7CBEC83EB5FEDEC12905B174DDCF60DDBFC4009205FF89726DFFCB3138F92A8F\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1859507928539\",\"Flags\":0,\"OwnerCount\":1325,\"Sequence\":198376},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1858535308748\",\"OwnerCount\":1329},\"PreviousTxnID\":\"41333BDDB6D1D9C897DA55F09151AE8E5AA50BF744542A7E5DAAB47CEDF942AF\",\"PreviousTxnLgrSeq\":30768545}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"1\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000435\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"r9PnngLgYcCWnrw1cCWm45YFEGc1UjNfMf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"8548D139D89AC0F7D76D7D33E882230076804611527D20D9EC6701E138FFB0D0\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"0\"}},\"PreviousTxnID\":\"EB91E9EFE108242C7B8C2A71DFBF44ECFD07D8EF827256ABCA01761CBB6321F6\",\"PreviousTxnLgrSeq\":30768974}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"r4bZ9qz12XFzoYt2c47ya92QaUHFDK8tHv\",\"Balance\":\"71959747\",\"Flags\":0,\"OwnerCount\":3,\"Sequence\":10567},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"8DB9B270AA6A32E1F6C5F259020FB27F118D01CFDD04493FC2EB7F522EEB8D88\",\"PreviousFields\":{\"Balance\":\"70959747\",\"OwnerCount\":4},\"PreviousTxnID\":\"CF51868FD6305AAD36E68CE593CAFE33F885CD03A4D14883E932CEC919FCD3CE\",\"PreviousTxnLgrSeq\":30768565}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"91565E4F1A8282718C8D6ED8EFEE2B5DC18101FC76D0AE436F46194F4567EF5E\"}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B915093638000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"000000000000000F\",\"PreviousTxnID\":\"A4069C4554C8BDB5F7E104EE187FB707FF225D70F7423821F257AF818804784E\",\"PreviousTxnLgrSeq\":30768597,\"Sequence\":4765,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"9E71759EC723D1CC84D308EA631724960850BC5B88A6E67B58B84904875D2769\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3256\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000D6C\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A2906E22A1E26367A8C1DB8333442301A9951058C1047B70303F1135725B4CDD\"}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"r4bZ9qz12XFzoYt2c47ya92QaUHFDK8tHv\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590B9C31F8479E4E\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"CF51868FD6305AAD36E68CE593CAFE33F885CD03A4D14883E932CEC919FCD3CE\",\"PreviousTxnLgrSeq\":30768565,\"Sequence\":10566,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"A30888D5FE617C356BF2B99068C6091705D5DFED566718624F000D1794FB44A7\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"30.6001\"},\"TakerPays\":\"1000000\"}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590B9C31F8479E4E\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590B9C31F8479E4E\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590B9C31F8479E4E\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-74.4386129923972\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"r4bZ9qz12XFzoYt2c47ya92QaUHFDK8tHv\",\"value\":\"0\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"000000000000042B\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"AC0CFF73CAAF4FDCBEAF51A839D80BF9B165C64908D90C1CD0E716F7A2BA933F\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-105.0387129923972\"}},\"PreviousTxnID\":\"A43B36F2D57E3B7F01AAF4CFA6D4EF110F6CDCAC84BF2E008DBF74A6E727A171\",\"PreviousTxnLgrSeq\":30762757}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03DC94C96EE9C3\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000CDC\",\"Sequence\":192735,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.4750506494749079\"},\"TakerPays\":\"516359402\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"D783340F476F6C7F5A75EBC1835EA83FD5C08195B095180CD161F56FF925DAA8\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.62115546278134\"},\"TakerPays\":\"675168982\"},\"PreviousTxnID\":\"BD8369327C2D66D8928F42503FE2E46EA783339AE256D3A778A8B4CA204D71DF\",\"PreviousTxnLgrSeq\":30736397}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03DC94C8E01C84\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000CDC\",\"PreviousTxnID\":\"35CD9DECD2DDD83B846F72D539111861B5D791C8020722654109E7CE387CC201\",\"PreviousTxnLgrSeq\":30736388,\"Sequence\":192731,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"D8F7678D4EFF802A4903660BD6694616F462F4008C064C80CDD139BD3E059A7D\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.08724453721866\"},\"TakerPays\":\"94831018\"}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590B915093638000\",\"Flags\":0,\"RootIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B915093638000\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B915093638000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000000CDF\",\"IndexPrevious\":\"0000000000000CD8\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"F737A707D300580688FF5506F850FD0F01D4A8B3AD91CADD8D2B91F80EA064C3\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-256.2869970283235\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-257.1889970283233\"}},\"PreviousTxnID\":\"B7ACEC821945F5C9C4B971B3EF21FD41AD7A899B9B917387258F7DB3C67CB35A\",\"PreviousTxnLgrSeq\":30768544}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03D1F387DA5439\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000D6D\",\"PreviousTxnID\":\"E2F37E0E55C30CB51FDFD752249BA66BB435FD91FF9205A975B5040D8B61C8D3\",\"PreviousTxnLgrSeq\":30768545,\"Sequence\":198374,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"FF454281171F4DE014C95407A43D08EFC24E038A3565D98DA134106264F6909C\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.0463855207450916\"},\"TakerPays\":\"49876904\"}}}],\"TransactionIndex\":0,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"r9PnngLgYcCWnrw1cCWm45YFEGc1UjNfMf\",\"Amount\":{\"currency\":\"RJP\",\"issuer\":\"r9PnngLgYcCWnrw1cCWm45YFEGc1UjNfMf\",\"value\":\"1\"},\"Destination\":\"r9PnngLgYcCWnrw1cCWm45YFEGc1UjNfMf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30769014,\"Paths\":[[{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"}],[{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"}],[{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"}],[{\"currency\":\"BTC\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"}]],\"SendMax\":\"1090030170\",\"Sequence\":24,\"SigningPubKey\":\"0353386154545A2FD1922A233732963760ED9A7B913744A1534F39BA7266671888\",\"TransactionType\":\"Payment\",\"TxnSignature\":\"30450221009C3E3E2E7D77183006D50892ADD98F67FC4645A96BFAA30684887655DFFE4E8502206CEBABED958A79CCD4CD2C414623477C3B62373955B635465BF4EE747778D6E2\",\"date\":551724412,\"hash\":\"02582B070236CE26AE6C7F0FD8473C0882C754F57B768E72317AA528C607A954\"},\"type\":\"transaction\",\"validated\":true}\n";
		testOfferQuality(consumedFullWithPayment1);
		System.out.println("order consumed with payment2");
		String consumedFullWithPayment2 = "{\n  \"engine_result\": \"tesSUCCESS\",\n  \"engine_result_code\": 0,\n  \"engine_result_message\": \"The transaction was applied. Only final in a validated ledger.\",\n  \"ledger_hash\": \"6BB248EFC58F8320C7C0565B58FA80170EC3131D13773256C30CFE3F269E3BFB\",\n  \"ledger_index\": 30753477,\n  \"meta\": {\n    \"AffectedNodes\": [{\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"6904.963616032777\"\n          },\n          \"Flags\": 1114112,\n          \"HighLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"0000000000000399\",\n          \"LowLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n            \"value\": \"100000\"\n          },\n          \"LowNode\": \"0000000000000001\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"7234.963616032777\"\n          }\n        },\n        \"PreviousTxnID\": \"7E8FD5686DBCB9B14E0EE82833965D7219177678375AC39CCFB59C9EB81F75C1\",\n        \"PreviousTxnLgrSeq\": 30753423\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"4.996421472710849\"\n          },\n          \"Flags\": 1114112,\n          \"HighLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"00000000000003FB\",\n          \"LowLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n            \"value\": \"10000\"\n          },\n          \"LowNode\": \"0000000000000006\",\n          \"LowQualityIn\": 1000000000\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"4.986421472710849\"\n          }\n        },\n        \"PreviousTxnID\": \"7E8FD5686DBCB9B14E0EE82833965D7219177678375AC39CCFB59C9EB81F75C1\",\n        \"PreviousTxnLgrSeq\": 30753423\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rUZwBRmxtK9PwoJqAsgJg5P5was3Bd7wjA\",\n          \"BookDirectory\": \"FAE6F85BC792DE5D6E89D97862792CE1D01F47A3DD18F0E25A112FCCC4F307BE\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 131072,\n          \"OwnerNode\": \"0000000000000000\",\n          \"Sequence\": 16729,\n          \"TakerGets\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"3589.476852558163\"\n          },\n          \"TakerPays\": \"1736456495\"\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"656440C01AAED135F2215DBC76663B25B928EA28A51D5E6D99944C619072F719\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"3633.83631249\"\n          },\n          \"TakerPays\": \"1757915966\"\n        },\n        \"PreviousTxnID\": \"8787EC58C51B747D7499C0306A5DF507D9D55BE3A41BDE7FFB2AE65DBDB45B42\",\n        \"PreviousTxnLgrSeq\": 30753474\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n          \"BookDirectory\": \"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03B363EB84D6C4\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 0,\n          \"OwnerNode\": \"0000000000000D21\",\n          \"Sequence\": 195449,\n          \"TakerGets\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0.0798954096606972\"\n          },\n          \"TakerPays\": \"83224385\"\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"71F15114DE3069161784310693089E9102EAA00EF3E6651582E83642EE07E097\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0.0899154096606972\"\n          },\n          \"TakerPays\": \"93661885\"\n        },\n        \"PreviousTxnID\": \"7E8FD5686DBCB9B14E0EE82833965D7219177678375AC39CCFB59C9EB81F75C1\",\n        \"PreviousTxnLgrSeq\": 30753423\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n          \"Balance\": \"6059125361\",\n          \"Flags\": 0,\n          \"OwnerCount\": 9,\n          \"Sequence\": 4737\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\n        \"PreviousFields\": {\n          \"OwnerCount\": 10\n        },\n        \"PreviousTxnID\": \"2171019C7DC87F2BCC0461B26FF03736FDFBF42335E87E6DA2520F35C83FA665\",\n        \"PreviousTxnLgrSeq\": 30753452\n      }\n    }, {\n      \"DeletedNode\": {\n        \"FinalFields\": {\n          \"ExchangeRate\": \"500AC40B67AED936\",\n          \"Flags\": 0,\n          \"RootIndex\": \"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500AC40B67AED936\",\n          \"TakerGetsCurrency\": \"0000000000000000000000004A50590000000000\",\n          \"TakerGetsIssuer\": \"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\n          \"TakerPaysCurrency\": \"000000000000000000000000524A500000000000\",\n          \"TakerPaysIssuer\": \"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"\n        },\n        \"LedgerEntryType\": \"DirectoryNode\",\n        \"LedgerIndex\": \"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500AC40B67AED936\"\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n          \"Balance\": \"1849344221245\",\n          \"Flags\": 0,\n          \"OwnerCount\": 1058,\n          \"Sequence\": 196172\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\n        \"PreviousFields\": {\n          \"Balance\": \"1849333783745\"\n        },\n        \"PreviousTxnID\": \"A09D332756D392B7F212A9A4D6BEB3FA294851A0E4D3126DEA4D69F86DBF1468\",\n        \"PreviousTxnLgrSeq\": 30753457\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-2757.587450993835\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\n            \"value\": \"5000\"\n          },\n          \"HighNode\": \"0000000000000000\",\n          \"LowLimit\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"0000000000000366\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"8E3B8339C5779F7A295DCC3C962726E53398AEFE067A28B4FB8E211164EC3A33\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-2713.227991061998\"\n          }\n        },\n        \"PreviousTxnID\": \"2C6AD9A43FC755BCF11258F1D9E2DDAC9BB9829FB7E3187A54492D5F2AE1CAA0\",\n        \"PreviousTxnLgrSeq\": 30753381\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Flags\": 0,\n          \"IndexPrevious\": \"0000000000000006\",\n          \"Owner\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n          \"RootIndex\": \"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"\n        },\n        \"LedgerEntryType\": \"DirectoryNode\",\n        \"LedgerIndex\": \"91565E4F1A8282718C8D6ED8EFEE2B5DC18101FC76D0AE436F46194F4567EF5E\"\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rUZwBRmxtK9PwoJqAsgJg5P5was3Bd7wjA\",\n          \"Balance\": \"557765244\",\n          \"Flags\": 0,\n          \"OwnerCount\": 3,\n          \"Sequence\": 16730\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"97B248F775073AB28ECB321D35C6CE0741EDB2CD70A0A4A321ED81E8C5395974\",\n        \"PreviousFields\": {\n          \"Balance\": \"536305773\"\n        },\n        \"PreviousTxnID\": \"8787EC58C51B747D7499C0306A5DF507D9D55BE3A41BDE7FFB2AE65DBDB45B42\",\n        \"PreviousTxnLgrSeq\": 30753474\n      }\n    }, {\n      \"DeletedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n          \"BookDirectory\": \"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500AC40B67AED936\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 0,\n          \"OwnerNode\": \"000000000000000F\",\n          \"PreviousTxnID\": \"2171019C7DC87F2BCC0461B26FF03736FDFBF42335E87E6DA2520F35C83FA665\",\n          \"PreviousTxnLgrSeq\": 30753452,\n          \"Sequence\": 4736,\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"TakerPays\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          }\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"A775A9087DE2AE63A3F3EA41D620503557A77E1B47B0F1EB4D60A07A94632F87\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"330\"\n          },\n          \"TakerPays\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0.01\"\n          }\n        }\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-3589.477852558515\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rUZwBRmxtK9PwoJqAsgJg5P5was3Bd7wjA\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"0000000000000000\",\n          \"LowLimit\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"000000000000038E\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"ACA17C12D66798166A56BEF15054403BC0022AD4C4A0FE2E1C323A0A3557BA2B\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-3633.837312490352\"\n          }\n        },\n        \"PreviousTxnID\": \"7B37FC9C32AD27ACA5425CF910B449885643A3D7CE2E71226F469DEA820F5134\",\n        \"PreviousTxnLgrSeq\": 30753473\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\n          \"BookDirectory\": \"3F3354021DCB7873717F76060221129B5C2751D6A5C288B3531773ACB72A1BC0\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 65536,\n          \"OwnerNode\": \"0000000000014758\",\n          \"Sequence\": 2881273,\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"16718.54030263\"\n          },\n          \"TakerPays\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"1103.609253978163\"\n          }\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"AEE6B9BC08A644347743BCDF39D1B3A9E3B297E69AAC082C8CB1F2488B1F6B0B\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"17390.54030263\"\n          },\n          \"TakerPays\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"1147.96871391\"\n          }\n        },\n        \"PreviousTxnID\": \"312345F33603FFB84C88DE236705477F0FE6EC716B0A844808BFD119740E8E96\",\n        \"PreviousTxnLgrSeq\": 30753461\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"60113.59208981219\"\n          },\n          \"Flags\": 1114112,\n          \"HighLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"000000000000020D\",\n          \"LowLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n            \"value\": \"10000000000\"\n          },\n          \"LowNode\": \"0000000000000000\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"D321553C5DB379D18CB753AC923B665D71A1E1AAEF75CE1147D939633BA28B6F\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"59113.5920898122\"\n          }\n        },\n        \"PreviousTxnID\": \"9F6ABF53ECB794994E5B2D5616F2A5738F2A4EDC820AF354F92C8A69B576C19E\",\n        \"PreviousTxnLgrSeq\": 30688781\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n          \"Balance\": \"3998096580\",\n          \"Flags\": 0,\n          \"OwnerCount\": 3,\n          \"Sequence\": 31\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"DDD46D83AF631B76FF31E1E6233BA46AE7193FD67F2AC226C64E7DCD0FA7A029\",\n        \"PreviousFields\": {\n          \"Balance\": \"4029993563\",\n          \"Sequence\": 30\n        },\n        \"PreviousTxnID\": \"4A6AF968725166D76D052449B56DB3B4716EF3B4F74D9765FA5D557DF4CA54E3\",\n        \"PreviousTxnLgrSeq\": 30753087\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-224236.9917584584\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\n            \"value\": \"450000\"\n          },\n          \"HighNode\": \"0000000000000001\",\n          \"LowLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"00000000000002A9\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"E78936A42475EE0086C2AF9FB1417D8076390AFF0DEAD33E747F155ABD8851EA\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-224908.9917584584\"\n          }\n        },\n        \"PreviousTxnID\": \"D812BB08C9CEA04CC444B3350D844D7291B03A00D1F8A5C593CDDAED01E477ED\",\n        \"PreviousTxnLgrSeq\": 30753249\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-258.1224488831166\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n            \"value\": \"10000000000\"\n          },\n          \"HighNode\": \"0000000000000009\",\n          \"LowLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"0000000000000012\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-258.1324688831166\"\n          }\n        },\n        \"PreviousTxnID\": \"7E8FD5686DBCB9B14E0EE82833965D7219177678375AC39CCFB59C9EB81F75C1\",\n        \"PreviousTxnLgrSeq\": 30753423\n      }\n    }],\n    \"TransactionIndex\": 0,\n    \"TransactionResult\": \"tesSUCCESS\"\n  },\n  \"status\": \"closed\",\n  \"transaction\": {\n    \"Account\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n    \"Amount\": {\n      \"currency\": \"JPY\",\n      \"issuer\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n      \"value\": \"1000\"\n    },\n    \"Destination\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n    \"Fee\": \"12\",\n    \"Flags\": 2147483648,\n    \"LastLedgerSequence\": 30753479,\n    \"Paths\": [\n      [{\n        \"currency\": \"RJP\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"currency\": \"JPY\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 1,\n        \"type_hex\": \"0000000000000001\"\n      }],\n      [{\n        \"currency\": \"CNY\",\n        \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"currency\": \"JPY\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 1,\n        \"type_hex\": \"0000000000000001\"\n      }],\n      [{\n        \"currency\": \"CNY\",\n        \"issuer\": \"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"currency\": \"JPY\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 1,\n        \"type_hex\": \"0000000000000001\"\n      }],\n      [{\n        \"currency\": \"JPY\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 1,\n        \"type_hex\": \"0000000000000001\"\n      }]\n    ],\n    \"SendMax\": \"32259304\",\n    \"Sequence\": 30,\n    \"SigningPubKey\": \"02EBE7621265FF3F0960BBB8AF0488145F1104E289BA838925CD9260D2364241C4\",\n    \"TransactionType\": \"Payment\",\n    \"TxnSignature\": \"3044022018ED086B143C2B5E4E944B4AFC310ADA62D5CDCD53D6E768E46BF316DEEAE06602204D6F3FB9E99B1D62FE940F39E6B970474A58A4B0C4D7FF7293F981CEBA03A9D1\",\n    \"date\": 551672000,\n    \"hash\": \"4CE0839CE8208F81C23B3948B348FE66BDC1B400E61CB31564657CAD38DF1134\"\n  },\n  \"type\": \"transaction\",\n  \"validated\": true\n}";
		testOfferQuality(consumedFullWithPayment2);
		String consumedFullWithPayment3 = "{\n  \"engine_result\": \"tesSUCCESS\",\n  \"engine_result_code\": 0,\n  \"engine_result_message\": \"The transaction was applied. Only final in a validated ledger.\",\n  \"ledger_hash\": \"6BB248EFC58F8320C7C0565B58FA80170EC3131D13773256C30CFE3F269E3BFB\",\n  \"ledger_index\": 30753477,\n  \"meta\": {\n    \"AffectedNodes\": [{\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"6904.963616032777\"\n          },\n          \"Flags\": 1114112,\n          \"HighLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"0000000000000399\",\n          \"LowLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n            \"value\": \"100000\"\n          },\n          \"LowNode\": \"0000000000000001\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"7234.963616032777\"\n          }\n        },\n        \"PreviousTxnID\": \"7E8FD5686DBCB9B14E0EE82833965D7219177678375AC39CCFB59C9EB81F75C1\",\n        \"PreviousTxnLgrSeq\": 30753423\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"4.996421472710849\"\n          },\n          \"Flags\": 1114112,\n          \"HighLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"00000000000003FB\",\n          \"LowLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n            \"value\": \"10000\"\n          },\n          \"LowNode\": \"0000000000000006\",\n          \"LowQualityIn\": 1000000000\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"4.986421472710849\"\n          }\n        },\n        \"PreviousTxnID\": \"7E8FD5686DBCB9B14E0EE82833965D7219177678375AC39CCFB59C9EB81F75C1\",\n        \"PreviousTxnLgrSeq\": 30753423\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rUZwBRmxtK9PwoJqAsgJg5P5was3Bd7wjA\",\n          \"BookDirectory\": \"FAE6F85BC792DE5D6E89D97862792CE1D01F47A3DD18F0E25A112FCCC4F307BE\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 131072,\n          \"OwnerNode\": \"0000000000000000\",\n          \"Sequence\": 16729,\n          \"TakerGets\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"3589.476852558163\"\n          },\n          \"TakerPays\": \"1736456495\"\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"656440C01AAED135F2215DBC76663B25B928EA28A51D5E6D99944C619072F719\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"3633.83631249\"\n          },\n          \"TakerPays\": \"1757915966\"\n        },\n        \"PreviousTxnID\": \"8787EC58C51B747D7499C0306A5DF507D9D55BE3A41BDE7FFB2AE65DBDB45B42\",\n        \"PreviousTxnLgrSeq\": 30753474\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n          \"BookDirectory\": \"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03B363EB84D6C4\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 0,\n          \"OwnerNode\": \"0000000000000D21\",\n          \"Sequence\": 195449,\n          \"TakerGets\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0.0798954096606972\"\n          },\n          \"TakerPays\": \"83224385\"\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"71F15114DE3069161784310693089E9102EAA00EF3E6651582E83642EE07E097\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0.0899154096606972\"\n          },\n          \"TakerPays\": \"93661885\"\n        },\n        \"PreviousTxnID\": \"7E8FD5686DBCB9B14E0EE82833965D7219177678375AC39CCFB59C9EB81F75C1\",\n        \"PreviousTxnLgrSeq\": 30753423\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n          \"Balance\": \"6059125361\",\n          \"Flags\": 0,\n          \"OwnerCount\": 9,\n          \"Sequence\": 4737\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\n        \"PreviousFields\": {\n          \"OwnerCount\": 10\n        },\n        \"PreviousTxnID\": \"2171019C7DC87F2BCC0461B26FF03736FDFBF42335E87E6DA2520F35C83FA665\",\n        \"PreviousTxnLgrSeq\": 30753452\n      }\n    }, {\n      \"DeletedNode\": {\n        \"FinalFields\": {\n          \"ExchangeRate\": \"500AC40B67AED936\",\n          \"Flags\": 0,\n          \"RootIndex\": \"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500AC40B67AED936\",\n          \"TakerGetsCurrency\": \"0000000000000000000000004A50590000000000\",\n          \"TakerGetsIssuer\": \"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\n          \"TakerPaysCurrency\": \"000000000000000000000000524A500000000000\",\n          \"TakerPaysIssuer\": \"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"\n        },\n        \"LedgerEntryType\": \"DirectoryNode\",\n        \"LedgerIndex\": \"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500AC40B67AED936\"\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n          \"Balance\": \"1849344221245\",\n          \"Flags\": 0,\n          \"OwnerCount\": 1058,\n          \"Sequence\": 196172\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\n        \"PreviousFields\": {\n          \"Balance\": \"1849333783745\"\n        },\n        \"PreviousTxnID\": \"A09D332756D392B7F212A9A4D6BEB3FA294851A0E4D3126DEA4D69F86DBF1468\",\n        \"PreviousTxnLgrSeq\": 30753457\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-2757.587450993835\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\n            \"value\": \"5000\"\n          },\n          \"HighNode\": \"0000000000000000\",\n          \"LowLimit\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"0000000000000366\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"8E3B8339C5779F7A295DCC3C962726E53398AEFE067A28B4FB8E211164EC3A33\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-2713.227991061998\"\n          }\n        },\n        \"PreviousTxnID\": \"2C6AD9A43FC755BCF11258F1D9E2DDAC9BB9829FB7E3187A54492D5F2AE1CAA0\",\n        \"PreviousTxnLgrSeq\": 30753381\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Flags\": 0,\n          \"IndexPrevious\": \"0000000000000006\",\n          \"Owner\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n          \"RootIndex\": \"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"\n        },\n        \"LedgerEntryType\": \"DirectoryNode\",\n        \"LedgerIndex\": \"91565E4F1A8282718C8D6ED8EFEE2B5DC18101FC76D0AE436F46194F4567EF5E\"\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rUZwBRmxtK9PwoJqAsgJg5P5was3Bd7wjA\",\n          \"Balance\": \"557765244\",\n          \"Flags\": 0,\n          \"OwnerCount\": 3,\n          \"Sequence\": 16730\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"97B248F775073AB28ECB321D35C6CE0741EDB2CD70A0A4A321ED81E8C5395974\",\n        \"PreviousFields\": {\n          \"Balance\": \"536305773\"\n        },\n        \"PreviousTxnID\": \"8787EC58C51B747D7499C0306A5DF507D9D55BE3A41BDE7FFB2AE65DBDB45B42\",\n        \"PreviousTxnLgrSeq\": 30753474\n      }\n    }, {\n      \"DeletedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n          \"BookDirectory\": \"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500AC40B67AED936\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 0,\n          \"OwnerNode\": \"000000000000000F\",\n          \"PreviousTxnID\": \"2171019C7DC87F2BCC0461B26FF03736FDFBF42335E87E6DA2520F35C83FA665\",\n          \"PreviousTxnLgrSeq\": 30753452,\n          \"Sequence\": 4736,\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"TakerPays\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          }\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"A775A9087DE2AE63A3F3EA41D620503557A77E1B47B0F1EB4D60A07A94632F87\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"330\"\n          },\n          \"TakerPays\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0.01\"\n          }\n        }\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-3589.477852558515\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rUZwBRmxtK9PwoJqAsgJg5P5was3Bd7wjA\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"0000000000000000\",\n          \"LowLimit\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"000000000000038E\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"ACA17C12D66798166A56BEF15054403BC0022AD4C4A0FE2E1C323A0A3557BA2B\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-3633.837312490352\"\n          }\n        },\n        \"PreviousTxnID\": \"7B37FC9C32AD27ACA5425CF910B449885643A3D7CE2E71226F469DEA820F5134\",\n        \"PreviousTxnLgrSeq\": 30753473\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\n          \"BookDirectory\": \"3F3354021DCB7873717F76060221129B5C2751D6A5C288B3531773ACB72A1BC0\",\n          \"BookNode\": \"0000000000000000\",\n          \"Flags\": 65536,\n          \"OwnerNode\": \"0000000000014758\",\n          \"Sequence\": 2881273,\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"16718.54030263\"\n          },\n          \"TakerPays\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"1103.609253978163\"\n          }\n        },\n        \"LedgerEntryType\": \"Offer\",\n        \"LedgerIndex\": \"AEE6B9BC08A644347743BCDF39D1B3A9E3B297E69AAC082C8CB1F2488B1F6B0B\",\n        \"PreviousFields\": {\n          \"TakerGets\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"17390.54030263\"\n          },\n          \"TakerPays\": {\n            \"currency\": \"CNY\",\n            \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n            \"value\": \"1147.96871391\"\n          }\n        },\n        \"PreviousTxnID\": \"312345F33603FFB84C88DE236705477F0FE6EC716B0A844808BFD119740E8E96\",\n        \"PreviousTxnLgrSeq\": 30753461\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"60113.59208981219\"\n          },\n          \"Flags\": 1114112,\n          \"HighLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"HighNode\": \"000000000000020D\",\n          \"LowLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n            \"value\": \"10000000000\"\n          },\n          \"LowNode\": \"0000000000000000\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"D321553C5DB379D18CB753AC923B665D71A1E1AAEF75CE1147D939633BA28B6F\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"59113.5920898122\"\n          }\n        },\n        \"PreviousTxnID\": \"9F6ABF53ECB794994E5B2D5616F2A5738F2A4EDC820AF354F92C8A69B576C19E\",\n        \"PreviousTxnLgrSeq\": 30688781\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Account\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n          \"Balance\": \"3998096580\",\n          \"Flags\": 0,\n          \"OwnerCount\": 3,\n          \"Sequence\": 31\n        },\n        \"LedgerEntryType\": \"AccountRoot\",\n        \"LedgerIndex\": \"DDD46D83AF631B76FF31E1E6233BA46AE7193FD67F2AC226C64E7DCD0FA7A029\",\n        \"PreviousFields\": {\n          \"Balance\": \"4029993563\",\n          \"Sequence\": 30\n        },\n        \"PreviousTxnID\": \"4A6AF968725166D76D052449B56DB3B4716EF3B4F74D9765FA5D557DF4CA54E3\",\n        \"PreviousTxnLgrSeq\": 30753087\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-224236.9917584584\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\n            \"value\": \"450000\"\n          },\n          \"HighNode\": \"0000000000000001\",\n          \"LowLimit\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"00000000000002A9\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"E78936A42475EE0086C2AF9FB1417D8076390AFF0DEAD33E747F155ABD8851EA\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"JPY\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-224908.9917584584\"\n          }\n        },\n        \"PreviousTxnID\": \"D812BB08C9CEA04CC444B3350D844D7291B03A00D1F8A5C593CDDAED01E477ED\",\n        \"PreviousTxnLgrSeq\": 30753249\n      }\n    }, {\n      \"ModifiedNode\": {\n        \"FinalFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-258.1224488831166\"\n          },\n          \"Flags\": 2228224,\n          \"HighLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\n            \"value\": \"10000000000\"\n          },\n          \"HighNode\": \"0000000000000009\",\n          \"LowLimit\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"value\": \"0\"\n          },\n          \"LowNode\": \"0000000000000012\"\n        },\n        \"LedgerEntryType\": \"RippleState\",\n        \"LedgerIndex\": \"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\n        \"PreviousFields\": {\n          \"Balance\": {\n            \"currency\": \"RJP\",\n            \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n            \"value\": \"-258.1324688831166\"\n          }\n        },\n        \"PreviousTxnID\": \"7E8FD5686DBCB9B14E0EE82833965D7219177678375AC39CCFB59C9EB81F75C1\",\n        \"PreviousTxnLgrSeq\": 30753423\n      }\n    }],\n    \"TransactionIndex\": 0,\n    \"TransactionResult\": \"tesSUCCESS\"\n  },\n  \"status\": \"closed\",\n  \"transaction\": {\n    \"Account\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n    \"Amount\": {\n      \"currency\": \"JPY\",\n      \"issuer\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n      \"value\": \"1000\"\n    },\n    \"Destination\": \"rwh4t7pKRvCa76nL7o3SSdQCW1jhsviyfk\",\n    \"Fee\": \"12\",\n    \"Flags\": 2147483648,\n    \"LastLedgerSequence\": 30753479,\n    \"Paths\": [\n      [{\n        \"currency\": \"RJP\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"currency\": \"JPY\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 1,\n        \"type_hex\": \"0000000000000001\"\n      }],\n      [{\n        \"currency\": \"CNY\",\n        \"issuer\": \"razqQKzJRdB4UxFPWf5NEpEG3WMkmwgcXA\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"currency\": \"JPY\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 1,\n        \"type_hex\": \"0000000000000001\"\n      }],\n      [{\n        \"currency\": \"CNY\",\n        \"issuer\": \"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"currency\": \"JPY\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 1,\n        \"type_hex\": \"0000000000000001\"\n      }],\n      [{\n        \"currency\": \"JPY\",\n        \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 48,\n        \"type_hex\": \"0000000000000030\"\n      }, {\n        \"account\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n        \"type\": 1,\n        \"type_hex\": \"0000000000000001\"\n      }]\n    ],\n    \"SendMax\": \"32259304\",\n    \"Sequence\": 30,\n    \"SigningPubKey\": \"02EBE7621265FF3F0960BBB8AF0488145F1104E289BA838925CD9260D2364241C4\",\n    \"TransactionType\": \"Payment\",\n    \"TxnSignature\": \"3044022018ED086B143C2B5E4E944B4AFC310ADA62D5CDCD53D6E768E46BF316DEEAE06602204D6F3FB9E99B1D62FE940F39E6B970474A58A4B0C4D7FF7293F981CEBA03A9D1\",\n    \"date\": 551672000,\n    \"hash\": \"4CE0839CE8208F81C23B3948B348FE66BDC1B400E61CB31564657CAD38DF1134\"\n  },\n  \"type\": \"transaction\",\n  \"validated\": true\n}\n";
		System.out.println("order consumed with payment 3");
		testOfferQuality(consumedFullWithPayment3);
		System.out.println("torder consumed with payment 4");
		String consumedFullWithPayment4 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"36937E48475E3E713A046BB21E4CF3E8F4ED8EDACD7E18FEFEBFC4C36D69AAF6\",\"ledger_index\":30758172,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"9740.30660621981\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"10620.37016404143\"}},\"PreviousTxnID\":\"5119074CF81B535F92AF56E2202343A5C2896668BFA616D611A303F8E19DEB9E\",\"PreviousTxnLgrSeq\":30757891}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03B363EB77AB2F\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000D35\",\"Sequence\":196197,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.03043818971368708\"},\"TakerPays\":\"31706449\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"49DDE07C77FB964A480CBAD36770DA50A3F9AF8B2992AC0767B0952BF0685750\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.05732305815689637\"},\"TakerPays\":\"59711521\"},\"PreviousTxnID\":\"62506344DE1588A314EE7DD3074E82B6F59851931887068437AFB6AF1EBD77A5\",\"PreviousTxnLgrSeq\":30757546}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.902752678808559\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.875921472777412\"}},\"PreviousTxnID\":\"5119074CF81B535F92AF56E2202343A5C2896668BFA616D611A303F8E19DEB9E\",\"PreviousTxnLgrSeq\":30757891}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1836172114021\",\"Flags\":0,\"OwnerCount\":1127,\"Sequence\":197048},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1836144108949\"},\"PreviousTxnID\":\"FEFFFB3D498AEADDD2EEA46BEC2A2CF77D6E12DBEE60D01DA11CCB68B2AECFD2\",\"PreviousTxnLgrSeq\":30758157}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"r9Gps6fB9YLuZ87rWx7M9TgLAGK2zsz5s6\",\"Balance\":\"29936904494\",\"Flags\":0,\"OwnerCount\":126,\"Sequence\":154943},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"8D57DFC0321921B37D6E2E80E01DB3644703B13E0B1F1E0BFEFE3CC42D5E73B6\",\"PreviousFields\":{\"Balance\":\"29964934566\",\"Sequence\":154942},\"PreviousTxnID\":\"937F8F12286E45538C4786C82121EDC4F356D4C99ED9F2D53D470008B172FDD8\",\"PreviousTxnLgrSeq\":30758073}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500AD4D985F947CE\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"000000000000000F\",\"Sequence\":4757,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2399.936442178379\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.073168793968853\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"9675489C8FA896DD0FD7880AD9709D51F3432A19C47BB3E5D397825BBCCC2AB5\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3280\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1\"}},\"PreviousTxnID\":\"ADC40332E34DBA9CA961FC15756965051054AEC3AC6B5A0A73F4DA0EA16B52CE\",\"PreviousTxnLgrSeq\":30758017}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"878.306943933754\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000198\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"r9Gps6fB9YLuZ87rWx7M9TgLAGK2zsz5s6\",\"value\":\"1000000000\"},\"LowNode\":\"0000000000000003\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"BB919FEA19C2F386F7F0ADBE9E75668B544813D4E66EE4DB6BA385000657C9F4\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"0\"}},\"PreviousTxnID\":\"CA80CA88BF74A126002A7DF21A868AD8E2A316939CAB1A7A064862C0BF412279\",\"PreviousTxnLgrSeq\":30732215}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-258.164704833011\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-258.1915897014542\"}},\"PreviousTxnID\":\"62506344DE1588A314EE7DD3074E82B6F59851931887068437AFB6AF1EBD77A5\",\"PreviousTxnLgrSeq\":30757546}}],\"TransactionIndex\":2,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"r9Gps6fB9YLuZ87rWx7M9TgLAGK2zsz5s6\",\"Amount\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"878.306943933754\"},\"Destination\":\"r9Gps6fB9YLuZ87rWx7M9TgLAGK2zsz5s6\",\"Fee\":\"25000\",\"Flags\":458752,\"LastLedgerSequence\":30758173,\"Paths\":[[{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"}],[{\"currency\":\"CNY\",\"issuer\":\"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"}]],\"SendMax\":\"28024616\",\"Sequence\":154942,\"SigningPubKey\":\"0399C1D236934748F4A3B51644647B0FC217D9CCBE2372A4A4DB95E0D5429157EB\",\"TransactionType\":\"Payment\",\"TxnSignature\":\"304402201DADECB1C09B590C574BAF2DEF4CB5792758693DD71809492312E8F237E5AB2202207F4931B6B76DE885BF0488FA9EFB6FC4BBB70E4035439A1A435A44041A83A369\",\"date\":551687830,\"hash\":\"F459657B153F78CD0D358F6F420336EA4876356A85EFD785CC1E0274D56B7AD7\"},\"type\":\"transaction\",\"validated\":true}\n";
		testOfferQuality(consumedFullWithPayment4);

	}
	
	@Test
	public void unknown() throws Exception{
		String un1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"A53C42A135396D1C9B7708E96977CB71454F4AE6C7900D0CF30B62AEC3FE5851\",\"ledger_index\":30854512,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A7AB7B21D6FCE\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25493.59330038829\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25552.70487260873\"}},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000001044\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"3B2BE34F74E8E10113F2D4C84053344F678D64E12D537D8D931D8981DF3AC7F4\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2517023578\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5451},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2515023698\",\"Sequence\":5450},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1686510443008\",\"Flags\":0,\"OwnerCount\":2546,\"Sequence\":229780},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1686512443008\",\"OwnerCount\":2547},\"PreviousTxnID\":\"9563022137D4F43F080FE59F74847D41C4C3222DB4FC0A70560AFDC33771712A\",\"PreviousTxnLgrSeq\":30854493}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7C76B2D09\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001045\",\"Sequence\":229778,\"TakerGets\":\"7885940\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"232.6099563824587\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"83F71EE4B60B9016D25138FCE5D0D1E8DEF8C794940B42B53C8082516F1BEF40\",\"PreviousFields\":{\"TakerGets\":\"8442902\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"249.0385503771742\"}},\"PreviousTxnID\":\"5A2B58D139CDEADCD4B1F6DDE2CB766E5C9BECCD893AEB6747558D76E6586785\",\"PreviousTxnLgrSeq\":30854493}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001045\",\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492,\"Sequence\":229774,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"85794675649594FC8F8595FB5BB02342ABA3D5801DA543C13BCE89558BA3021C\",\"PreviousFields\":{\"TakerGets\":\"1443038\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"42.56499105563746\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-25536929.46912782\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FB9399D7485EA21D73E649E9F821B8C10A1008285E32107B6F30F934723EB5C8\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-25536870.47554278\"}},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}}],\"TransactionIndex\":4,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"120\",\"Flags\":2147483648,\"LastLedgerSequence\":30854514,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5450,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"60\"},\"TakerPays\":\"2000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100EE1BC622B0768D2F01515AE8BC8157EA3EF361BB65C9E680C44CE7C87066CE4402207594042DD3E0FD7C8D0B59B84C96ECD0BF8780CB85B893FD5626F877CB3FB6F5\",\"date\":552025652,\"hash\":\"024C1B17CE1C35425550B6CC5676230B488C5680CADE21D226F8EA2D3594204D\",\"owner_funds\":\"25493.59330038829\"},\"type\":\"transaction\",\"validated\":true}\n";
		System.out.println("unknown 1");
		testOfferQuality(un1);
	}
	
	@Test
	public void autobridgeOnetoOne() throws Exception{
		System.out.println("one to one sell RJP, XRP/JPY shows up first");
		String esl1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"922B57D746FEC0062B5DA856BA9743ACF4A7E882332AA895C6997648E073A2F7\",\"ledger_index\":30927692,\"meta\":{\"AffectedNodes\":[{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"0F74D77C665E8260C781637799E73E63F99B683DADF0459FBB946B5768CACE74\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590933975DF7E000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000018\",\"Sequence\":5515,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.00738892748827815\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"191.3732219464041\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"20363.72892024378\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"20295.98979986558\"}},\"PreviousTxnID\":\"3B6BC242C2B6331CEA309367CAA8A0C2F4D61E396965EF9C04F77C23F0413840\",\"PreviousTxnLgrSeq\":30927686}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.596283597283793\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.598899891940538\"}},\"PreviousTxnID\":\"3B6BC242C2B6331CEA309367CAA8A0C2F4D61E396965EF9C04F77C23F0413840\",\"PreviousTxnLgrSeq\":30927686}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-67.6036421375006\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"value\":\"0\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000444\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"601AA9619F786BFA936D2B438F863D98D8755DFF72AA3ADA1D0F33DCAFC26884\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-135.478240756457\"}},\"PreviousTxnID\":\"EC6227E4BA77C644F442E0BC51B98BF9AEFD921C300DB53AD64314510B0FCC69\",\"PreviousTxnLgrSeq\":30927447}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2592222258\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5516},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2592222270\",\"OwnerCount\":9,\"Sequence\":5515},\"PreviousTxnID\":\"3B6BC242C2B6331CEA309367CAA8A0C2F4D61E396965EF9C04F77C23F0413840\",\"PreviousTxnLgrSeq\":30927686}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"Balance\":\"1767456062149\",\"Flags\":0,\"OwnerCount\":727,\"Sequence\":1004},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"94D26520D7CA98F0B20082FD5BFC79389D1930F94F5D79734931F5076EAC75EA\",\"PreviousFields\":{\"Balance\":\"1767458520786\"},\"PreviousTxnID\":\"A954CB9502950D50698EDABD8FD17411CE7FC07771969EE7BC24E55B1BEEA0EF\",\"PreviousTxnLgrSeq\":30927687}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"RootIndex\":\"97065B0341198D1BF2661855C84BB85B08350CBD02AA87B68095409768629974\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"97065B0341198D1BF2661855C84BB85B08350CBD02AA87B68095409768629974\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4C03C5E2252E5C40\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000019\",\"Sequence\":918,\"TakerGets\":\"91880985\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.0975776067322782\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"99A5FC6CE8C0F88F067BC8C0BC04C7E07B913FBB3F887BBA713F3244153E8803\",\"PreviousFields\":{\"TakerGets\":\"94339622\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.100188679244\"}},\"PreviousTxnID\":\"840BDBE07F7EB45ACC1935B92A54B7053D14D9E0FFD1C8622EC3F00B7B365210\",\"PreviousTxnLgrSeq\":30927131}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"Balance\":\"1859847505\",\"Flags\":0,\"OwnerCount\":3,\"Sequence\":21814},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"A1A60AF78F370DA28CF59719A480A9063D663883461EF62DA061486812C22D6E\",\"PreviousFields\":{\"Balance\":\"1857388868\",\"OwnerCount\":4},\"PreviousTxnID\":\"87F788483A3A28A2B3ED5FA9A91D38710E5A348AB22ADE39E18C6098FD97A6AC\",\"PreviousTxnLgrSeq\":30927530}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590CE51280E654E9\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CE51280E654E9\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CE51280E654E9\"}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CE51280E654E9\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"87F788483A3A28A2B3ED5FA9A91D38710E5A348AB22ADE39E18C6098FD97A6AC\",\"PreviousTxnLgrSeq\":30927530,\"Sequence\":21813,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"AC23DF134740F45F5B7CB500ADB4A92B99EB71921484123516F1CB954FD7E227\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"67.7391203782\"},\"TakerPays\":\"2458637\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-109.6139290487156\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"10000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000324\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"C0ADFF611CD723F588F6E274696526AD6E3E3061D43B92C2761A7EDB64967999\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-109.6113179762039\"}},\"PreviousTxnID\":\"3B6BC242C2B6331CEA309367CAA8A0C2F4D61E396965EF9C04F77C23F0413840\",\"PreviousTxnLgrSeq\":30927686}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590933975DF7E000\",\"NewFields\":{\"ExchangeRate\":\"590933975DF7E000\",\"RootIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590933975DF7E000\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}}],\"TransactionIndex\":9,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2148007936,\"LastLedgerSequence\":30927694,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5515,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.01\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"259\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3044022041F61D257565EBD630BBC5542D2DCEC4DECB05F93D6CE01CCE977672A9FFDD15022069A94032AD190FD178A5CAD567D1C464D23D35DF970F8EBB237D81162890FE1C\",\"date\":552283732,\"hash\":\"BB033142291A122476361C26B482540EA2DD344A8A4984A4B7275A40BC762A2D\",\"owner_funds\":\"4.596283597283793\"},\"type\":\"transaction\",\"validated\":true}\n";
		testOfferQuality(esl1);
	}
	
	
	public static void testOfferQuality(String raw) throws Exception {
		System.out.println("\n");
		System.out.println("\n");
		System.out.println("****NEW TX****");
		
		
		JSONObject transaction = new JSONObject(raw);
		JSONObject metaJSON = (JSONObject) transaction.remove("meta");
		TransactionMeta meta = (TransactionMeta) STObject.fromJSONObject(metaJSON);
		Transaction txn = (Transaction) STObject.fromJSONObject(transaction.getJSONObject("transaction"));

		if (txn.get(Field.TransactionType).toString().equals("OfferCrate")) {
			Amount gets = txn.get(Amount.TakerGets);
			Amount pays = txn.get(Amount.TakerPays);

			System.out.println("---------------------------------------------------------------");
			System.out.println("OfferCreate ");
			System.out.println("---------------------------------------------------------------");
			System.out.println("Get/Pay:    " + gets.currencyString() + "/" + pays.currencyString());
			System.out.println("Bid:        " + gets.computeQuality(pays));
			System.out.println("TakerPays:  " + pays);
			System.out.println("TakerGets:  " + gets);
		} else if (txn.get(Field.TransactionType).toString().equals("OfferCancel")) {
			System.out.println("---------------------------------------------------------------");
			System.out.println("OfferCancel ");
			System.out.println("---------------------------------------------------------------");
		} else if (txn.get(Field.TransactionType).toString().equals("Payment")) {
			System.out.println("---------------------------------------------------------------");
			System.out.println("Payment ");
			System.out.println("---------------------------------------------------------------");

		} else {
			System.out.println("---------------------------------------------------------------");
			System.out.println(txn.get(Field.TransactionType).toString());
			System.out.println("---------------------------------------------------------------");
		}

		System.out.println(txn.prettyJSON());
		ArrayList<AffectedNode> deletedNodes = new ArrayList<>();
		ArrayList<Offer> offersExecuted = new ArrayList<>();

		for (AffectedNode node : meta.affectedNodes()) {
			
			if (!node.isCreatedNode()) {
				// Merge fields from node / node.FinalFields && node.PreviousFields
				// to determine state of node prior to transaction.
				// Any fields that were in PreviousFields will  have their final
				// values
				// in a nested STObject keyed by FinalFields.
				LedgerEntry asPrevious = (LedgerEntry) node.nodeAsPrevious();
				// If it's an offer
				if(node.isDeletedNode()){
					deletedNodes.add(node);
				}
				if (asPrevious instanceof Offer) {
					// We can down-cast this to use Offer specific methods
					offersExecuted.add((Offer) asPrevious);
				}
			} else {
				LedgerEntry asFinal = (LedgerEntry) node.nodeAsPrevious();
				if (asFinal instanceof Offer) {
					Offer offer = (Offer) asFinal;						
					System.out.println("---------------------------------------------------------------");
					System.out.println("Offer Created");
					System.out.println("---------------------------------------------------------------");
					System.out.println("Get/Pay:    " + offer.getPayCurrencyPair());
					System.out.println("Bid:        " + offer.bidQuality());
					System.out.println("TakerPays:  " + offer.takerPays());
					System.out.println("TakerGets:  " + offer.takerGets());
					System.out.println("---------------------------------------------------------------");
					System.out.println(offer.prettyJSON());
				}
			}
		}
		
		deletedNodes.forEach(dn -> {
			LedgerEntry le = (LedgerEntry) dn.nodeAsFinal();
			STObject finalFields = dn.get(STObject.FinalFields);
			
			Hash256 previousTxnId = le.get(Hash256.PreviousTxnID);
			if (previousTxnId != null){
				System.out.println(previousTxnId.toString());

			}
		});

		Collections.sort(offersExecuted, Offer.qualityAscending);
		for (Offer offer : offersExecuted) {
			STObject finalFields = offer.get(STObject.FinalFields);
			if (finalFields == null) {
				System.out.println("FinalFields is null");
//				System.out.println(offer.prettyJSON());

			} else {
				
				STObject executed = offer.executed(offer.get(STObject.FinalFields));
				// This will be computed from the BookDirectory field
				System.out.println("---------------------------------------------------------------");
				System.out.println("Offer Executed");
				System.out.println("---------------------------------------------------------------");
				System.out.println("Get/Pay: " + offer.getPayCurrencyPair());
				System.out.println("Ask:     " + offer.directoryAskQuality().stripTrailingZeros().toPlainString());
				System.out.println("Paid:    " + executed.get(Amount.TakerPays));
				System.out.println("Got:     " + executed.get(Amount.TakerGets));
				System.out.println("---------------------------------------------------------------");
				System.out.println(offer.prettyJSON());
			}

		}
		System.out.println("****END TX****");
		System.out.println("\n");
		System.out.println("\n");


}
	
}
