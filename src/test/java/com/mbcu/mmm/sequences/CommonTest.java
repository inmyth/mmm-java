package com.mbcu.mmm.sequences;

import static org.junit.Assert.assertEquals;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;

import org.json.JSONObject;
import org.junit.Before;
import org.junit.Test;

import com.mbcu.mmm.models.internal.Config;
import com.mbcu.mmm.rx.RxBusProvider;
import com.ripple.core.coretypes.Amount;
import com.ripple.core.coretypes.STObject;
import com.ripple.core.coretypes.hash.Hash256;
import com.ripple.core.fields.Field;
import com.ripple.core.types.known.sle.LedgerEntry;
import com.ripple.core.types.known.sle.entries.Offer;
import com.ripple.core.types.known.tx.Transaction;
import com.ripple.core.types.known.tx.result.AffectedNode;
import com.ripple.core.types.known.tx.result.TransactionMeta;

public class CommonTest {
	private static final String configPath = "config.txt";
	private Common c;
	
	@Before
	public void init() throws IOException{
		c = Common.newInstance(Config.build(configPath));
	}
	
//	@Test
//	public void bugv025() throws Exception{
//		String a = "{\n  \"engine_result\": \"tesSUCCESS\",\n  \"engine_result_code\": 0,\n  \"engine_result_message\": \"The transaction was applied. Only final in a validated ledger.\",\n  \"ledger_hash\": \"1A8FC58AB5E2DAAE46355F4D3946DBC82B61D746B54F6AA159C564821A465361\",\n  \"ledger_index\": 30751754,\n  \"meta\": {\n    \"AffectedNodes\": [{\n        \"ModifiedNode\": {\n          \"LedgerEntryType\": \"AccountRoot\",\n          \"LedgerIndex\": \"2C6F7594FB7471F4983C2BC691AAC2F25F8DB88D455985B4181E053D7AB23006\",\n          \"PreviousTxnID\": \"1521613D7D241DE21E9F1327B84DC13D2BA589BAAA9A644A426F5FB1B598F77C\",\n          \"PreviousTxnLgrSeq\": 31775475\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Flags\": 0,\n            \"IndexPrevious\": \"00000000000004A3\",\n            \"Owner\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"RootIndex\": \"5E57FEC97EA6A8F8CB9EAF25669F7B8BCEC18B95A38D28CBAC9CFB78657C9F96\"\n          },\n          \"LedgerEntryType\": \"DirectoryNode\",\n          \"LedgerIndex\": \"786DC2D13956BC6A1AB604E4F3050141E54263F5CC480EBC2576AFCBD163D6A7\"\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Balance\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n              \"value\": \"-312.178651536923\"\n            },\n            \"Flags\": 2228224,\n            \"HighLimit\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rKMZiCtmf4HFgxaViGQ83NRiN2JqjmMkAj\",\n              \"value\": \"100000\"\n            },\n            \"HighNode\": \"0000000000000000\",\n            \"LowLimit\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n              \"value\": \"0\"\n            },\n            \"LowNode\": \"0000000000000451\"\n          },\n          \"LedgerEntryType\": \"RippleState\",\n          \"LedgerIndex\": \"7DB036B292A52D4DBC3965B2274F48E3A11CC265B6D3ADEAA6262B4012015E4F\",\n          \"PreviousFields\": {\n            \"Balance\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n              \"value\": \"-312.1786515362568\"\n            }\n          },\n          \"PreviousTxnID\": \"E99180950CD01EB99F95F67E18C0D5809845E2EB05CF840ECC61C0123C01A456\",\n          \"PreviousTxnLgrSeq\": 31775370\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Account\": \"rBZ6C6PTTscDUfGiSSdtdRK5ZzSRLuyqtM\",\n            \"Balance\": \"32361790595\",\n            \"Flags\": 0,\n            \"OwnerCount\": 1,\n            \"Sequence\": 1071880\n          },\n          \"LedgerEntryType\": \"AccountRoot\",\n          \"LedgerIndex\": \"B5F67997908717D6490528D1CDD10584C960082FD19269928FD96F5492CE8F35\",\n          \"PreviousFields\": {\n            \"Balance\": \"32361803595\",\n            \"OwnerCount\": 2,\n            \"Sequence\": 1071879\n          },\n          \"PreviousTxnID\": \"1521613D7D241DE21E9F1327B84DC13D2BA589BAAA9A644A426F5FB1B598F77C\",\n          \"PreviousTxnLgrSeq\": 31775475\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Account\": \"rKMZiCtmf4HFgxaViGQ83NRiN2JqjmMkAj\",\n            \"BookDirectory\": \"8CFEA70E01BA639AE7D1AE0F860AE9F95B7D5F945C26D5AC4B1AC07EBDBF0A3F\",\n            \"BookNode\": \"0000000000000000\",\n            \"Flags\": 0,\n            \"OwnerNode\": \"0000000000000A68\",\n            \"Sequence\": 118370,\n            \"TakerGets\": \"3000000000\",\n            \"TakerPays\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n              \"value\": \"2.258999992224704\"\n            }\n          },\n          \"LedgerEntryType\": \"Offer\",\n          \"LedgerIndex\": \"DD2A7450295FCDC573AFCAC661A6E029C7D1A1AFA29F2B9042E9C20F3E5F9427\",\n          \"PreviousFields\": {\n            \"TakerPays\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n              \"value\": \"2.25899999289095\"\n            }\n          },\n          \"PreviousTxnID\": \"036467C3AF5D36760A75DAEA23E3DE613475D5902B261561B2ADE725C61BFB5E\",\n          \"PreviousTxnLgrSeq\": 31774435\n        }\n      },\n      {\n        \"DeletedNode\": {\n          \"FinalFields\": {\n            \"Balance\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n              \"value\": \"0\"\n            },\n            \"Flags\": 2097152,\n            \"HighLimit\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rBZ6C6PTTscDUfGiSSdtdRK5ZzSRLuyqtM\",\n              \"value\": \"0\"\n            },\n            \"HighNode\": \"0000000000000001\",\n            \"LowLimit\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n              \"value\": \"0\"\n            },\n            \"LowNode\": \"00000000000004A4\",\n            \"PreviousTxnID\": \"1521613D7D241DE21E9F1327B84DC13D2BA589BAAA9A644A426F5FB1B598F77C\",\n            \"PreviousTxnLgrSeq\": 31775475\n          },\n          \"LedgerEntryType\": \"RippleState\",\n          \"LedgerIndex\": \"F25EAA9BB95D0F0C166801CCF389BE320E18ED60EF854C819D8F149531CF8FB7\",\n          \"PreviousFields\": {\n            \"Balance\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n              \"value\": \"-0.0000000006675786744129224\"\n            },\n            \"Flags\": 2228224\n          }\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Flags\": 0,\n            \"Owner\": \"rBZ6C6PTTscDUfGiSSdtdRK5ZzSRLuyqtM\",\n            \"RootIndex\": \"54D6C77DF6EEB068423BFC12CB8E9DBA3B7A3967782A57BC11CE19FB225FC971\"\n          },\n          \"LedgerEntryType\": \"DirectoryNode\",\n          \"LedgerIndex\": \"FE8ED5CAE5AF3259B3DB9C9FD3C60779D854BA1F7AAABE9D11A4A4E3E7AD1ADC\"\n        }\n      }\n    ],\n    \"TransactionIndex\": 5,\n    \"TransactionResult\": \"tesSUCCESS\"\n  },\n  \"status\": \"closed\",\n  \"transaction\": {\n    \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n    \"Fee\": \"12\",\n    \"Flags\": 2148007936,\n    \"LastLedgerSequence\": 30751756,\n    \"Memos\": [{\n      \"Memo\": {\n        \"MemoData\": \"726D2D312E322E33\",\n        \"MemoType\": \"636C69656E74\"\n      }\n    }],\n    \"Sequence\": 4731,\n    \"SigningPubKey\": \"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\n    \"TakerGets\": {\n      \"currency\": \"ETH\",\n      \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n      \"value\": \"2.259225892165148\"\n    },\n    \"TakerPays\": \"2999999999\",\n    \"TransactionType\": \"OfferCreate\",\n    \"TxnSignature\": \"3045022100BA523BCF24BF998188A4137AC8679417CA18D0477E1FEC47AE63E4AC57F5D47402205781A0777FFCCB262963E9CB1808E12651D710B2717CDB5EBD7B8A2700026DA0\",\n    \"date\": 551665861,\n    \"hash\": \"5C5D507B8D33DF36DD598D2EC4443D5EF0301D9629A8455A88D27F8F2B96BDC1\",\n    \"owner_funds\": \"4.976421472710849\"\n  },\n  \"type\": \"transaction\",\n  \"validated\": true\n}";
//		testOfferQuality(a);
//		c.filterStream2(a);
//		String b = "{\n  \"engine_result\": \"tesSUCCESS\",\n  \"engine_result_code\": 0,\n  \"engine_result_message\": \"The transaction was applied. Only final in a validated ledger.\",\n  \"ledger_hash\": \"1A8FC58AB5E2DAAE46355F4D3946DBC82B61D746B54F6AA159C564821A465361\",\n  \"ledger_index\": 30751754,\n  \"meta\": {\n    \"AffectedNodes\": [{\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Flags\": 0,\n            \"IndexPrevious\": \"000000000000049F\",\n            \"Owner\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n            \"RootIndex\": \"5E57FEC97EA6A8F8CB9EAF25669F7B8BCEC18B95A38D28CBAC9CFB78657C9F96\"\n          },\n          \"LedgerEntryType\": \"DirectoryNode\",\n          \"LedgerIndex\": \"24B94CEFE9AB631B5EB86671E425F86B2AA6A6AB642445182260F541D131E7A2\"\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"LedgerEntryType\": \"AccountRoot\",\n          \"LedgerIndex\": \"2C6F7594FB7471F4983C2BC691AAC2F25F8DB88D455985B4181E053D7AB23006\",\n          \"PreviousTxnID\": \"A7E40847ABBEE05099B5978D0FC74C4927F6934B428B265640059FF969CDEF47\",\n          \"PreviousTxnLgrSeq\": 31747869\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Balance\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n              \"value\": \"-325.7572315987566\"\n            },\n            \"Flags\": 2228224,\n            \"HighLimit\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rKMZiCtmf4HFgxaViGQ83NRiN2JqjmMkAj\",\n              \"value\": \"100000\"\n            },\n            \"HighNode\": \"0000000000000000\",\n            \"LowLimit\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n              \"value\": \"0\"\n            },\n            \"LowNode\": \"0000000000000451\"\n          },\n          \"LedgerEntryType\": \"RippleState\",\n          \"LedgerIndex\": \"7DB036B292A52D4DBC3965B2274F48E3A11CC265B6D3ADEAA6262B4012015E4F\",\n          \"PreviousFields\": {\n            \"Balance\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n              \"value\": \"-325.7572315984084\"\n            }\n          },\n          \"PreviousTxnID\": \"AB1754D7915AED0045A2594B98F56B896A01CB170918F6230C3B209BEB836407\",\n          \"PreviousTxnLgrSeq\": 31746261\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Account\": \"rKMZiCtmf4HFgxaViGQ83NRiN2JqjmMkAj\",\n            \"BookDirectory\": \"8CFEA70E01BA639AE7D1AE0F860AE9F95B7D5F945C26D5AC4B1BD157CA8E8287\",\n            \"BookNode\": \"0000000000000000\",\n            \"Flags\": 0,\n            \"OwnerNode\": \"0000000000000A5E\",\n            \"Sequence\": 117936,\n            \"TakerGets\": \"3000000000\",\n            \"TakerPays\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n              \"value\": \"2.348999808217187\"\n            }\n          },\n          \"LedgerEntryType\": \"Offer\",\n          \"LedgerIndex\": \"91D7F3582691DCE0C1E4767A074E6602CCDFED3E57C34DFAD577DD7F39B01828\",\n          \"PreviousFields\": {\n            \"TakerPays\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n              \"value\": \"2.348999808565442\"\n            }\n          },\n          \"PreviousTxnID\": \"DD4B5530D1B0252C77C82BCD6D44DE5208E3E5A8A82823525E65FA1F635519CF\",\n          \"PreviousTxnLgrSeq\": 31745538\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Account\": \"rBZ6C6PTTscDUfGiSSdtdRK5ZzSRLuyqtM\",\n            \"Balance\": \"30071843784\",\n            \"Flags\": 0,\n            \"OwnerCount\": 11,\n            \"Sequence\": 1062365\n          },\n          \"LedgerEntryType\": \"AccountRoot\",\n          \"LedgerIndex\": \"B5F67997908717D6490528D1CDD10584C960082FD19269928FD96F5492CE8F35\",\n          \"PreviousFields\": {\n            \"Balance\": \"30071856784\",\n            \"OwnerCount\": 12,\n            \"Sequence\": 1062364\n          },\n          \"PreviousTxnID\": \"A7E40847ABBEE05099B5978D0FC74C4927F6934B428B265640059FF969CDEF47\",\n          \"PreviousTxnLgrSeq\": 31747869\n        }\n      },\n      {\n        \"DeletedNode\": {\n          \"FinalFields\": {\n            \"Balance\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n              \"value\": \"0\"\n            },\n            \"Flags\": 2097152,\n            \"HighLimit\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rBZ6C6PTTscDUfGiSSdtdRK5ZzSRLuyqtM\",\n              \"value\": \"0\"\n            },\n            \"HighNode\": \"0000000000000001\",\n            \"LowLimit\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n              \"value\": \"0\"\n            },\n            \"LowNode\": \"00000000000004A0\",\n            \"PreviousTxnID\": \"A7E40847ABBEE05099B5978D0FC74C4927F6934B428B265640059FF969CDEF47\",\n            \"PreviousTxnLgrSeq\": 31747869\n          },\n          \"LedgerEntryType\": \"RippleState\",\n          \"LedgerIndex\": \"F25EAA9BB95D0F0C166801CCF389BE320E18ED60EF854C819D8F149531CF8FB7\",\n          \"PreviousFields\": {\n            \"Balance\": {\n              \"currency\": \"ETH\",\n              \"issuer\": \"rrrrrrrrrrrrrrrrrrrrBZbvji\",\n              \"value\": \"-0.0000000003489519380080798\"\n            },\n            \"Flags\": 2228224\n          }\n        }\n      },\n      {\n        \"ModifiedNode\": {\n          \"FinalFields\": {\n            \"Flags\": 0,\n            \"Owner\": \"rBZ6C6PTTscDUfGiSSdtdRK5ZzSRLuyqtM\",\n            \"RootIndex\": \"54D6C77DF6EEB068423BFC12CB8E9DBA3B7A3967782A57BC11CE19FB225FC971\"\n          },\n          \"LedgerEntryType\": \"DirectoryNode\",\n          \"LedgerIndex\": \"FE8ED5CAE5AF3259B3DB9C9FD3C60779D854BA1F7AAABE9D11A4A4E3E7AD1ADC\"\n        }\n      }\n    ],\n    \"TransactionIndex\": 5,\n    \"TransactionResult\": \"tesSUCCESS\"\n  },\n  \"status\": \"closed\",\n  \"transaction\": {\n    \"Account\": \"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\n    \"Fee\": \"12\",\n    \"Flags\": 2148007936,\n    \"LastLedgerSequence\": 30751756,\n    \"Memos\": [{\n      \"Memo\": {\n        \"MemoData\": \"726D2D312E322E33\",\n        \"MemoType\": \"636C69656E74\"\n      }\n    }],\n    \"Sequence\": 4731,\n    \"SigningPubKey\": \"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\n    \"TakerGets\": {\n      \"currency\": \"ETH\",\n      \"issuer\": \"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\n      \"value\": \"0.6901249756298505\"\n    },\n    \"TakerPays\": \"881297606\",\n    \"TransactionType\": \"OfferCreate\",\n    \"TxnSignature\": \"3045022100BA523BCF24BF998188A4137AC8679417CA18D0477E1FEC47AE63E4AC57F5D47402205781A0777FFCCB262963E9CB1808E12651D710B2717CDB5EBD7B8A2700026DA0\",\n    \"date\": 551665861,\n    \"hash\": \"F21E52A5C16FBD052E723BE811F962FE54644F3523BA4E593E6A5F48B8D02E16\",\n    \"owner_funds\": \"4.976421472710849\"\n  },\n  \"type\": \"transaction\",\n  \"validated\": true\n}";
//		testOfferQuality(b);
//		c.filterStream2(b);
//		
//	}
	
	public void testCrossOrders() throws Exception{
		String a = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"ED620E945DC8AA3FBE20F745AFD908852B3D7CE8B53604DB197F2F9467D9D62C\",\"ledger_index\":32206064,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"15403.45652030859\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"15322.75652094884\"}},\"PreviousTxnID\":\"7AC8E3956D9FEBDEE91A927B5382CF28539BC12F6A0CC0893A0464E9296FB411\",\"PreviousTxnLgrSeq\":32205962}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590D2F5FE9A113E7\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000061\",\"PreviousTxnID\":\"844B19AF4446AA11CB3E6ED7586957DA6099288A58ACC8AA5C76CE6F55548EC2\",\"PreviousTxnLgrSeq\":32206060,\"Sequence\":20703,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"53.89\"},\"TakerPays\":\"2000000\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"6E540E7B6D8E010791FD94481412B149C3AE8CBB6A6CBD09F65C7024D235E508\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2211900310\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":20705},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2214900322\",\"OwnerCount\":11,\"Sequence\":20704},\"PreviousTxnID\":\"844B19AF4446AA11CB3E6ED7586957DA6099288A58ACC8AA5C76CE6F55548EC2\",\"PreviousTxnLgrSeq\":32206060}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590D35056EDEF2EB\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000001256\",\"Sequence\":199132,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"134419.29893357\"},\"TakerPays\":\"4997000000\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"8F8B6A25EE234284BBA96E691D068A6B3EE9C2D91A17F58F6D6B1691D20A9EAF\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"134499.9989329297\"},\"TakerPays\":\"5000000000\"},\"PreviousTxnID\":\"0E0CDF2E7CC73FE81F38869ED09167A6DB80AB26E1678656A3AABC8D0D104D13\",\"PreviousTxnLgrSeq\":32206021}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"Balance\":\"2262337395782\",\"Flags\":0,\"OwnerCount\":3259,\"Sequence\":199134},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"94D26520D7CA98F0B20082FD5BFC79389D1930F94F5D79734931F5076EAC75EA\",\"PreviousFields\":{\"Balance\":\"2262334395782\"},\"PreviousTxnID\":\"6FF59F801C7D8BA50CEE4B3072A8D01AF5CA7D4322098F38F5630944E8C00003\",\"PreviousTxnLgrSeq\":32206061}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590D2F5FE9A113E7\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590D2F5FE9A113E7\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590D2F5FE9A113E7\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"000000000000001D\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"C07EA653AB5FC47F68D0CE89E33960C4B956FC22AD8290133445E3AC84DDF4F4\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-28504917.02406217\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"50000000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000323\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"D727CD2D19774BA754A358FDFD2744A7563BB99ED4F0E9979A1B3565758D9A17\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-28504997.88546152\"}},\"PreviousTxnID\":\"DF85D35F503D79B4024DFADE155A334D8F61FB0796E977F770F23980FB9736CB\",\"PreviousTxnLgrSeq\":32206019}}],\"TransactionIndex\":3,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2148007936,\"LastLedgerSequence\":32206066,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":20704,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":\"3000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"78\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100CD36E2DCCEF7EAC5F2496B0D4CD3E18D0FB94758A00E8A0D41EAB14EFC6C94AB02205935A8CE774029BBBE165D33AF7630A5606F91449015394D9702E850812B6938\",\"date\":556770960,\"hash\":\"D6F6EE4A007096A5B86068F8A33A06758F04D154A3ED861A2D7F45D1D06CC13D\",\"owner_funds\":\"2141900310\"},\"type\":\"transaction\",\"validated\":true}\n";
		testOfferQuality(a);
//		c.filterStream2(a);

	}
	
	@Test
	public void arbitrageAutobridge() throws Exception{
		/*
	  2017-07-12, 10:54:30 Made offer to buy 2 JPY.TokyoJPY at price 1.00579 JPY.MrRipple
    bought 0.693638 JPY.TokyoJPY at price 0.050171 XRP
    bought 0.100348 XRP at price 19.8 JPY.MrRipple
    bought 1.30636 JPY.TokyoJPY at price 0.050175 XRP 
    
    Output must be :
		buy
		quantity:-0.69363877168/JPY/r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN
		totalPrice:-0.6890598/JPY/rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS
		rate:0.9933744005069883
		buy
		quantity:-1.30636122832/JPY/r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN
		totalPrice:-1.2978306/JPY/rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS
		rate:0.9934771700953337
		 */
//		System.out.println("\t  2017-07-12, 10:54:30 Made offer to buy 2 JPY.TokyoJPY at price 1.00579 JPY.MrRipple\n    bought 0.693638 JPY.TokyoJPY at price 0.050171 XRP\n    bought 0.100348 XRP at price 19.8 JPY.MrRipple\n    bought 1.30636 JPY.TokyoJPY at price 0.050175 XRP ");
		String a1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"C237B8B27B94CA0598C6F0E3F59F3010E6F289757905A6149A1EC424016A3C1C\",\"ledger_index\":32206178,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2208900130\",\"Flags\":0,\"OwnerCount\":11,\"Sequence\":20710},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2208900145\",\"OwnerCount\":10,\"Sequence\":20709},\"PreviousTxnID\":\"30F7438AF68C764C353E26951A2ECC5C1C623330CD3999EA1072483178EECF3E\",\"PreviousTxnLgrSeq\":32206176}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590DAABAB881C9BD\",\"NewFields\":{\"ExchangeRate\":\"590DAABAB881C9BD\",\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590DAABAB881C9BD\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"000000000000001D\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"C07EA653AB5FC47F68D0CE89E33960C4B956FC22AD8290133445E3AC84DDF4F4\"}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"F62A77C955CD1CC01F675C9A88AEE2A885BE6B063119E5C9BEEBD7F65E37B3E6\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590DAABAB881C9BD\",\"OwnerNode\":\"0000000000000061\",\"Sequence\":20709,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"38.9925\"},\"TakerPays\":\"1500000\"}}}],\"TransactionIndex\":14,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"15\",\"Flags\":2147483648,\"LastLedgerSequence\":32206181,\"Sequence\":20709,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"38.9925\"},\"TakerPays\":\"1500000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3044022038F9C46835EDD3A0E42F34FF6ECAF3947800CA7ECBB53174D51EA0DC5F60626002203073FF9B00C78035EDE62F371ADD58E035ED576ED2D70739796E393A0FB6E4A5\",\"date\":556771370,\"hash\":\"63AF83C5507E1F73562308AE7C0832E255590B31BBD5AAD799D128E481A4BF37\",\"owner_funds\":\"15484.15651967901\"},\"type\":\"transaction\",\"validated\":true}\n";
		//		testOfferQuality(a1);
		c.filterStream2(a1);
	}
	
	@Test
	public void consumed() throws Exception{
		/*
		 * Pay Attention to OE paid and got. All those are relative to OC's account
		 */
		
//		String s1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"3147D0A8267BDF48016E133CBA551C4B8DB65E3C0AA3D389DA0AB72CEBE3B3FF\",\"ledger_index\":31197784,\"meta\":{\"AffectedNodes\":[{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"5B36B5FAF63B637516822DA5B5FF769B946062633EC030D3F1F2F8895481CC3A\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\",\"OwnerNode\":\"000000000000001D\",\"Sequence\":6704,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"2.00500004196167\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2641099029\",\"Flags\":0,\"OwnerCount\":11,\"Sequence\":6705},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2641099041\",\"OwnerCount\":10,\"Sequence\":6704},\"PreviousTxnID\":\"1E1C01D2512773DF590DC0BDFF34ABC3E021E5619083DC23F82275EE5B70D52C\",\"PreviousTxnLgrSeq\":31172673}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\",\"NewFields\":{\"ExchangeRate\":\"5423704423310A2A\",\"RootIndex\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"5BBC0F22F61D9224A110650CFE21CC0C4BE13098\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"BAA2CA764400796BCAE97E67E76ED919CCEEF204F195924BE2564818A94F684C\"}}],\"TransactionIndex\":11,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"Sequence\":6704,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"2.00500004196167\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3044022012C3969AEB3518A0040E0DBCD8C7D311DD14156A12091CEEE8674FBC58F6C601022014CFB8300B41ACC53A5B8A3D15AA8B90176F7C572FC2BE1BAE0D06D41D039A22\",\"date\":553228910,\"hash\":\"8685847FD831C4ABCB6CF4A6EA178F2F42B27A62A1E5B8E99D81A495F245B0C5\",\"owner_funds\":\"768.2814697566328\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(s1);
//		String s2 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"F3F1AC81092867365157B90A334552155A8EBBF6F22ADE9B7BE3B3F4830A6EB7\",\"ledger_index\":31198174,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"4E075A06C7846EE2\",\"Flags\":0,\"RootIndex\":\"159D72EF4335B750A75238AF9FAAF69533016C5B6F2E2F5E4E075A06C7846EE2\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000005553440000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"159D72EF4335B750A75238AF9FAAF69533016C5B6F2E2F5E4E075A06C7846EE2\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"Balance\":\"626375247\",\"Flags\":0,\"OwnerCount\":89,\"Sequence\":4147561},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"17AF00859F2337D1280B73D44D587C9B742D22BAB63CC5CB078D18551D2D987C\",\"PreviousFields\":{\"OwnerCount\":90},\"PreviousTxnID\":\"3EBADB7D1624601EE859239EE1F9034B37E38822D8518345F38F71039B0C5986\",\"PreviousTxnLgrSeq\":31198164}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"159D72EF4335B750A75238AF9FAAF69533016C5B6F2E2F5E4E075A06C7846EE2\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001583\",\"PreviousTxnID\":\"0D4BCE0E13D7E8AC2BBFE02BB648564E3FEE50112EA7E8E2993161B33CFD984B\",\"PreviousTxnLgrSeq\":31198138,\"Sequence\":287246,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"1897322342F843F7CB008B24BCC4B00DE1D8308F0B56B01DA6D6002A641C70FB\",\"PreviousFields\":{\"TakerGets\":\"262582505\",\"TakerPays\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"54.33646035852265\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5704086EBD5BFB9D\",\"Flags\":0,\"RootIndex\":\"1EF5CD59F9D51829A865694E5A0D6F832BB1858353E5AC375704086EBD5BFB9D\",\"TakerGetsCurrency\":\"0000000000000000000000005553440000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"1EF5CD59F9D51829A865694E5A0D6F832BB1858353E5AC375704086EBD5BFB9D\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5386.762933064541\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5384.762933064541\"}},\"PreviousTxnID\":\"1E1C01D2512773DF590DC0BDFF34ABC3E021E5619083DC23F82275EE5B70D52C\",\"PreviousTxnLgrSeq\":31172673}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"USD\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-30364.36882135015\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"USD\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"1000000\"},\"HighNode\":\"0000000000000924\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"000000000000038D\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"3A80D8E71DFDA7D08D76432A6560EBC56DC6349711ADDE6D3588896ADD84D4BF\",\"PreviousFields\":{\"Balance\":{\"currency\":\"USD\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-30281.23052500285\"}},\"PreviousTxnID\":\"0D4BCE0E13D7E8AC2BBFE02BB648564E3FEE50112EA7E8E2993161B33CFD984B\",\"PreviousTxnLgrSeq\":31198138}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-15710.17144061815\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rQ99sV1evyhsYTZ4nirpsUpED8yEdTFLvo\",\"value\":\"1000000000\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"0\"},\"LowNode\":\"0000000000000171\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"424C369959573102126C9345167ECEC04FEC453980FA1990270B10D6841B735E\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-15708.17040263141\"}},\"PreviousTxnID\":\"C0E7100555EDD386BCAEF0B84C8D687EA72C0C8FC21C0CF0422D0C1DD6F1A188\",\"PreviousTxnLgrSeq\":31198099}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"159D72EF4335B750A75238AF9FAAF69533016C5B6F2E2F5E4E075A06C78C651A\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001583\",\"Sequence\":287245,\"TakerGets\":\"1932918140\",\"TakerPays\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"399.980683963537\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"4BE9181606DF9D5CB19AABFE3A33868D277AA5E17AC5460B2E078BF9071C96B2\",\"PreviousFields\":{\"TakerGets\":\"2072103840\",\"TakerPays\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"428.7825199523197\"}},\"PreviousTxnID\":\"1B643B47839C11AF41ACFBAA780EB80980A52480382A106BB470C037F06D827D\",\"PreviousTxnLgrSeq\":31196231}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"000000000000001D\",\"PreviousTxnID\":\"8685847FD831C4ABCB6CF4A6EA178F2F42B27A62A1E5B8E99D81A495F245B0C5\",\"PreviousTxnLgrSeq\":31197784,\"Sequence\":6704,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"0\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"5B36B5FAF63B637516822DA5B5FF769B946062633EC030D3F1F2F8895481CC3A\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"2.00500004196167\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-14937.20672120384\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"value\":\"0\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"000000000000046C\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"601AA9619F786BFA936D2B438F863D98D8755DFF72AA3ADA1D0F33DCAFC26884\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-4431.49966822394\"}},\"PreviousTxnID\":\"277AA0F3C821BBB2D06198E1F605624E2FBAB09694BFE1EF9A8F8AC0E38F03FF\",\"PreviousTxnLgrSeq\":31198061}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000001584\",\"IndexPrevious\":\"0000000000001582\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"6319670A84177029A5367D9669F1D3173E8C624ECD07268843ADD45585306E1D\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2641099029\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":6705},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"OwnerCount\":11},\"PreviousTxnID\":\"8685847FD831C4ABCB6CF4A6EA178F2F42B27A62A1E5B8E99D81A495F245B0C5\",\"PreviousTxnLgrSeq\":31197784}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rQ99sV1evyhsYTZ4nirpsUpED8yEdTFLvo\",\"Balance\":\"205193650\",\"Flags\":0,\"OwnerCount\":13,\"Sequence\":3418},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"731BBDA08454728AA46FDDBEDC29777FD7CB2BF9A7A336A7594E61E1F443CD6C\",\"PreviousFields\":{\"Balance\":\"205278620\"},\"PreviousTxnID\":\"C0E7100555EDD386BCAEF0B84C8D687EA72C0C8FC21C0CF0422D0C1DD6F1A188\",\"PreviousTxnLgrSeq\":31198099}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"000000000001DED9\",\"IndexPrevious\":\"000000000001DED7\",\"Owner\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"RootIndex\":\"11D3A3E72663637FB30AA99E44D68AD796E9E61B58A423AA1F090EBDDEA920E0\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7E191B6887A2C046949F289D5A264CFEBD22F42E772A89709C4077AFF76AB3C6\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1607270752844\",\"Flags\":0,\"OwnerCount\":4141,\"Sequence\":287487},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1607672521049\",\"OwnerCount\":4142},\"PreviousTxnID\":\"60D9B99987788602F825C1E6A8D62D8B3DF5C22AF647C9330874B581E311EA00\",\"PreviousTxnLgrSeq\":31198139}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"USD\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-83.304572931693\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"USD\",\"issuer\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"value\":\"4500\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"00000000000002A7\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"83D96BA5914D8C73492409E8AD6E8553B4AB7E92AD2E9B06A9211CF0A6F64AFD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"USD\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-166.6091458716929\"}},\"PreviousTxnID\":\"277AA0F3C821BBB2D06198E1F605624E2FBAB09694BFE1EF9A8F8AC0E38F03FF\",\"PreviousTxnLgrSeq\":31198061}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"BookDirectory\":\"1EF5CD59F9D51829A865694E5A0D6F832BB1858353E5AC375704086EBD5BFB9D\",\"BookNode\":\"0000000000000000\",\"Flags\":65536,\"OwnerNode\":\"000000000001DED8\",\"PreviousTxnID\":\"CD8F33D96E898D92C3C8723F561D8746AE456B4D604952642D84024450FC295C\",\"PreviousTxnLgrSeq\":31198162,\"Sequence\":4147519,\"TakerGets\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"887AC5112ABFEE3FC8C9E8035D757E5B01D54CE9F6C445D8664DE7DAA4D8C628\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"83.30457294\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"9456.49872834\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5423704423310A2A\",\"Flags\":0,\"RootIndex\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"5BBC0F22F61D9224A110650CFE21CC0C4BE13098\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"Balance\":\"1143678946\",\"Flags\":0,\"OwnerCount\":5,\"Sequence\":31199},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"A1A60AF78F370DA28CF59719A480A9063D663883461EF62DA061486812C22D6E\",\"PreviousFields\":{\"Balance\":\"1589825771\"},\"PreviousTxnID\":\"37C71DA48C32E274922E89BF8C399DA17209593AC6C7DF44647BCBD010CDF43C\",\"PreviousTxnLgrSeq\":31198092}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"BAA2CA764400796BCAE97E67E76ED919CCEEF204F195924BE2564818A94F684C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-3.84275115686\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"00000000000003E2\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"C52C2582259D3E1D458C585F6CEEE727E3756BAC4197A7875800657C6504AB7A\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-20007.97694403938\"}},\"PreviousTxnID\":\"339A025C45D03B06FA59498D6789A2D30FCD9171CC10BACC5556467CADBDE652\",\"PreviousTxnLgrSeq\":31197759}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D50085DA5558D5F6D\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":31198,\"TakerGets\":\"1043677956\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"24576.1580022201\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"C616EEAA4F8C5A50583ED585823051598F8DC6E8EC56CE9AA1BC9B0E39E521AD\",\"PreviousFields\":{\"TakerGets\":\"1489824781\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"35081.8650552\"}},\"PreviousTxnID\":\"37C71DA48C32E274922E89BF8C399DA17209593AC6C7DF44647BCBD010CDF43C\",\"PreviousTxnLgrSeq\":31198092}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"766.2764697146712\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"0\"},\"HighNode\":\"000000000000017D\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"000000000000001D\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"D17806D3A3F213F2DF5D5F9319C0354A47B787CB816EE9F4838E094AA96EE5E3\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"768.2814697566328\"}},\"PreviousTxnID\":\"1E1C01D2512773DF590DC0BDFF34ABC3E021E5619083DC23F82275EE5B70D52C\",\"PreviousTxnLgrSeq\":31172673}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"Balance\":\"3586999952\",\"Flags\":0,\"OwnerCount\":1,\"Sequence\":5},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E25E8D73F679C993524E89774F9AEC239B2C849C5985DBF1D353FA470E8323FB\",\"PreviousFields\":{\"Balance\":\"2738999964\",\"Sequence\":4},\"PreviousTxnID\":\"947480C130254C6E34447B66E65B309AE24C676A0CD7D1618CC527E77992A9FB\",\"PreviousTxnLgrSeq\":30639647}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rQ99sV1evyhsYTZ4nirpsUpED8yEdTFLvo\",\"BookDirectory\":\"1BBEF97EDE88D40CEE2ADE6FEF121166AFE80D99EBADB01A50085DDC2A723000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":3417,\"TakerGets\":\"132943890\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"3130.828559381831\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"E6BFEEEDF09F14BC8A19A8E9B694D4EDAFC1DC7FD9E92BD52C403AF028A29BA6\",\"PreviousFields\":{\"TakerGets\":\"133028860\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"3132.829597368578\"}},\"PreviousTxnID\":\"C0E7100555EDD386BCAEF0B84C8D687EA72C0C8FC21C0CF0422D0C1DD6F1A188\",\"PreviousTxnLgrSeq\":31198099}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-251324.3851829059\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"value\":\"450000\"},\"HighNode\":\"0000000000000001\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"00000000000002A9\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"E78936A42475EE0086C2AF9FB1417D8076390AFF0DEAD33E747F155ABD8851EA\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-241867.886454566\"}},\"PreviousTxnID\":\"277AA0F3C821BBB2D06198E1F605624E2FBAB09694BFE1EF9A8F8AC0E38F03FF\",\"PreviousTxnLgrSeq\":31198061}}],\"TransactionIndex\":0,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"Amount\":\"848000000\",\"Destination\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":31198176,\"Paths\":[[{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"XRP\",\"type\":16,\"type_hex\":\"0000000000000010\"}],[{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"XRP\",\"type\":16,\"type_hex\":\"0000000000000010\"}],[{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"XRP\",\"type\":16,\"type_hex\":\"0000000000000010\"}],[{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"CNY\",\"issuer\":\"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"XRP\",\"type\":16,\"type_hex\":\"0000000000000010\"}]],\"SendMax\":{\"currency\":\"JPY\",\"issuer\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"value\":\"20204.17553\"},\"Sequence\":4,\"SigningPubKey\":\"03A0F6133CB6DD78872B57AF0E5EF062C775E1BB17F3B667A44D13356B90EA09A0\",\"TransactionType\":\"Payment\",\"TxnSignature\":\"304502210093D441D74C66571BA283AE4926F72802EF56DEECFBCB178305D21AD5D404DEEE02201A5EA72345B3F006BCC6B56D14C7353884398CCD438A66C3C239AB5038496D7A\",\"date\":553230260,\"hash\":\"3A748E836A437A1417C9C23A48935CCFCDB478B3F01B0BFFE317EAE2CEB31BB8\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(s2);
//		c.filterStream2(s1);
//		String s3 = " {\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"F3F1AC81092867365157B90A334552155A8EBBF6F22ADE9B7BE3B3F4830A6EB7\",\"ledger_index\":31198174,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"4E075A06C7846EE2\",\"Flags\":0,\"RootIndex\":\"159D72EF4335B750A75238AF9FAAF69533016C5B6F2E2F5E4E075A06C7846EE2\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000005553440000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"159D72EF4335B750A75238AF9FAAF69533016C5B6F2E2F5E4E075A06C7846EE2\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"Balance\":\"626375247\",\"Flags\":0,\"OwnerCount\":89,\"Sequence\":4147561},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"17AF00859F2337D1280B73D44D587C9B742D22BAB63CC5CB078D18551D2D987C\",\"PreviousFields\":{\"OwnerCount\":90},\"PreviousTxnID\":\"3EBADB7D1624601EE859239EE1F9034B37E38822D8518345F38F71039B0C5986\",\"PreviousTxnLgrSeq\":31198164}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"159D72EF4335B750A75238AF9FAAF69533016C5B6F2E2F5E4E075A06C7846EE2\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001583\",\"PreviousTxnID\":\"0D4BCE0E13D7E8AC2BBFE02BB648564E3FEE50112EA7E8E2993161B33CFD984B\",\"PreviousTxnLgrSeq\":31198138,\"Sequence\":287246,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"1897322342F843F7CB008B24BCC4B00DE1D8308F0B56B01DA6D6002A641C70FB\",\"PreviousFields\":{\"TakerGets\":\"262582505\",\"TakerPays\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"54.33646035852265\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5704086EBD5BFB9D\",\"Flags\":0,\"RootIndex\":\"1EF5CD59F9D51829A865694E5A0D6F832BB1858353E5AC375704086EBD5BFB9D\",\"TakerGetsCurrency\":\"0000000000000000000000005553440000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"1EF5CD59F9D51829A865694E5A0D6F832BB1858353E5AC375704086EBD5BFB9D\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5386.762933064541\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5384.762933064541\"}},\"PreviousTxnID\":\"1E1C01D2512773DF590DC0BDFF34ABC3E021E5619083DC23F82275EE5B70D52C\",\"PreviousTxnLgrSeq\":31172673}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"USD\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-30364.36882135015\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"USD\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"1000000\"},\"HighNode\":\"0000000000000924\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"000000000000038D\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"3A80D8E71DFDA7D08D76432A6560EBC56DC6349711ADDE6D3588896ADD84D4BF\",\"PreviousFields\":{\"Balance\":{\"currency\":\"USD\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-30281.23052500285\"}},\"PreviousTxnID\":\"0D4BCE0E13D7E8AC2BBFE02BB648564E3FEE50112EA7E8E2993161B33CFD984B\",\"PreviousTxnLgrSeq\":31198138}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-15710.17144061815\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rQ99sV1evyhsYTZ4nirpsUpED8yEdTFLvo\",\"value\":\"1000000000\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"0\"},\"LowNode\":\"0000000000000171\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"424C369959573102126C9345167ECEC04FEC453980FA1990270B10D6841B735E\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-15708.17040263141\"}},\"PreviousTxnID\":\"C0E7100555EDD386BCAEF0B84C8D687EA72C0C8FC21C0CF0422D0C1DD6F1A188\",\"PreviousTxnLgrSeq\":31198099}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"159D72EF4335B750A75238AF9FAAF69533016C5B6F2E2F5E4E075A06C78C651A\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001583\",\"Sequence\":287245,\"TakerGets\":\"1932918140\",\"TakerPays\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"399.980683963537\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"4BE9181606DF9D5CB19AABFE3A33868D277AA5E17AC5460B2E078BF9071C96B2\",\"PreviousFields\":{\"TakerGets\":\"2072103840\",\"TakerPays\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"428.7825199523197\"}},\"PreviousTxnID\":\"1B643B47839C11AF41ACFBAA780EB80980A52480382A106BB470C037F06D827D\",\"PreviousTxnLgrSeq\":31196231}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"000000000000001D\",\"PreviousTxnID\":\"8685847FD831C4ABCB6CF4A6EA178F2F42B27A62A1E5B8E99D81A495F245B0C5\",\"PreviousTxnLgrSeq\":31197784,\"Sequence\":6704,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"0\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"5B36B5FAF63B637516822DA5B5FF769B946062633EC030D3F1F2F8895481CC3A\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"2.00500004196167\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-14937.20672120384\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"value\":\"0\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"000000000000046C\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"601AA9619F786BFA936D2B438F863D98D8755DFF72AA3ADA1D0F33DCAFC26884\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-4431.49966822394\"}},\"PreviousTxnID\":\"277AA0F3C821BBB2D06198E1F605624E2FBAB09694BFE1EF9A8F8AC0E38F03FF\",\"PreviousTxnLgrSeq\":31198061}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000001584\",\"IndexPrevious\":\"0000000000001582\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"6319670A84177029A5367D9669F1D3173E8C624ECD07268843ADD45585306E1D\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2641099029\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":6705},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"OwnerCount\":11},\"PreviousTxnID\":\"8685847FD831C4ABCB6CF4A6EA178F2F42B27A62A1E5B8E99D81A495F245B0C5\",\"PreviousTxnLgrSeq\":31197784}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rQ99sV1evyhsYTZ4nirpsUpED8yEdTFLvo\",\"Balance\":\"205193650\",\"Flags\":0,\"OwnerCount\":13,\"Sequence\":3418},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"731BBDA08454728AA46FDDBEDC29777FD7CB2BF9A7A336A7594E61E1F443CD6C\",\"PreviousFields\":{\"Balance\":\"205278620\"},\"PreviousTxnID\":\"C0E7100555EDD386BCAEF0B84C8D687EA72C0C8FC21C0CF0422D0C1DD6F1A188\",\"PreviousTxnLgrSeq\":31198099}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"000000000001DED9\",\"IndexPrevious\":\"000000000001DED7\",\"Owner\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"RootIndex\":\"11D3A3E72663637FB30AA99E44D68AD796E9E61B58A423AA1F090EBDDEA920E0\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7E191B6887A2C046949F289D5A264CFEBD22F42E772A89709C4077AFF76AB3C6\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1607270752844\",\"Flags\":0,\"OwnerCount\":4141,\"Sequence\":287487},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1607672521049\",\"OwnerCount\":4142},\"PreviousTxnID\":\"60D9B99987788602F825C1E6A8D62D8B3DF5C22AF647C9330874B581E311EA00\",\"PreviousTxnLgrSeq\":31198139}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"USD\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-83.304572931693\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"USD\",\"issuer\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"value\":\"4500\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"00000000000002A7\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"83D96BA5914D8C73492409E8AD6E8553B4AB7E92AD2E9B06A9211CF0A6F64AFD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"USD\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-166.6091458716929\"}},\"PreviousTxnID\":\"277AA0F3C821BBB2D06198E1F605624E2FBAB09694BFE1EF9A8F8AC0E38F03FF\",\"PreviousTxnLgrSeq\":31198061}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"BookDirectory\":\"1EF5CD59F9D51829A865694E5A0D6F832BB1858353E5AC375704086EBD5BFB9D\",\"BookNode\":\"0000000000000000\",\"Flags\":65536,\"OwnerNode\":\"000000000001DED8\",\"PreviousTxnID\":\"CD8F33D96E898D92C3C8723F561D8746AE456B4D604952642D84024450FC295C\",\"PreviousTxnLgrSeq\":31198162,\"Sequence\":4147519,\"TakerGets\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"887AC5112ABFEE3FC8C9E8035D757E5B01D54CE9F6C445D8664DE7DAA4D8C628\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"83.30457294\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"9456.49872834\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"5423704423310A2A\",\"Flags\":0,\"RootIndex\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"5BBC0F22F61D9224A110650CFE21CC0C4BE13098\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"95434F0A808A3709E920267ACDD961BAF443AAB177A224E85423704423310A2A\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"Balance\":\"1143678946\",\"Flags\":0,\"OwnerCount\":5,\"Sequence\":31199},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"A1A60AF78F370DA28CF59719A480A9063D663883461EF62DA061486812C22D6E\",\"PreviousFields\":{\"Balance\":\"1589825771\"},\"PreviousTxnID\":\"37C71DA48C32E274922E89BF8C399DA17209593AC6C7DF44647BCBD010CDF43C\",\"PreviousTxnLgrSeq\":31198092}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"BAA2CA764400796BCAE97E67E76ED919CCEEF204F195924BE2564818A94F684C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-3.84275115686\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"00000000000003E2\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"C52C2582259D3E1D458C585F6CEEE727E3756BAC4197A7875800657C6504AB7A\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-20007.97694403938\"}},\"PreviousTxnID\":\"339A025C45D03B06FA59498D6789A2D30FCD9171CC10BACC5556467CADBDE652\",\"PreviousTxnLgrSeq\":31197759}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D50085DA5558D5F6D\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":31198,\"TakerGets\":\"1043677956\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"24576.1580022201\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"C616EEAA4F8C5A50583ED585823051598F8DC6E8EC56CE9AA1BC9B0E39E521AD\",\"PreviousFields\":{\"TakerGets\":\"1489824781\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"35081.8650552\"}},\"PreviousTxnID\":\"37C71DA48C32E274922E89BF8C399DA17209593AC6C7DF44647BCBD010CDF43C\",\"PreviousTxnLgrSeq\":31198092}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"766.2764697146712\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"0\"},\"HighNode\":\"000000000000017D\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"000000000000001D\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"D17806D3A3F213F2DF5D5F9319C0354A47B787CB816EE9F4838E094AA96EE5E3\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"768.2814697566328\"}},\"PreviousTxnID\":\"1E1C01D2512773DF590DC0BDFF34ABC3E021E5619083DC23F82275EE5B70D52C\",\"PreviousTxnLgrSeq\":31172673}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"Balance\":\"3586999952\",\"Flags\":0,\"OwnerCount\":1,\"Sequence\":5},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E25E8D73F679C993524E89774F9AEC239B2C849C5985DBF1D353FA470E8323FB\",\"PreviousFields\":{\"Balance\":\"2738999964\",\"Sequence\":4},\"PreviousTxnID\":\"947480C130254C6E34447B66E65B309AE24C676A0CD7D1618CC527E77992A9FB\",\"PreviousTxnLgrSeq\":30639647}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rQ99sV1evyhsYTZ4nirpsUpED8yEdTFLvo\",\"BookDirectory\":\"1BBEF97EDE88D40CEE2ADE6FEF121166AFE80D99EBADB01A50085DDC2A723000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":3417,\"TakerGets\":\"132943890\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"3130.828559381831\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"E6BFEEEDF09F14BC8A19A8E9B694D4EDAFC1DC7FD9E92BD52C403AF028A29BA6\",\"PreviousFields\":{\"TakerGets\":\"133028860\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"value\":\"3132.829597368578\"}},\"PreviousTxnID\":\"C0E7100555EDD386BCAEF0B84C8D687EA72C0C8FC21C0CF0422D0C1DD6F1A188\",\"PreviousTxnLgrSeq\":31198099}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-251324.3851829059\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rK3Grwc6uQS9G2Mfff1S5UUdnttCRVwtEN\",\"value\":\"450000\"},\"HighNode\":\"0000000000000001\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"00000000000002A9\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"E78936A42475EE0086C2AF9FB1417D8076390AFF0DEAD33E747F155ABD8851EA\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-241867.886454566\"}},\"PreviousTxnID\":\"277AA0F3C821BBB2D06198E1F605624E2FBAB09694BFE1EF9A8F8AC0E38F03FF\",\"PreviousTxnLgrSeq\":31198061}}],\"TransactionIndex\":0,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"Amount\":\"848000000\",\"Destination\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":31198176,\"Paths\":[[{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"USD\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"XRP\",\"type\":16,\"type_hex\":\"0000000000000010\"}],[{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"XRP\",\"type\":16,\"type_hex\":\"0000000000000010\"}],[{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"JPY\",\"issuer\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"r94s8px6kSw1uZ1MV98dhSRTvc6VMPoPcN\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"XRP\",\"type\":16,\"type_hex\":\"0000000000000010\"}],[{\"account\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"CNY\",\"issuer\":\"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\"type\":48,\"type_hex\":\"0000000000000030\"},{\"account\":\"rKiCet8SdvWxPXnAgYarFUXMh1zCPz432Y\",\"type\":1,\"type_hex\":\"0000000000000001\"},{\"currency\":\"XRP\",\"type\":16,\"type_hex\":\"0000000000000010\"}]],\"SendMax\":{\"currency\":\"JPY\",\"issuer\":\"r47VKxnLmppkc9gJLp3Z2imGcW8ETdoTQm\",\"value\":\"20204.17553\"},\"Sequence\":4,\"SigningPubKey\":\"03A0F6133CB6DD78872B57AF0E5EF062C775E1BB17F3B667A44D13356B90EA09A0\",\"TransactionType\":\"Payment\",\"TxnSignature\":\"304502210093D441D74C66571BA283AE4926F72802EF56DEECFBCB178305D21AD5D404DEEE02201A5EA72345B3F006BCC6B56D14C7353884398CCD438A66C3C239AB5038496D7A\",\"date\":553230260,\"hash\":\"3A748E836A437A1417C9C23A48935CCFCDB478B3F01B0BFFE317EAE2CEB31BB8\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(s3);
//		c.filterStream2(s3);
	}
	
//	@Test
//	public void consume() throws Exception{
//		String consumeOneHalf = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"A53C42A135396D1C9B7708E96977CB71454F4AE6C7900D0CF30B62AEC3FE5851\",\"ledger_index\":30854512,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A7AB7B21D6FCE\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25493.59330038829\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25552.70487260873\"}},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000001044\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"3B2BE34F74E8E10113F2D4C84053344F678D64E12D537D8D931D8981DF3AC7F4\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2517023578\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5451},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2515023698\",\"Sequence\":5450},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1686510443008\",\"Flags\":0,\"OwnerCount\":2546,\"Sequence\":229780},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1686512443008\",\"OwnerCount\":2547},\"PreviousTxnID\":\"9563022137D4F43F080FE59F74847D41C4C3222DB4FC0A70560AFDC33771712A\",\"PreviousTxnLgrSeq\":30854493}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7C76B2D09\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001045\",\"Sequence\":229778,\"TakerGets\":\"7885940\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"232.6099563824587\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"83F71EE4B60B9016D25138FCE5D0D1E8DEF8C794940B42B53C8082516F1BEF40\",\"PreviousFields\":{\"TakerGets\":\"8442902\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"249.0385503771742\"}},\"PreviousTxnID\":\"5A2B58D139CDEADCD4B1F6DDE2CB766E5C9BECCD893AEB6747558D76E6586785\",\"PreviousTxnLgrSeq\":30854493}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7AB7B21D6FCE\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001045\",\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492,\"Sequence\":229774,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"85794675649594FC8F8595FB5BB02342ABA3D5801DA543C13BCE89558BA3021C\",\"PreviousFields\":{\"TakerGets\":\"1443038\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"42.56499105563746\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-25536929.46912782\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FB9399D7485EA21D73E649E9F821B8C10A1008285E32107B6F30F934723EB5C8\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-25536870.47554278\"}},\"PreviousTxnID\":\"D3A84F7F810AC01AE88B7C120A01DB5694DE4775AE3DBE2613C849EBBA75C6F3\",\"PreviousTxnLgrSeq\":30854492}}],\"TransactionIndex\":4,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"120\",\"Flags\":2147483648,\"LastLedgerSequence\":30854514,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5450,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"60\"},\"TakerPays\":\"2000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100EE1BC622B0768D2F01515AE8BC8157EA3EF361BB65C9E680C44CE7C87066CE4402207594042DD3E0FD7C8D0B59B84C96ECD0BF8780CB85B893FD5626F877CB3FB6F5\",\"date\":552025652,\"hash\":\"024C1B17CE1C35425550B6CC5676230B488C5680CADE21D226F8EA2D3594204D\",\"owner_funds\":\"25493.59330038829\"},\"type\":\"transaction\",\"validated\":true}\r\n";
//		String consumeOneHalfStillRemains1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"BD67C885A799D7CF8DDC5986C5D4EBED0BF628C9EF120F1463A77A5932BDE8D0\",\"ledger_index\":30855037,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A7B0266166000\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7B0266166000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7B0266166000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25434.47530038829\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"25493.59330038829\"}},\"PreviousTxnID\":\"024C1B17CE1C35425550B6CC5676230B488C5680CADE21D226F8EA2D3594204D\",\"PreviousTxnLgrSeq\":30854512}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"594A0491BDA278A3B4E112B046046EF41246B1F70BAD846F39E985897F99C8F3\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C05D0F5BCC3CA\",\"OwnerNode\":\"0000000000000018\",\"Sequence\":5451,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"59.1\"},\"TakerPays\":\"2000000\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2519023566\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5452},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2517023578\",\"OwnerCount\":9,\"Sequence\":5451},\"PreviousTxnID\":\"024C1B17CE1C35425550B6CC5676230B488C5680CADE21D226F8EA2D3594204D\",\"PreviousTxnLgrSeq\":30854512}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4931.7762257212\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4872.7762257212\"}},\"PreviousTxnID\":\"5119074CF81B535F92AF56E2202343A5C2896668BFA616D611A303F8E19DEB9E\",\"PreviousTxnLgrSeq\":30757891}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C05D0F5BCC3CA\",\"NewFields\":{\"ExchangeRate\":\"590C05D0F5BCC3CA\",\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C05D0F5BCC3CA\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A7B0266166000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"7D3DE72B6F0253FF415E6E0BE4B3A36A40B042795E2C9D34899F03DB0D2814F9\",\"PreviousTxnLgrSeq\":30855033,\"Sequence\":37,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"D0F92EBE08ECA281A46EB111CFEB2A1B56D32FBEC89945A7847F8CE8FB44F00E\",\"PreviousFields\":{\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"59\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3429983993\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":38},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3431983993\",\"OwnerCount\":3},\"PreviousTxnID\":\"7D3DE72B6F0253FF415E6E0BE4B3A36A40B042795E2C9D34899F03DB0D2814F9\",\"PreviousTxnLgrSeq\":30855033}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"RootIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"}}],\"TransactionIndex\":8,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30855039,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5451,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"118.2\"},\"TakerPays\":\"4000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100F4A42EDB93AB51DFAE34C9C499B5DE922E8F52796FBB214FC8A0520809A6E78A022065A9BDCCFFAC4485C7C44378BD3DB5F6CE4081FDF1F7324806C0546D6D00DE43\",\"date\":552027610,\"hash\":\"B3ECE9E61BEA532BC92DAC8D593D2F595C78D3A2DDC8861ED60685FB2D290F4D\",\"owner_funds\":\"25434.47530038829\"},\"type\":\"transaction\",\"validated\":true}\r\n";
//		String consumeOneHalfStillRemains2 = " {\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"5F362744C0BBA4CA4ED9C9AF55A4BDD0036F74A11311D8E8ED406947F15192AF\",\"ledger_index\":30866350,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"E9ACC38D67286EDE5D6E4A76C68A6CDCFC2C423CF856D2DF1CA7257FE46480A9\",\"PreviousTxnLgrSeq\":30866347,\"Sequence\":49,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"0BEE9F84EF5B621C558B8E18FAA7161129145956C44BE17E02624DBDA3266782\",\"PreviousFields\":{\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"58.6\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A68D1C9312000\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24256.81841590657\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24315.53561590657\"}},\"PreviousTxnID\":\"B7D883EC0A5C2F5E8DB36B224B02DE228EBFA41604E39EE0759E213E02B25050\",\"PreviousTxnLgrSeq\":30866329}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2559023398\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5466},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2557023410\",\"OwnerCount\":9,\"Sequence\":5465},\"PreviousTxnID\":\"E423770B348A25B142DB99249E44B751208B515CAC85D8D26FF057052FB06DF1\",\"PreviousTxnLgrSeq\":30866343}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5984.407355877956\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5925.807355877956\"}},\"PreviousTxnID\":\"B7D883EC0A5C2F5E8DB36B224B02DE228EBFA41604E39EE0759E213E02B25050\",\"PreviousTxnLgrSeq\":30866329}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA2\",\"NewFields\":{\"ExchangeRate\":\"590C2013D5C24EA2\",\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA2\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"CB812A1ABB9D41D653857DF779D4DF1B0C67D138E1ED747A19695A4EB6C1D762\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590C2013D5C24EA2\",\"OwnerNode\":\"0000000000000018\",\"Sequence\":5465,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"87.9\"},\"TakerPays\":\"3000000\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3393983741\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":50},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3395983741\",\"OwnerCount\":3},\"PreviousTxnID\":\"E9ACC38D67286EDE5D6E4A76C68A6CDCFC2C423CF856D2DF1CA7257FE46480A9\",\"PreviousTxnLgrSeq\":30866347}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"RootIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"}}],\"TransactionIndex\":8,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30866352,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5465,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"146.5\"},\"TakerPays\":\"5000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100B44CEDC64776D29B329199B5976351E2B1C150761C4984F13260D6D4D21872890220260E89408A5B1C7EAA2EC4951EE0C26C900CE500EE49A043A41C0FEF31C41554\",\"date\":552067730,\"hash\":\"5ADB0FDB436D248AE6FD7192DC557AF89753F347F0C0EE2E42C4280DF291C5F7\",\"owner_funds\":\"24256.81841590657\"},\"type\":\"transaction\",\"validated\":true}\r\n";
//		System.out.println("consumeOneHalf- Ours all consumed 1");
//		testOfferQuality(consumeOneHalf);
//		c.filterStream2(consumeOneHalf);
//		System.out.println("consume - ours all consumed 2");
//		String consumeOneHalf2 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"C3C04E16DD32580668852A818FFC544B0AEF3C08EED981E60F949E18E74758D5\",\"ledger_index\":30866456,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24168.74261590657\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24198.10121590657\"}},\"PreviousTxnID\":\"21E64C8C2D106FA94C60CDE58F49A7EC9543558246777EABAFA1650F7CDA63C2\",\"PreviousTxnLgrSeq\":30866413}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":51,\"TakerGets\":\"1000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29.3\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"47556CC80BECFE5978A442F2B111911C2094C6AD57242D137A9C7D9C10C45058\",\"PreviousFields\":{\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"58.6\"}},\"PreviousTxnID\":\"6E8AFBA36734F820E29EC67C3F254E180E6BF68B6DCC7F3AFE0C0ACCAD1F4F02\",\"PreviousTxnLgrSeq\":30866453}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2562023362\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5469},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2561023374\",\"Sequence\":5468},\"PreviousTxnID\":\"21E64C8C2D106FA94C60CDE58F49A7EC9543558246777EABAFA1650F7CDA63C2\",\"PreviousTxnLgrSeq\":30866413}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6072.307355877956\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6043.007355877956\"}},\"PreviousTxnID\":\"21E64C8C2D106FA94C60CDE58F49A7EC9543558246777EABAFA1650F7CDA63C2\",\"PreviousTxnLgrSeq\":30866413}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3390983717\",\"Flags\":0,\"OwnerCount\":3,\"Sequence\":52},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3391983717\"},\"PreviousTxnID\":\"6E8AFBA36734F820E29EC67C3F254E180E6BF68B6DCC7F3AFE0C0ACCAD1F4F02\",\"PreviousTxnLgrSeq\":30866453}}],\"TransactionIndex\":1,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30866458,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5468,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"29.3\"},\"TakerPays\":\"1000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100B278AEEE88A2F52575EADF5B71475B8AB20AD080EDC25F3439C0238FD2C8EB0502200B0D1A1BA171D400DD75F9F45CB1AE476F3E2DC86F7832921DC216ABFC739093\",\"date\":552068092,\"hash\":\"99854B0A28130EE77EB4949AD3B90E9EA8CC207397F2892F8794B7BB10584D1E\",\"owner_funds\":\"24168.74261590657\"},\"type\":\"transaction\",\"validated\":true}\r\n";
//		testOfferQuality(consumeOneHalf2);
//		c.filterStream2(consumeOneHalf2);
//
//		System.out.println("consumeOneHalf - Ours still remains 1");
//		testOfferQuality(consumeOneHalfStillRemains1);
//		c.filterStream2(consumeOneHalfStillRemains1);
//		System.out.println("consumeOneHalf - Ours still remains 2");
//		testOfferQuality(consumeOneHalfStillRemains2);
//		c.filterStream2(consumeOneHalfStillRemains2);
//
//		System.out.println("consume fully match 1 ");
//		String consumeFullyMatch1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"CCE62164682DE68112F0CE0E688B6A17E68EC77C21DD6B9472E275834C97E26A\",\"ledger_index\":30866413,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A68D1C9312000\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24198.10121590657\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24256.81841590657\"}},\"PreviousTxnID\":\"5ADB0FDB436D248AE6FD7192DC557AF89753F347F0C0EE2E42C4280DF291C5F7\",\"PreviousTxnLgrSeq\":30866350}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2561023374\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5468},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2559023386\",\"Sequence\":5467},\"PreviousTxnID\":\"1BE34C4C2B00DFE4A4FA3E5CAA33398018CFA13AB19AB9E945B64DF3928C8E0C\",\"PreviousTxnLgrSeq\":30866404}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"6043.007355877956\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001BC\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"9E03D12B7281B41A487F01494BCE1A7099624E50E4FEF5ACE11B2D5BB3C353FB\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"5984.407355877956\"}},\"PreviousTxnID\":\"5ADB0FDB436D248AE6FD7192DC557AF89753F347F0C0EE2E42C4280DF291C5F7\",\"PreviousTxnLgrSeq\":30866350}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"Balance\":\"3391983729\",\"Flags\":0,\"OwnerCount\":2,\"Sequence\":51},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"E828FC718630DEC1E542D4D2A50074CDB7B3183062FBC59D6E88B63198BF27BF\",\"PreviousFields\":{\"Balance\":\"3393983729\",\"OwnerCount\":3},\"PreviousTxnID\":\"77687E2805F496EF8F7CDD05AEB45AE1EF6860CED484B8A6B3D6392E92BC855A\",\"PreviousTxnLgrSeq\":30866410}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"RootIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"EE65814EFC9DC9B26D4EE2C3554D7F1DF10BD11DA90C25344690F91AF0A2E9FE\"}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rHMjZANhquizS74FutV3CNoWfQcoVkBxf\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A68D1C9312000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"77687E2805F496EF8F7CDD05AEB45AE1EF6860CED484B8A6B3D6392E92BC855A\",\"PreviousTxnLgrSeq\":30866410,\"Sequence\":50,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"F39D5B3EDE43CDA45620E1DBEA51B172E645AEFB0F8B5D2FFE2C566F6A1F1833\",\"PreviousFields\":{\"TakerGets\":\"2000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"58.6\"}}}}],\"TransactionIndex\":1,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30866416,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5467,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"58.6\"},\"TakerPays\":\"2000000\",\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100D4A91F74421D779A6588FE59C67D7F91E9E8BA6D6272CFADBADC6920E38206C602203D123FD05686FC86A6F1895577EDEDC713E61F96A4E4252583283462BDE60D86\",\"date\":552067942,\"hash\":\"21E64C8C2D106FA94C60CDE58F49A7EC9543558246777EABAFA1650F7CDA63C2\",\"owner_funds\":\"24198.10121590657\"},\"type\":\"transaction\",\"validated\":true}\r\n";
//		testOfferQuality(consumeFullyMatch1);
//		c.filterStream2(consumeFullyMatch1);
//
//	}
//	
////	@Test
////	public void autoBridge() throws Exception{
////		Common c = Common.newInstance( Config.build(configPath));
////		System.out.println("Autobridge with single element majority");
////		String oneToOne = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"DE54C3757678AC1A4153B1357D0DE94264BC5F167183B7FE5625967ABC0DBCD0\",\"ledger_index\":30927336,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5D2184238194439F\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000012\",\"Sequence\":664,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3.07\"},\"TakerPays\":\"2896226416\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"0ED3CD935ABB3FCA15ABB71796A9EE33B63E8ACC921FBA43156F1A592D825460\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3.08\"},\"TakerPays\":\"2905660378\"},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"20556.88790576798\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"20817.34172866395\"}},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.588899891940538\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.578899891940538\"}},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D5009C9EE45BFE7F4\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000019\",\"Sequence\":909,\"TakerGets\":\"781748105\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"21539.50551443824\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"5D9EDF20A4EC58656E020967B33B101748257E88F4A2A7A33335926340A7853F\",\"PreviousFields\":{\"TakerGets\":\"791182067\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"21799.43946942423\"}},\"PreviousTxnID\":\"E2DE3F155C66C415C9DFBDB7000AB71D74E8AB6FEA4339CB514E90B879C0C87D\",\"PreviousTxnLgrSeq\":30927186}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2592222282\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5514},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2592222294\",\"Sequence\":5513},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-109.6213379762039\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"10000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000324\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"C0ADFF611CD723F588F6E274696526AD6E3E3061D43B92C2761A7EDB64967999\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-109.6313579762039\"}},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-12470320.02357659\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"50000000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000323\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"D727CD2D19774BA754A358FDFD2744A7563BB99ED4F0E9979A1B3565758D9A17\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-12470060.08962161\"}},\"PreviousTxnID\":\"E2DE3F155C66C415C9DFBDB7000AB71D74E8AB6FEA4339CB514E90B879C0C87D\",\"PreviousTxnLgrSeq\":30927186}}],\"TransactionIndex\":5,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30927338,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5513,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"260\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.01\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"304402201AB0A4BF8960D69699D8D253B2B361C31CD8F632F22EE2F8C2CB2F85E678CF22022068C9987BFE0023DF2B4E39608114A26F84F258435911383A1468AF66A405A507\",\"date\":552282502,\"hash\":\"9D499203719FF6F6D5750198066DF7F0B68AD50DF6A5CF93190D658BE077F36B\",\"owner_funds\":\"20556.88790576798\"},\"type\":\"transaction\",\"validated\":true}\n";
////		c.filterTx(oneToOne);
////		System.out.println("Autobridge with single element majority");
////		String oneToOneReversed = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"DE54C3757678AC1A4153B1357D0DE94264BC5F167183B7FE5625967ABC0DBCD0\",\"ledger_index\":30927336,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5D2184238194439F\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000012\",\"Sequence\":664,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3.07\"},\"TakerPays\":\"2896226416\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"0ED3CD935ABB3FCA15ABB71796A9EE33B63E8ACC921FBA43156F1A592D825460\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3.08\"},\"TakerPays\":\"2905660378\"},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"20556.88790576798\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"20817.34172866395\"}},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.588899891940538\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.578899891940538\"}},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D5009C9EE45BFE7F4\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000019\",\"Sequence\":909,\"TakerGets\":\"781748105\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"21539.50551443824\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"5D9EDF20A4EC58656E020967B33B101748257E88F4A2A7A33335926340A7853F\",\"PreviousFields\":{\"TakerGets\":\"791182067\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"21799.43946942423\"}},\"PreviousTxnID\":\"E2DE3F155C66C415C9DFBDB7000AB71D74E8AB6FEA4339CB514E90B879C0C87D\",\"PreviousTxnLgrSeq\":30927186}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2592222282\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5514},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2592222294\",\"Sequence\":5513},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-109.6213379762039\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"10000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000324\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"C0ADFF611CD723F588F6E274696526AD6E3E3061D43B92C2761A7EDB64967999\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-109.6313579762039\"}},\"PreviousTxnID\":\"67EB60F07CAC3F4EE4C57DAA432E830080423A25B49AEA7A03B54875A2F7F02E\",\"PreviousTxnLgrSeq\":30927130}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-12470320.02357659\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"50000000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000323\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"D727CD2D19774BA754A358FDFD2744A7563BB99ED4F0E9979A1B3565758D9A17\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-12470060.08962161\"}},\"PreviousTxnID\":\"E2DE3F155C66C415C9DFBDB7000AB71D74E8AB6FEA4339CB514E90B879C0C87D\",\"PreviousTxnLgrSeq\":30927186}}],\"TransactionIndex\":5,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30927338,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5513,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"260\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.01\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"304402201AB0A4BF8960D69699D8D253B2B361C31CD8F632F22EE2F8C2CB2F85E678CF22022068C9987BFE0023DF2B4E39608114A26F84F258435911383A1468AF66A405A507\",\"date\":552282502,\"hash\":\"9D499203719FF6F6D5750198066DF7F0B68AD50DF6A5CF93190D658BE077F36B\",\"owner_funds\":\"20556.88790576798\"},\"type\":\"transaction\",\"validated\":true}\n";
////		c.filterTx(oneToOneReversed);
////	}
//
//	@Test
//	public void autoBridgeMulti1() throws Exception{
//
//		/*
//		 *      Made offer to sell 0.05 RJP.MrRipple at price 32,500 JPY.MrRipple
//		 *     sold 0.042997 XRP at price 27.9755 JPY.MrRipple
//			    sold 0.000112 XRP at price 27.9622 JPY.MrRipple
//			    sold 0.000590715 RJP.MrRipple at price 1,162.79 XRP
//			    sold 0.1192 XRP at price 27.9766 JPY.MrRipple
//			    sold 0.0000195500 RJP.MrRipple at price 1,162.81 XRP
//			    sold 0.547302 XRP at price 27.9767 JPY.MrRipple
//			    placed new order selling 0.0493897 RJP.MrRipple at price 32,500.0 JPY.MrRipple 
//		 */
//		System.out.println("017-07-03, 22:32:30 Made offer to sell 0.05 RJP.MrRipple at price 32,500 JPY.MrRipple\n\n    sold 0.042997 XRP at price 27.9755 JPY.MrRipple\n    sold 0.000112 XRP at price 27.9622 JPY.MrRipple\n    sold 0.000590715 RJP.MrRipple at price 1,162.79 XRP\n    sold 0.1192 XRP at price 27.9766 JPY.MrRipple\n    sold 0.0000195500 RJP.MrRipple at price 1,162.81 XRP\n    sold 0.547302 XRP at price 27.9767 JPY.MrRipple\n    placed new order selling 0.0493897 RJP.MrRipple at price 32,500.0 JPY.MrRipple ");
//		String oneConsumesMany1 = " {\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"D6EE222848B5D51ECE1BFAF1CF2ABD5EC3438D81F2DA0487B68064DABCBD9306\",\"ledger_index\":30963204,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB308061E49AB\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000153\",\"PreviousTxnID\":\"BCE0C5887EE1AA530B6DEEDBB9279F877AA1E1906BA4A76CE14F9879566CA81D\",\"PreviousTxnLgrSeq\":30962743,\"Sequence\":12629,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"07AB8A7DC66DDE1C13DD6D415A32123E0BCFEA69651671FFAC67A09529F84272\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"1.2028657851\"},\"TakerPays\":\"42997\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"21827.45915626065\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"21807.60662953904\"}},\"PreviousTxnID\":\"ED663851F3C8F2D318172A42DAB044368D0D7D434F6276239C7AC57C8FA88EFB\",\"PreviousTxnLgrSeq\":30956618}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB493BD366010\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000153\",\"PreviousTxnID\":\"DC734EEA1B5F2AB6976ED9BAF4FB7603EDFF1217DBCCACC63A0108D803009997\",\"PreviousTxnLgrSeq\":30962743,\"Sequence\":12628,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"3A0AD21A94FBEBE148A95CFF7E8357190133BEBE51A9E448304AE5225233534C\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.00313177530561\"},\"TakerPays\":\"112\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000000155\",\"IndexPrevious\":\"0000000000000153\",\"Owner\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"RootIndex\":\"4EE2F129C9DC8776082BD8AF7F769EF0EC9A661E740948B2B30B991212D499C8\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"3AB6CA97DFAAFAE03A4FE8CF4E0BF7B958DBEB7F359F53563CAFB8DE68FFBE47\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000001129\",\"IndexPrevious\":\"0000000000001127\",\"Owner\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"RootIndex\":\"718BBB28EE36A3AC1DCBC75790357E2057015302DBA637DFD7851E820B5583BA\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"4481F0633B45A39B944FFE128EFAF7CBE79F0F7BE8E918DC999B75FDD0D87B2B\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.378619551666456\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.379231037283793\"}},\"PreviousTxnID\":\"0E7BDCDA251341DC882D4107C5F950421DA1C92AF698F2ACE5561C5FAFAA8EA9\",\"PreviousTxnLgrSeq\":30935671}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"4B1E8D82836FD9A4\",\"Flags\":0,\"RootIndex\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E8D82836FD9A4\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"000000000000000000000000524A500000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E8D82836FD9A4\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2734220398\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5599},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2734220518\",\"OwnerCount\":9,\"Sequence\":5598},\"PreviousTxnID\":\"C210644C2CE2440B1383CD0F1F356A95D4D9D59A08870F776529FECC9CBAFBCC\",\"PreviousTxnLgrSeq\":30963194}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1818742784944\",\"Flags\":0,\"OwnerCount\":2544,\"Sequence\":239563},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1818743494555\",\"OwnerCount\":2545},\"PreviousTxnID\":\"B4E4D2547000ED85AA0047FF955661988851CB96C08F8B5BA8D5E3FB8E8BC71C\",\"PreviousTxnLgrSeq\":30963114}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E8DA77F35822D\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001129\",\"Sequence\":239221,\"TakerGets\":\"32005901\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.02752507433058303\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"7F8488EBFBEF1ABB5892611D62EC2104307EAB55F6161AFDC38AEF145134942C\",\"PreviousFields\":{\"TakerGets\":\"32692779\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.0281157893992212\"}},\"PreviousTxnID\":\"828C2F31471F06BBF27BF3D402048A579730A63E640E1B964309BBBB580E3A41\",\"PreviousTxnLgrSeq\":30958350}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"000000000000016A\",\"IndexPrevious\":\"0000000000000168\",\"Owner\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"RootIndex\":\"4EE2F129C9DC8776082BD8AF7F769EF0EC9A661E740948B2B30B991212D499C8\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"8864C8088F0C84D37DFBD3CB63AA0F1816447BD3A3DF5F74FFC07841DBEC03E5\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000000154\",\"IndexPrevious\":\"0000000000000152\",\"Owner\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"RootIndex\":\"4EE2F129C9DC8776082BD8AF7F769EF0EC9A661E740948B2B30B991212D499C8\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"9222A4355691E4C2C75545219628FDFDE75636D752C484467AE138D1125536A4\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"Balance\":\"1983393956692\",\"Flags\":0,\"OwnerCount\":2278,\"Sequence\":13534},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"94D26520D7CA98F0B20082FD5BFC79389D1930F94F5D79734931F5076EAC75EA\",\"PreviousFields\":{\"Balance\":\"1983393247081\",\"OwnerCount\":2282},\"PreviousTxnID\":\"2337D78117E9A6EF15F0A67272D370F007AC0CA6F13B841B6341FDD331F8456A\",\"PreviousTxnLgrSeq\":30963202}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590CB2E5F3EF2B54\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB2E5F3EF2B54\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB2E5F3EF2B54\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590CB2E89DAA7608\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB2E89DAA7608\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB2E89DAA7608\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590CB308061E49AB\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB308061E49AB\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB308061E49AB\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590CB493BD366010\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB493BD366010\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB493BD366010\"}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"C9FB798A9DF0CF089D35C9D4362BA6B1EA7A840C177E12E37A655CB5D39E7DC1\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B8BDB97852000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000018\",\"Sequence\":5598,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.04938973491283533\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"1605.166384667149\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB2E89DAA7608\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000154\",\"PreviousTxnID\":\"5CA1E45B04D3E99176A0D95EFD9F1039EE2959DD1BFCED89E7BF384092F3F448\",\"PreviousTxnLgrSeq\":30962746,\"Sequence\":12652,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"D5A5FD7E258772AF7143607278E28911C2810B465E10B8255E6A0DDE90D83B03\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3.33481435285\"},\"TakerPays\":\"119200\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-11226126.07851087\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"50000000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000323\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"D727CD2D19774BA754A358FDFD2744A7563BB99ED4F0E9979A1B3565758D9A17\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-11226145.97074262\"}},\"PreviousTxnID\":\"2337D78117E9A6EF15F0A67272D370F007AC0CA6F13B841B6341FDD331F8456A\",\"PreviousTxnLgrSeq\":30963202}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B8BDB97852000\",\"NewFields\":{\"ExchangeRate\":\"590B8BDB97852000\",\"RootIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B8BDB97852000\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E8D82836FD9A4\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000001128\",\"PreviousTxnID\":\"55AD7605531CC405E0EFB314B54E230465C92C4FE3087A6854E7DBE012D3D050\",\"PreviousTxnLgrSeq\":30958184,\"Sequence\":239189,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"E1071C902473C6A7E4AA542BE199B2D76488D264C6AE5C65422BEEB4533725D3\",\"PreviousFields\":{\"TakerGets\":\"22733\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.0000195500185265\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CB2E5F3EF2B54\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000169\",\"PreviousTxnID\":\"2337D78117E9A6EF15F0A67272D370F007AC0CA6F13B841B6341FDD331F8456A\",\"PreviousTxnLgrSeq\":30963202,\"Sequence\":13358,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"EED9E927385EA127101B7E199910C16DC79495141175B36BB85D316502BDE9CF\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"15.311714808375\"},\"TakerPays\":\"547302\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-283.1391043422258\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-283.1384940771389\"}},\"PreviousTxnID\":\"313C2A2F19CFD746A22E863C9B69844BBF83CD7A56A3612483EEBBF7A3388BEE\",\"PreviousTxnLgrSeq\":30958349}}],\"TransactionIndex\":1,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"120\",\"Flags\":2148007936,\"LastLedgerSequence\":30963206,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5598,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.05\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"1625\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100EE550D5083C4582E444B65BED185C97107147F1328363F53A65D7815D753929502206E0F42703F7F3530904670B18342D970CD797CABACCC72B181854606559BF78C\",\"date\":552403950,\"hash\":\"A945FBBC9D126B24268914D4650817F019D23E18E2D355B0A9BEA3EFD75F97F5\",\"owner_funds\":\"4.378619551666456\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(oneConsumesMany1);
//
//		c.filterStream(oneConsumesMany1);
//		
//		/*
//		 * 
//			2017-07-04, 09:08:11 Made offer to buy 0.03 RJP.MrRipple at price 32,907 JPY.MrRipple		
//		    bought 1.17043 XRP at price 28.2999 JPY.MrRipple
//		    bought 0.0299999 RJP.MrRipple at price 1,162.76 XRP
//		    bought 28.6065 XRP at price 28.3 JPY.MrRipple
//		    bought 0.850053 XRP at price 28.2999 JPY.MrRipple
//		    bought 3.64162 XRP at price 28.2999 JPY.MrRipple
//		    bought 0.599947 XRP at price 28.2999 JPY.MrRipple
//		    bought 0.01432 XRP at price 28.2677 JPY.MrRipple 
//		 * 
//		 */
//		System.out.println("2017-07-04, 09:08:11 Made offer to buy 0.03 RJP.MrRipple at price 32,907 JPY.MrRipple\n\n    bought 1.17043 XRP at price 28.2999 JPY.MrRipple\n    bought 0.0299999 RJP.MrRipple at price 1,162.76 XRP\n    bought 28.6065 XRP at price 28.3 JPY.MrRipple\n    bought 0.850053 XRP at price 28.2999 JPY.MrRipple\n    bought 3.64162 XRP at price 28.2999 JPY.MrRipple\n    bought 0.599947 XRP at price 28.2999 JPY.MrRipple\n    bought 0.01432 XRP at price 28.2677 JPY.MrRipple ");
//		String oneConsumedMany3 = " {\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"A9D326D17620620B962A0C12A3A2EF93361E65018A32DADE4D06FCE86A69207B\",\"ledger_index\":30974148,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"000000000000019C\",\"IndexPrevious\":\"000000000000019A\",\"Owner\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"RootIndex\":\"4EE2F129C9DC8776082BD8AF7F769EF0EC9A661E740948B2B30B991212D499C8\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"06CC9406ABDC4610C8CD9E91C44FEB7BBB89F21B90C604BCD6C7F85C0FC4CE66\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A0AF1002937C7\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0AF1002937C7\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0AF1002937C7\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A0DDE6119F109\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDE6119F109\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDE6119F109\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A0DDEA94ADB56\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEA94ADB56\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEA94ADB56\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A0DDEA94ADB5E\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEA94ADB5E\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEA94ADB5E\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A0DDEB56A14A2\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEB56A14A2\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEB56A14A2\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-0.4374199715370494\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"r4najz5nPC2zoYWiereTZN6kxJezP2ZJrD\",\"value\":\"0\"},\"HighNode\":\"000000000000003E\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"000000000000044C\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"175E1DCA28E8098803F01E9472A1B5227BFD11F5BF2A7C3ACCE1209147EC3BB2\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-0.4674799715370491\"}},\"PreviousTxnID\":\"DE20C9F327832FE2FC4349E10E4526EA9B97EADEB5EFB4F4A2FD5F0CB28C77DE\",\"PreviousTxnLgrSeq\":30974103}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHhpFttq3kBEq3yYfgg8cKBnBCPoRQaXpk\",\"Balance\":\"70192536578\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":709},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"20F453D0E2146DC964630F105E67C2A74CDABF479485C3A05B5B99C5B4D0967E\",\"PreviousFields\":{\"Balance\":\"70221143146\"},\"PreviousTxnID\":\"DE20C9F327832FE2FC4349E10E4526EA9B97EADEB5EFB4F4A2FD5F0CB28C77DE\",\"PreviousTxnLgrSeq\":30974103}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"28146.73848186043\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"29135.89991234781\"}},\"PreviousTxnID\":\"DE20C9F327832FE2FC4349E10E4526EA9B97EADEB5EFB4F4A2FD5F0CB28C77DE\",\"PreviousTxnLgrSeq\":30974103}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEB56A14A2\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"000000000000019B\",\"PreviousTxnID\":\"5EB58ACE4C99F7B5F4AE439199AC9B6C557DE8E57E10355A79E93BE26D620F0A\",\"PreviousTxnLgrSeq\":30972776,\"Sequence\":15467,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"25297D1A35E917281C23326516E079AC5EE0681EBEBD552FEB305EEC5D338993\",\"PreviousFields\":{\"TakerGets\":\"1170437\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"33.12336645199405\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"r4najz5nPC2zoYWiereTZN6kxJezP2ZJrD\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E0421875806D77A\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"000000000000003E\",\"Sequence\":645301,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.9049702276334722\"},\"TakerPays\":\"1052267787\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"258826A4C03DD17EEA003D503CA8A4927D4EC1EB1B91475A17530E01E0534530\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.934970227633472\"},\"TakerPays\":\"1087150739\"},\"PreviousTxnID\":\"695D31C355B0E54F32BBC4BB4A1334E285836D8F3FEB2EEB2E40315492CF9C8B\",\"PreviousTxnLgrSeq\":30974131}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rHhpFttq3kBEq3yYfgg8cKBnBCPoRQaXpk\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEB8B6E000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":706,\"TakerGets\":\"2971393432\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"84090.4341256\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"2D0C52D1A0C0ECDD11354426C17231978CA640F6783F26C5C99A32A3CCC0D486\",\"PreviousFields\":{\"TakerGets\":\"3000000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"84900\"}},\"PreviousTxnID\":\"A0676017CC0ED6CAC5D8C0E923ED991ED5126298BF0E229A275821023A03A9D7\",\"PreviousTxnLgrSeq\":30973921}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"r4najz5nPC2zoYWiereTZN6kxJezP2ZJrD\",\"Balance\":\"29642249243\",\"Flags\":0,\"OwnerCount\":6,\"Sequence\":645302},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"32FF88BD24F7C1C0626CD9949FCA62789ADE0F966AE9859F4570E9DBCC3091A4\",\"PreviousFields\":{\"Balance\":\"29607366291\"},\"PreviousTxnID\":\"695D31C355B0E54F32BBC4BB4A1334E285836D8F3FEB2EEB2E40315492CF9C8B\",\"PreviousTxnLgrSeq\":30974131}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000000198\",\"IndexPrevious\":\"0000000000000196\",\"Owner\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"RootIndex\":\"4EE2F129C9DC8776082BD8AF7F769EF0EC9A661E740948B2B30B991212D499C8\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"437667426FFBA994AF057DF6B14EE02DA6834C4DC287408A9CF7FD46BF759A56\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000000197\",\"IndexPrevious\":\"0000000000000195\",\"Owner\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"RootIndex\":\"4EE2F129C9DC8776082BD8AF7F769EF0EC9A661E740948B2B30B991212D499C8\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"482B5C28C05DAF2D3CAC6DF8A0B1E46CCF67EC7E8C8870D2A3BF961DD643D423\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.184765952869344\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.154765952869347\"}},\"PreviousTxnID\":\"DE20C9F327832FE2FC4349E10E4526EA9B97EADEB5EFB4F4A2FD5F0CB28C77DE\",\"PreviousTxnLgrSeq\":30974103}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2734220194\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5607},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2734220206\",\"Sequence\":5606},\"PreviousTxnID\":\"C76CD0083AB748104E5A54458D8B68B5674DD61629E024E1009FDF18753C4B7F\",\"PreviousTxnLgrSeq\":30974129}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"Balance\":\"1930553365564\",\"Flags\":0,\"OwnerCount\":2958,\"Sequence\":16516},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"94D26520D7CA98F0B20082FD5BFC79389D1930F94F5D79734931F5076EAC75EA\",\"PreviousFields\":{\"Balance\":\"1930559641948\",\"OwnerCount\":2963},\"PreviousTxnID\":\"D5A7FC81655591D750B18E06D1EBE17B662FD41487202A36F9C56990F5ABD660\",\"PreviousTxnLgrSeq\":30973995}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDE6119F109\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000197\",\"PreviousTxnID\":\"5D1F9220C74A49216F8F3A4D740729E9E69A79F2B9778C872D8F4A0FF88412FA\",\"PreviousTxnLgrSeq\":30972760,\"Sequence\":15292,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"B1FED9974A6CAE33D1FCFE296B87C0F53F8FDFBE672B6D7F2B406FF65D4E8338\",\"PreviousFields\":{\"TakerGets\":\"850053\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"24.056487405049\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEA94ADB5E\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"000000000000019B\",\"PreviousTxnID\":\"8054CA817CFCD9A1812B842619D9BF941FF57EF16924227BA45EF6B186D8711A\",\"PreviousTxnLgrSeq\":30972776,\"Sequence\":15494,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"CD89B90E4CB273BE18BE02D0DAC0182EE87EF0F5A0BEA68855FB9848E5040B1E\",\"PreviousFields\":{\"TakerGets\":\"3641627\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"103.0580346777521\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-11905534.6817445\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"50000000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000323\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"D727CD2D19774BA754A358FDFD2744A7563BB99ED4F0E9979A1B3565758D9A17\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-11905357.06056255\"}},\"PreviousTxnID\":\"E57F0A2F3CD6CF351CB09F4E4BA55BE7E69796274F469925EF849814ADEF249A\",\"PreviousTxnLgrSeq\":30973938}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-349736.3135302485\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rHhpFttq3kBEq3yYfgg8cKBnBCPoRQaXpk\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000284\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"D7D9960173BE1B3C490B2D91D71D1E70D21564D1FBC4153A2B6F7DCF06C64318\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-348926.7476558485\"}},\"PreviousTxnID\":\"DE20C9F327832FE2FC4349E10E4526EA9B97EADEB5EFB4F4A2FD5F0CB28C77DE\",\"PreviousTxnLgrSeq\":30974103}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0DDEA94ADB56\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000197\",\"PreviousTxnID\":\"71E8C9B944878878509061B7CFE225FDB70156990118DA64FD63381A66A14C9F\",\"PreviousTxnLgrSeq\":30972760,\"Sequence\":15293,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"E0ECF4E8EF99DDD086AF32D0DE0355BC39A7791CE57B8DD891B39C270F68E085\",\"PreviousFields\":{\"TakerGets\":\"599947\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"16.9784985477132\"}}}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A0AF1002937C7\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000196\",\"PreviousTxnID\":\"772EF10945C79D397F8222708EB0D955DFFC4E2C5175A7336FE112FCE2802255\",\"PreviousTxnLgrSeq\":30972759,\"Sequence\":15271,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"F6C35EA6370B8779C763C2C13C3C0AC7A845FBF57590CD587E42939834D1A907\",\"PreviousFields\":{\"TakerGets\":\"14320\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.4047948921628001\"}}}}],\"TransactionIndex\":5,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30974150,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5606,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"987.2099999999999\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.03\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"30450221008AD6361C4C60B5F159D1804F1D0DEE93D46C8948600291103E6DBC7BDF86DFA6022054588B50613EE4EAED9907ACA367A3CEAB5496AFBFC2841D0E72F204CD955C27\",\"date\":552442091,\"hash\":\"6BD05FEC2E8C4DD7E34A9879DEDDAB2142A1E9E349E76596F951DE9B4B06C233\",\"owner_funds\":\"28146.73848186043\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(oneConsumedMany3);
//		c.filterStream(oneConsumedMany3);
//
//		
////		System.out.println("2017-07-04, 08:14:12 Made offer to sell 0.1 RJP.MrRipple at price 32,575 JPY.MrRipple\n\n    sold 0.0798632 RJP.MrRipple at price 1,160.09 XRP\n    sold 0.00000141195 RJP.MrRipple at price 1,160.09 XRP\n    sold 116.009 XRP at price 28.0804 JPY.MrRipple\n    sold 0.0201353 RJP.MrRipple at price 1,160.09 XRP ");
////		String oneConsumesMany2 = "FINER: {\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"5531F0D26FF6906396BF79B1C531A8F1AE47EF06702B452DB54B04ED1E19F356\",\"ledger_index\":30973229,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E9FD8165A5045\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000193\",\"PreviousTxnID\":\"48F9DF327F41172AAA376919DB282FB62E25B65916670F93D1678E0168584C56\",\"PreviousTxnLgrSeq\":30971755,\"Sequence\":15154,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"092674D0292D3271A9F5FC6E4239526A37049B65F684AAA481BBEC8A48439057\",\"PreviousFields\":{\"TakerGets\":\"92648812\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.07986327351743071\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"29985.30383656221\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"26727.70516528072\"}},\"PreviousTxnID\":\"5276E16A021C48CF47D634B072EE58611F1DC931C4AF0B111EAE81CF005CC588\",\"PreviousTxnLgrSeq\":30971542}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E9FD825F6C000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000193\",\"PreviousTxnID\":\"13E5BBEA3BB4E833F429274EB2BAE381F340AEDBEA7C9CDF5EB61D6DBAA6BFBC\",\"PreviousTxnLgrSeq\":30971756,\"Sequence\":15164,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"43EB5589E256A43585BC7945985F51E4CF11F36F9699B09C8E616A598276F1D5\",\"PreviousFields\":{\"TakerGets\":\"1638\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.000001411956\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.128941037780416\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.229141037780415\"}},\"PreviousTxnID\":\"5276E16A021C48CF47D634B072EE58611F1DC931C4AF0B111EAE81CF005CC588\",\"PreviousTxnLgrSeq\":30971542}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"4B1E9FD8165A5045\",\"Flags\":0,\"RootIndex\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E9FD8165A5045\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"000000000000000000000000524A500000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E9FD8165A5045\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"4B1E9FD825F6C000\",\"Flags\":0,\"RootIndex\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E9FD825F6C000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"000000000000000000000000524A500000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E9FD825F6C000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexNext\":\"0000000000000194\",\"IndexPrevious\":\"0000000000000192\",\"Owner\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"RootIndex\":\"4EE2F129C9DC8776082BD8AF7F769EF0EC9A661E740948B2B30B991212D499C8\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"5CD7A7E517CDE47F733F34B973EA6DDD5619F30A143086FCABAF858CD74F53B6\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2734220230\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5604},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2734220242\",\"Sequence\":5603},\"PreviousTxnID\":\"290B817E5C4D9AB5FC1FC5BEBD4D1FE074125AC26ECE277AAAE8E7045334D81F\",\"PreviousTxnLgrSeq\":30973225}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rwDM6HHJvF5xFLb9mScvuMbcMJh1RYrHTW\",\"Balance\":\"52871795322\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":4065},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7BCD3E1B7B8DEC6A14048318C45E0E6C90D9CC81C30CF74AF5F0A2AC9E75C7D5\",\"PreviousFields\":{\"Balance\":\"52755786039\"},\"PreviousTxnID\":\"117B35BE3C6209C6069A3F9B33031A9AA5874B6176B8EBBEA954B8371788D04A\",\"PreviousTxnLgrSeq\":30973191}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"Balance\":\"1922453536543\",\"Flags\":0,\"OwnerCount\":2866,\"Sequence\":16138},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"94D26520D7CA98F0B20082FD5BFC79389D1930F94F5D79734931F5076EAC75EA\",\"PreviousFields\":{\"Balance\":\"1922569545826\",\"OwnerCount\":2868},\"PreviousTxnID\":\"770C4BEA2FDED4698907D4CFB2B67F7326C790F5BF4E681FDFDB7F61F637B68F\",\"PreviousTxnLgrSeq\":30973207}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"1549575.902540637\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001FE\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rwDM6HHJvF5xFLb9mScvuMbcMJh1RYrHTW\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"95DD2AD0A0595AF913AF1723FB32C7EC424481B9067AAC588A4B19FAE9117414\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"1552840.016409259\"}},\"PreviousTxnID\":\"117B35BE3C6209C6069A3F9B33031A9AA5874B6176B8EBBEA954B8371788D04A\",\"PreviousTxnLgrSeq\":30973191}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rwDM6HHJvF5xFLb9mScvuMbcMJh1RYrHTW\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CA6E231DA754E\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000000\",\"Sequence\":4064,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"236155.8788034671\"},\"TakerPays\":\"8409959894\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"9C2AC925D19E193C7FC19554E42CD8BC11E97D966688C1C895A69FC89A6C1987\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"239413.4774747485\"},\"TakerPays\":\"8525969177\"},\"PreviousTxnID\":\"117B35BE3C6209C6069A3F9B33031A9AA5874B6176B8EBBEA954B8371788D04A\",\"PreviousTxnLgrSeq\":30973191}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1E9FD82605F5C9\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000193\",\"Sequence\":15155,\"TakerGets\":\"137045080\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1181328584954199\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"ABDB03D0DCE5E451D3A120FCF22467B7B266C3AA0DCAFB8A14EAE51F29D8D3DC\",\"PreviousFields\":{\"TakerGets\":\"160403913\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1382681730219892\"}},\"PreviousTxnID\":\"CE78706FE62D0B644459B28EA89BF96603A7D8B598C7FD61D04A1561CF5EB809\",\"PreviousTxnLgrSeq\":30971755}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-74.60493687096807\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"10000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000324\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"C0ADFF611CD723F588F6E274696526AD6E3E3061D43B92C2761A7EDB64967999\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-74.50493687096808\"}},\"PreviousTxnID\":\"17E5C00771D8A64BB147574A7BCF9E49FB2E806CB5D96093035E5A5AB6C1181D\",\"PreviousTxnLgrSeq\":30971754}}],\"TransactionIndex\":17,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2148007936,\"LastLedgerSequence\":30973232,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5603,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3257.5\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"304402205E3A299EAE45F37C8BAC5D9AC57144CA0172ACA1C2691D0281A388228117FB75022060B17191BE72B6B304661593F6D2EA82F54ADD94FBEC1AB40D06E0232CF70CB6\",\"date\":552438852,\"hash\":\"C1DB6CF053A9EE614E223B219BA6219A88CD189F2004756CD39A06AD199C6F70\",\"owner_funds\":\"4.128941037780416\"},\"type\":\"transaction\",\"validated\":true}\n\n";
////		testOfferQuality(oneConsumesMany2);
////		c.filterTx(oneConsumesMany2);
//		
////		System.out.println("2017-07-03, 22:37:11\n\n    sold 0.0493897 RJP.MrRipple at price 32,500.0 JPY.MrRipple. (order fully matched) ");		
////		String consumeNormal1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"D3E1AE8E6B194F669755D29CD53061A5DAA8E55262EDA3C10555226C37BE84DE\",\"ledger_index\":30963282,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"23432.62554092779\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"21827.45915626065\"}},\"PreviousTxnID\":\"A945FBBC9D126B24268914D4650817F019D23E18E2D355B0A9BEA3EFD75F97F5\",\"PreviousTxnLgrSeq\":30963204}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.329131037283795\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.378619551666456\"}},\"PreviousTxnID\":\"A945FBBC9D126B24268914D4650817F019D23E18E2D355B0A9BEA3EFD75F97F5\",\"PreviousTxnLgrSeq\":30963204}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2734220398\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5599},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"OwnerCount\":10},\"PreviousTxnID\":\"A945FBBC9D126B24268914D4650817F019D23E18E2D355B0A9BEA3EFD75F97F5\",\"PreviousTxnLgrSeq\":30963204}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"0.04938973491283533\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000338\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rsPrWzpYp5jj278vHVgp1tMvbKdHAZGFbi\",\"value\":\"1000000000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"7BE65D79F3087B4870A4E8596F1533D9761D53C05B0C51C1DEB5B0DA6A58C27C\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"0\"}},\"PreviousTxnID\":\"583C6A53D61102655A975944FDFD9EC65AE99C088438098CEE2E90B25AE169EA\",\"PreviousTxnLgrSeq\":30954974}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rsPrWzpYp5jj278vHVgp1tMvbKdHAZGFbi\",\"Balance\":\"11674134881\",\"Flags\":0,\"OwnerCount\":35,\"Sequence\":6975397},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"8881335E10619D1D17D4EB1FEF2647C232C892D377D9A34998C361FFFC9C4CCC\",\"PreviousFields\":{\"Balance\":\"11674159881\",\"Sequence\":6975396},\"PreviousTxnID\":\"16E5E9027F406ABA34EBA407663E8AE4185CDBFE837684B896505182A958F335\",\"PreviousTxnLgrSeq\":30963282}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"26495.13357511451\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000232\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rsPrWzpYp5jj278vHVgp1tMvbKdHAZGFbi\",\"value\":\"1000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"ADCD69C9DAFD1076DA7075D0E53667CB67EDD58675BD653162A7EA483E392851\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"28103.51029255099\"}},\"PreviousTxnID\":\"16E5E9027F406ABA34EBA407663E8AE4185CDBFE837684B896505182A958F335\",\"PreviousTxnLgrSeq\":30963282}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B8BDB97852000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000018\",\"PreviousTxnID\":\"A945FBBC9D126B24268914D4650817F019D23E18E2D355B0A9BEA3EFD75F97F5\",\"PreviousTxnLgrSeq\":30963204,\"Sequence\":5598,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"C9FB798A9DF0CF089D35C9D4362BA6B1EA7A840C177E12E37A655CB5D39E7DC1\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.04938973491283533\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"1605.166384667149\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590B8BDB97852000\",\"Flags\":0,\"RootIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B8BDB97852000\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590B8BDB97852000\"}}],\"TransactionIndex\":58,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"rsPrWzpYp5jj278vHVgp1tMvbKdHAZGFbi\",\"Fee\":\"25000\",\"Flags\":131072,\"LastLedgerSequence\":30963284,\"Sequence\":6975396,\"SigningPubKey\":\"031161F2602A6746CA817D3EE4419F29641690CD613B015B923A2B8146BDEA7028\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"281147.5169666801\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"8.647233936169537\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100F81423D86B19CC03A06DB731C62B8DADA2C81E870A9D21A5A6C1BEE434671DBD02207E6BD95F48D128BE2DBC605355461F5D5E841A18295476F308188C6C54DAF369\",\"date\":552404231,\"hash\":\"9F259CBA609D8DDC6AD9D570646593CB9B173C91284057BD15053E1CBB00C07D\",\"owner_funds\":\"26495.13357511451\"},\"type\":\"transaction\",\"validated\":true}\n";
////		testOfferQuality(consumeNormal1);
////		c.filterTx(consumeNormal1);
//		
//		
//	
//	}
//	
//	@Test
//	public void autobridgeOnetoOneBuyRJP() throws Exception{
//		System.out.println("2017-07-05, 09:07:21 Made offer to buy 0.01 RJP.MrRipple at price 32,200 JPY.MrRipple\n\n    bought 0.01 RJP.MrRipple at price 1,149.42 XRP\n    bought 11.4942 XRP at price 28 JPY.MrRipple ");
//		String buy1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"AC56C64B2A62C07FBDAD17316E378C3DEE81AE7AB45D4029C17AEF67DC91B0FC\",\"ledger_index\":30998709,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"27501.77301363643\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"27824.25574774843\"}},\"PreviousTxnID\":\"C45BD5D7D83EA2BECB6EED23D60D236487DE138249BABABA659CE2832FAE0323\",\"PreviousTxnLgrSeq\":30998673}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\"Balance\":\"46823913199\",\"Flags\":0,\"OwnerCount\":59,\"Sequence\":2626},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"418E2A54C93ADD8D7EEBE5EDB240C4BBB98A919B8AF67756A2D52D5C461C37B0\",\"PreviousFields\":{\"Balance\":\"46835407451\"},\"PreviousTxnID\":\"6723BCCA292E8EA8DA7A425F4FD7892A661E1F1214DF4685C22DD85A223F16A0\",\"PreviousTxnLgrSeq\":30998705}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.204765952869344\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.194765952869344\"}},\"PreviousTxnID\":\"C45BD5D7D83EA2BECB6EED23D60D236487DE138249BABABA659CE2832FAE0323\",\"PreviousTxnLgrSeq\":30998673}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-324103.3955517609\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"00000000000001B7\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"5F894CD5A7BE52AE1A1A74075313B891598C6FA41D820B84E2EE01457EAC5E8E\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-323781.5564957609\"}},\"PreviousTxnID\":\"C45BD5D7D83EA2BECB6EED23D60D236487DE138249BABABA659CE2832FAE0323\",\"PreviousTxnLgrSeq\":30998673}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2734220170\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5609},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2734220182\",\"Sequence\":5608},\"PreviousTxnID\":\"C45BD5D7D83EA2BECB6EED23D60D236487DE138249BABABA659CE2832FAE0323\",\"PreviousTxnLgrSeq\":30998673}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1817791048205\",\"Flags\":0,\"OwnerCount\":2892,\"Sequence\":248289},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1817779553953\"},\"PreviousTxnID\":\"7A4FD4D5D6AE0E3486A055E37840BBD7480D2F3952844363E7AC4468ACD06BB3\",\"PreviousTxnLgrSeq\":30998674}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E0415656DF2DFA1\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000001207\",\"Sequence\":248262,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.4406927791\"},\"TakerPays\":\"506543426\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"90128FA432E12F8E78E91493980594F7A9CCDF4CEF07FE49226237C20B1AA6E2\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.4506927791\"},\"TakerPays\":\"518037678\"},\"PreviousTxnID\":\"C45BD5D7D83EA2BECB6EED23D60D236487DE138249BABABA659CE2832FAE0323\",\"PreviousTxnLgrSeq\":30998673}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rUc9qqJpdGrEJ1UiEHiMz2TCB3mmvr1P8F\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D5009F295CD5F0000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000025\",\"Sequence\":2613,\"TakerGets\":\"967011496\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"27076.321888\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"CD31CF6CA6235D884227C7DE81B44B68A0A89D026957806AB1D7382DE37812C9\",\"PreviousFields\":{\"TakerGets\":\"978505748\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"27398.160944\"}},\"PreviousTxnID\":\"C45BD5D7D83EA2BECB6EED23D60D236487DE138249BABABA659CE2832FAE0323\",\"PreviousTxnLgrSeq\":30998673}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-284.4943251657545\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-284.5043451657545\"}},\"PreviousTxnID\":\"C45BD5D7D83EA2BECB6EED23D60D236487DE138249BABABA659CE2832FAE0323\",\"PreviousTxnLgrSeq\":30998673}}],\"TransactionIndex\":0,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30998711,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5608,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"322\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.01\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100D04A95E2147C5BC5408FB2687D4684C3A59B64BF8139600D0145F9011101F8A602204AAC345CD5804FCF7EF86F5F192593C06C6711AAA9E682DC5D83221E412E6BE4\",\"date\":552528441,\"hash\":\"A8A0ADAE9DDD061AF60E1FFEF7FE88B40664EFB286153D5028C56B3301AA9849\",\"owner_funds\":\"27501.77301363643\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(buy1);
//		c.filterStream(buy1);
//		
//	}
//	
//	@Test
//	public void autobridgeOnetoOneSellRJP() throws Exception{
//		System.out.println("Made offer to sell 0.001 RJP.MrRipple at price 31,000 JPY.MrRipple\n\n    sold 0.001 RJP.MrRipple at price 1,136.36 XRP\n    sold 1.13636 XRP at price 27.8 JPY.MrRipple ");
//		String sell1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"63A4CF38F6CB901102D3A696D6378CA65C061ED8BF080C8ED3D0C2B8910C0629\",\"ledger_index\":30998808,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rUgr8XBhJormb8JDx3M2BGmCbtaSgPGa2G\",\"Balance\":\"27703700107\",\"Flags\":0,\"OwnerCount\":12,\"Sequence\":26},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"135C391A98211F2A17060E01372EA4493F95E7B3A484421486DCE5078FF1DB6C\",\"PreviousFields\":{\"Balance\":\"27702563744\"},\"PreviousTxnID\":\"42B66BF24AE4C674CA411B979D5DA64E274AFC6A4F4FB5B680F1F65F2A84CF0D\",\"PreviousTxnLgrSeq\":30985582}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"27533.36390503643\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"27501.77301363643\"}},\"PreviousTxnID\":\"A8A0ADAE9DDD061AF60E1FFEF7FE88B40664EFB286153D5028C56B3301AA9849\",\"PreviousTxnLgrSeq\":30998709}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.203763952869344\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.204765952869344\"}},\"PreviousTxnID\":\"A8A0ADAE9DDD061AF60E1FFEF7FE88B40664EFB286153D5028C56B3301AA9849\",\"PreviousTxnLgrSeq\":30998709}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-2244598.170538456\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rUgr8XBhJormb8JDx3M2BGmCbtaSgPGa2G\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000444\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"6BB11E2EA575847BEA9A21D4411389FB412CEA603CAB2208A9826410CF2D4169\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-2244629.824611638\"}},\"PreviousTxnID\":\"42B66BF24AE4C674CA411B979D5DA64E274AFC6A4F4FB5B680F1F65F2A84CF0D\",\"PreviousTxnLgrSeq\":30985582}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2734220158\",\"Flags\":0,\"OwnerCount\":9,\"Sequence\":5610},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2734220170\",\"Sequence\":5609},\"PreviousTxnID\":\"A8A0ADAE9DDD061AF60E1FFEF7FE88B40664EFB286153D5028C56B3301AA9849\",\"PreviousTxnLgrSeq\":30998709}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4B1F438DAA060000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"000000000000110B\",\"Sequence\":238032,\"TakerGets\":\"1362227428\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"1.198760135607942\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"74CB6FD2502681C1C2FBDE922FF4F475FCC9FB57805B6AB075E0267E9CDC96A8\",\"PreviousFields\":{\"TakerGets\":\"1363363791\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"1.199760135607942\"}},\"PreviousTxnID\":\"6FA8FCB1EE6458F9417AF516C30CFE12ACCBCD8E67F87733BA0CE35E92BF7C5C\",\"PreviousTxnLgrSeq\":30998231}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1819389015577\",\"Flags\":0,\"OwnerCount\":2895,\"Sequence\":248293},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1819390151940\"},\"PreviousTxnID\":\"03780CE6877D6D321703BE4911760CBD84BC7923FB8EB12562624776E673A972\",\"PreviousTxnLgrSeq\":30998714}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rUgr8XBhJormb8JDx3M2BGmCbtaSgPGa2G\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CC7904D08A5C1\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000000\",\"Sequence\":15,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"181680.6234002373\"},\"TakerPays\":\"6535274223\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"AA71A81FEBD1D0601A0BF4C0766FEC7F5818CD5BC16B6BB7CF1241AE5D1CF226\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"181712.2142916373\"},\"TakerPays\":\"6536410586\"},\"PreviousTxnID\":\"42B66BF24AE4C674CA411B979D5DA64E274AFC6A4F4FB5B680F1F65F2A84CF0D\",\"PreviousTxnLgrSeq\":30985582}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-284.4953251657545\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-284.4943251657545\"}},\"PreviousTxnID\":\"A8A0ADAE9DDD061AF60E1FFEF7FE88B40664EFB286153D5028C56B3301AA9849\",\"PreviousTxnLgrSeq\":30998709}}],\"TransactionIndex\":0,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2148007936,\"LastLedgerSequence\":30998810,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5609,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.001\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"31\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3044022076318091DC202E21EE833EF18DA7EC9F9C2DA6DE9FEB57F2E3FFBB992182C9970220104C4E03E945F9E8B674F9A9A199E6952E04717BCDD926FE524CA6287CC12C3C\",\"date\":552528790,\"hash\":\"F6B99DF8E03306468674D8B31996D3E29B008188DB931DE4738CBD3D9530DA72\",\"owner_funds\":\"4.203763952869344\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(sell1);
//		c.filterStream(sell1);
//		
//		
//		System.out.println("one to one sell RJP, XRP/JPY shows up first");
//		String esl1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"922B57D746FEC0062B5DA856BA9743ACF4A7E882332AA895C6997648E073A2F7\",\"ledger_index\":30927692,\"meta\":{\"AffectedNodes\":[{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"0F74D77C665E8260C781637799E73E63F99B683DADF0459FBB946B5768CACE74\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590933975DF7E000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000018\",\"Sequence\":5515,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.00738892748827815\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"191.3732219464041\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"20363.72892024378\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"20295.98979986558\"}},\"PreviousTxnID\":\"3B6BC242C2B6331CEA309367CAA8A0C2F4D61E396965EF9C04F77C23F0413840\",\"PreviousTxnLgrSeq\":30927686}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.596283597283793\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.598899891940538\"}},\"PreviousTxnID\":\"3B6BC242C2B6331CEA309367CAA8A0C2F4D61E396965EF9C04F77C23F0413840\",\"PreviousTxnLgrSeq\":30927686}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-67.6036421375006\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"value\":\"0\"},\"HighNode\":\"0000000000000000\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000444\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"601AA9619F786BFA936D2B438F863D98D8755DFF72AA3ADA1D0F33DCAFC26884\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-135.478240756457\"}},\"PreviousTxnID\":\"EC6227E4BA77C644F442E0BC51B98BF9AEFD921C300DB53AD64314510B0FCC69\",\"PreviousTxnLgrSeq\":30927447}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2592222258\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5516},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2592222270\",\"OwnerCount\":9,\"Sequence\":5515},\"PreviousTxnID\":\"3B6BC242C2B6331CEA309367CAA8A0C2F4D61E396965EF9C04F77C23F0413840\",\"PreviousTxnLgrSeq\":30927686}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"Balance\":\"1767456062149\",\"Flags\":0,\"OwnerCount\":727,\"Sequence\":1004},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"94D26520D7CA98F0B20082FD5BFC79389D1930F94F5D79734931F5076EAC75EA\",\"PreviousFields\":{\"Balance\":\"1767458520786\"},\"PreviousTxnID\":\"A954CB9502950D50698EDABD8FD17411CE7FC07771969EE7BC24E55B1BEEA0EF\",\"PreviousTxnLgrSeq\":30927687}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"RootIndex\":\"97065B0341198D1BF2661855C84BB85B08350CBD02AA87B68095409768629974\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"97065B0341198D1BF2661855C84BB85B08350CBD02AA87B68095409768629974\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"BookDirectory\":\"59E6C90874EE6DE9C3187C89BE98BA49ADFCD5411C40488A4C03C5E2252E5C40\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000019\",\"Sequence\":918,\"TakerGets\":\"91880985\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.0975776067322782\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"99A5FC6CE8C0F88F067BC8C0BC04C7E07B913FBB3F887BBA713F3244153E8803\",\"PreviousFields\":{\"TakerGets\":\"94339622\",\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.100188679244\"}},\"PreviousTxnID\":\"840BDBE07F7EB45ACC1935B92A54B7053D14D9E0FFD1C8622EC3F00B7B365210\",\"PreviousTxnLgrSeq\":30927131}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"Balance\":\"1859847505\",\"Flags\":0,\"OwnerCount\":3,\"Sequence\":21814},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"A1A60AF78F370DA28CF59719A480A9063D663883461EF62DA061486812C22D6E\",\"PreviousFields\":{\"Balance\":\"1857388868\",\"OwnerCount\":4},\"PreviousTxnID\":\"87F788483A3A28A2B3ED5FA9A91D38710E5A348AB22ADE39E18C6098FD97A6AC\",\"PreviousTxnLgrSeq\":30927530}},{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"590CE51280E654E9\",\"Flags\":0,\"RootIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CE51280E654E9\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000000000000000000000\",\"TakerPaysIssuer\":\"0000000000000000000000000000000000000000\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CE51280E654E9\"}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rG7eucYLyK39JjptdTksiKKdGEPGSFPeW3\",\"BookDirectory\":\"A7A2258942BF79A1C2A55DA88560879DC312966AFDD1CD05590CE51280E654E9\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"87F788483A3A28A2B3ED5FA9A91D38710E5A348AB22ADE39E18C6098FD97A6AC\",\"PreviousTxnLgrSeq\":30927530,\"Sequence\":21813,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"TakerPays\":\"0\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"AC23DF134740F45F5B7CB500ADB4A92B99EB71921484123516F1CB954FD7E227\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"67.7391203782\"},\"TakerPays\":\"2458637\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-109.6139290487156\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rKLPBY3nEhETSThEfWRaHNBH1Rxeo57UGn\",\"value\":\"10000\"},\"HighNode\":\"0000000000000000\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000324\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"C0ADFF611CD723F588F6E274696526AD6E3E3061D43B92C2761A7EDB64967999\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-109.6113179762039\"}},\"PreviousTxnID\":\"3B6BC242C2B6331CEA309367CAA8A0C2F4D61E396965EF9C04F77C23F0413840\",\"PreviousTxnLgrSeq\":30927686}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590933975DF7E000\",\"NewFields\":{\"ExchangeRate\":\"590933975DF7E000\",\"RootIndex\":\"DCAAC0CDAC8DA851AC8E225CA9ED9305CB4BBE7E4E255AB3590933975DF7E000\",\"TakerGetsCurrency\":\"000000000000000000000000524A500000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}}],\"TransactionIndex\":9,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2148007936,\"LastLedgerSequence\":30927694,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5515,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.01\"},\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"259\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3044022041F61D257565EBD630BBC5542D2DCEC4DECB05F93D6CE01CCE977672A9FFDD15022069A94032AD190FD178A5CAD567D1C464D23D35DF970F8EBB237D81162890FE1C\",\"date\":552283732,\"hash\":\"BB033142291A122476361C26B482540EA2DD344A8A4984A4B7275A40BC762A2D\",\"owner_funds\":\"4.596283597283793\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(esl1);
//		c.filterStream(esl1);
//		
//		String consumeHalfRemains1 = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"A977AE837ADADC05B9A3EE380FCEDC15ED44CFBD25F75B71CD1F72D51CABB205\",\"ledger_index\":30874153,\"meta\":{\"AffectedNodes\":[{\"DeletedNode\":{\"FinalFields\":{\"ExchangeRate\":\"500A4D88DDD94000\",\"Flags\":0,\"RootIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A4D88DDD94000\",\"TakerGetsCurrency\":\"0000000000000000000000000000000000000000\",\"TakerGetsIssuer\":\"0000000000000000000000000000000000000000\",\"TakerPaysCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A4D88DDD94000\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"21170.04631073177\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"24075.84631073177\"}},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"DeletedNode\":{\"FinalFields\":{\"Account\":\"rfjMiGNaJokVhb6mbvm6Y3ctsFYC8iEoKy\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500A4D88DDD94000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"PreviousTxnID\":\"F1CB3F9E4B60161B0CAB23A42E608813B171834A857F519FA83AF83E28247C05\",\"PreviousTxnLgrSeq\":30874118,\"Sequence\":908,\"TakerGets\":\"0\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"338EB27563C2BB7EA7691F319291AA85FE619D54A3EBC2D6850BAFFA54C3AC20\",\"PreviousFields\":{\"TakerGets\":\"100000000\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"2900\"}}}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.579099891940538\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.484099891940538\"}},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"2566023026\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":5479},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"2566023038\",\"OwnerCount\":9,\"Sequence\":5478},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"CreatedNode\":{\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500BA34FFA9C6CC9\",\"NewFields\":{\"ExchangeRate\":\"500BA34FFA9C6CC9\",\"RootIndex\":\"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500BA34FFA9C6CC9\",\"TakerGetsCurrency\":\"0000000000000000000000004A50590000000000\",\"TakerGetsIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\",\"TakerPaysCurrency\":\"000000000000000000000000524A500000000000\",\"TakerPaysIssuer\":\"6F2531F2B8CDB96D6D986D9D75CC0156DF2C5387\"}}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1687682372114\",\"Flags\":0,\"OwnerCount\":2316,\"Sequence\":233196},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1687582372114\"},\"PreviousTxnID\":\"FB3CFEA025850C83A838DB816D8D9AFA30E130F12338077C10BBFC424B127E07\",\"PreviousTxnLgrSeq\":30874096}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rfjMiGNaJokVhb6mbvm6Y3ctsFYC8iEoKy\",\"Balance\":\"15077834634\",\"Flags\":0,\"OwnerCount\":8,\"Sequence\":909},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"956ABE5E4595BE30025E1B088371C1028639FD7675AF66D23E089E1AA8C91661\",\"PreviousFields\":{\"Balance\":\"15177834634\",\"OwnerCount\":9},\"PreviousTxnID\":\"F1CB3F9E4B60161B0CAB23A42E608813B171834A857F519FA83AF83E28247C05\",\"PreviousTxnLgrSeq\":30874118}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"Owner\":\"rfjMiGNaJokVhb6mbvm6Y3ctsFYC8iEoKy\",\"RootIndex\":\"9821098F350622C02F8910ACA33827299AAC9458638C6721EE8402B08FDD1F0B\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"9821098F350622C02F8910ACA33827299AAC9458638C6721EE8402B08FDD1F0B\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03BD5CE357AF28\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000001064\",\"Sequence\":231151,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.479668963109999\"},\"TakerPays\":\"504914698\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"C3EE6D21B4F91B51E8ED4D3EF500A3006AB34FB8B4C7485255D2DE97FCC0D81B\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.574668963109999\"},\"TakerPays\":\"604914698\"},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"174654.287019404\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000001E5\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rfjMiGNaJokVhb6mbvm6Y3ctsFYC8iEoKy\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"CCD2429E411D868A19057BBCC07497CBD83713C9A5107F612B4E89F8B612D1C5\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"171754.287019404\"}},\"PreviousTxnID\":\"FC173BB4BDA3FB7DD2858DE74BC7B794DD3E45FB453B82BB24560D6D6C10A72D\",\"PreviousTxnLgrSeq\":30798307}},{\"ModifiedNode\":{\"FinalFields\":{\"Flags\":0,\"IndexPrevious\":\"0000000000000006\",\"Owner\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"RootIndex\":\"C5383B94DDE4BE2A184757D80837080C4D1EAB80789FE39F7D7AECFB0D0304BB\"},\"LedgerEntryType\":\"DirectoryNode\",\"LedgerIndex\":\"D38B8330B1FF06370FEBC6A6DCF8F72A9E03E1E41E613D265C5C531BFE11FD0C\"}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-286.933062556771\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"HighQualityIn\":1000000000,\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-287.028252556771\"}},\"PreviousTxnID\":\"FA0BD60B1A717D878CE65687BBAAF3180BF101509CD0F9DA4FBEBE9326A79900\",\"PreviousTxnLgrSeq\":30874094}},{\"CreatedNode\":{\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"FD2FC9B7D0E7CCB4770A68EA6D8B09417F9CA866AA23940B3D8EC4140FAC6A13\",\"NewFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"BookDirectory\":\"7E984AD10069041B9B957C73D05AF2AB3D117C0CCAF7FDA5500BA34FFA9C6CC9\",\"OwnerNode\":\"0000000000000018\",\"Sequence\":5478,\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"152.635\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.005\"}}}}],\"TransactionIndex\":7,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30874155,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":5478,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"3052.7\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.1\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"3045022100D7B93B341949A48BC822A6EBA289021B7D03FE1F08C4899D640478E77CCB1A830220712A9C8B34D9A41A1B561930A04215673E61051D5D5432ACF9E46B88C1180AF5\",\"date\":552094780,\"hash\":\"0F7BEB8DFA7D37003BB80C40DF59DB535C57C1348E158E5F6F1C3BA86A27B56C\",\"owner_funds\":\"21170.04631073177\"},\"type\":\"transaction\",\"validated\":true}\n";
//		System.out.println("Buy RJP one order, order remains");
//		System.out.println("2017-06-30, 08:39:40 Made offer to buy 0.1 RJP.MrRipple at price 30,527 JPY.MrRipple\n\n    bought 100 XRP at price 29 JPY.MrRipple\n    bought 0.095 RJP.MrRipple at price 1,052.63 XRP\n    placed new order buying 0.005 RJP.MrRipple at price 30,527 JPY.MrRipple ");
//		testOfferQuality(consumeHalfRemains1);
//		c.filterStream(esl1);
//
//		System.out.println("Buy RJP 1, matched (wrong result because originally filter's orders were sorted");
//		String consumeFull2  = "{\"engine_result\":\"tesSUCCESS\",\"engine_result_code\":0,\"engine_result_message\":\"The transaction was applied. Only final in a validated ledger.\",\"ledger_hash\":\"DD1B7089D06D559B39BBE3CA6E56F1CFF376E9BA5056102FBEF3F60EAA54F781\",\"ledger_index\":30757518,\"meta\":{\"AffectedNodes\":[{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"9307.377018112995\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"0000000000000399\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"100000\"},\"LowNode\":\"0000000000000001\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"21110D01A36A7EB20188B11D685B847322DE631145C31803E1760550FA399BAD\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"9634.383872184555\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"BookDirectory\":\"7035F45D0D6677B54720F2A9CBD0EA1155313D0F038A9E5B5E03B363EB77AB2F\",\"BookNode\":\"0000000000000000\",\"Flags\":0,\"OwnerNode\":\"0000000000000D35\",\"Sequence\":196197,\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.06732305815689637\"},\"TakerPays\":\"70128187\"},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"49DDE07C77FB964A480CBAD36770DA50A3F9AF8B2992AC0767B0952BF0685750\",\"PreviousFields\":{\"TakerGets\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.07732305815689637\"},\"TakerPays\":\"80544853\"},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.916021472777412\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"00000000000003FB\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"value\":\"10000\"},\"LowNode\":\"0000000000000006\",\"LowQualityIn\":1000000000},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"4A8FE98984B510E3F0223CB8C9110FA370EC545BCD6CE6863C8405E5BC360423\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"4.906021472777412\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Balance\":\"6061125241\",\"Flags\":0,\"OwnerCount\":10,\"Sequence\":4747},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"72A59CDF8FFBF65C20D01D3A3D5DA5BAE3158A3881E7AEE525A01B1CC73D32DD\",\"PreviousFields\":{\"Balance\":\"6061125253\",\"Sequence\":4746},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"Balance\":\"1837100320562\",\"Flags\":0,\"OwnerCount\":1121,\"Sequence\":196737},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"7F28475BBAE8E0654C4D4C876DFBF7A3C40DEFEB6DF2F4C301F7F7F3514F255F\",\"PreviousFields\":{\"Balance\":\"1837089903896\"},\"PreviousTxnID\":\"26ACBFBCBC70FF0915451A26CFE09BF10922661A759C9DAB606EC585803DDA92\",\"PreviousTxnLgrSeq\":30757489}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rnTJ9WASC95tgeNvap7sK4u2kUEj7iadTU\",\"Balance\":\"53552286\",\"Flags\":0,\"OwnerCount\":3,\"Sequence\":634},\"LedgerEntryType\":\"AccountRoot\",\"LedgerIndex\":\"AEF1A89CEFB737F133254E26EC0435B0E133814E508467C05393ECB2CDD2423A\",\"PreviousFields\":{\"Balance\":\"63968952\"},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Account\":\"rnTJ9WASC95tgeNvap7sK4u2kUEj7iadTU\",\"BookDirectory\":\"11EEBF7DFC0076D299322039F1493C921CAAEFE85B322E5D500B21726814D000\",\"BookNode\":\"0000000000000000\",\"Flags\":131072,\"OwnerNode\":\"0000000000000000\",\"Sequence\":632,\"TakerGets\":\"13166668\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"412.51170844\"}},\"LedgerEntryType\":\"Offer\",\"LedgerIndex\":\"D649167F2B0B0B3E469B23C702D69F7BE2E9CEAC1FB2B8CBA40DCB8B926D50B2\",\"PreviousFields\":{\"TakerGets\":\"23583334\",\"TakerPays\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"738.86585422\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"51133.74415640994\"},\"Flags\":1114112,\"HighLimit\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"HighNode\":\"000000000000027C\",\"LowLimit\":{\"currency\":\"JPY\",\"issuer\":\"rnTJ9WASC95tgeNvap7sK4u2kUEj7iadTU\",\"value\":\"10000000000\"},\"LowNode\":\"0000000000000000\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"EEFF7601F17BEB95A3A513AEC7969500CD48BB67ABA77F4C3ADBD3E3BD9E0ED3\",\"PreviousFields\":{\"Balance\":{\"currency\":\"JPY\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"50807.39001062994\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}},{\"ModifiedNode\":{\"FinalFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-258.2016097014542\"},\"Flags\":2228224,\"HighLimit\":{\"currency\":\"RJP\",\"issuer\":\"rLjDNH9g1AajRT2pxALZmwesd64p4x9XZJ\",\"value\":\"10000000000\"},\"HighNode\":\"0000000000000009\",\"LowLimit\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0\"},\"LowNode\":\"0000000000000012\"},\"LedgerEntryType\":\"RippleState\",\"LedgerIndex\":\"FAE9C113C6BAFF7BAD167E5D3B88F4DA967EC1E33FBB48CC0611B7E050FFA231\",\"PreviousFields\":{\"Balance\":{\"currency\":\"RJP\",\"issuer\":\"rrrrrrrrrrrrrrrrrrrrBZbvji\",\"value\":\"-258.2116297014542\"}},\"PreviousTxnID\":\"C5096729E61B2461E083EAECC9CB5B3E4717CEE4C6051C557CEFC51FE96B55D8\",\"PreviousTxnLgrSeq\":30757488}}],\"TransactionIndex\":5,\"TransactionResult\":\"tesSUCCESS\"},\"status\":\"closed\",\"transaction\":{\"Account\":\"raNDu1gNyZ5hipBTKxm5zx7NovA1rNnNRf\",\"Fee\":\"12\",\"Flags\":2147483648,\"LastLedgerSequence\":30757521,\"Memos\":[{\"Memo\":{\"MemoData\":\"726D2D312E322E33\",\"MemoType\":\"636C69656E74\"}}],\"Sequence\":4746,\"SigningPubKey\":\"02E2F1208D1715E18B0957FC819546FA7434B4A19EE38321932D2ED28FA090678E\",\"TakerGets\":{\"currency\":\"JPY\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"326.36\"},\"TakerPays\":{\"currency\":\"RJP\",\"issuer\":\"rB3gZey7VWHYRqJHLoHDEJXJ2pEPNieKiS\",\"value\":\"0.01\"},\"TransactionType\":\"OfferCreate\",\"TxnSignature\":\"304502210099031DED458A3C99332CB701A8721F9A8A20978FE1570E4E7FEDAEAB5E15AD3302202F2D2176AEECEC72284930743929A63439AA905F0A4351DEE8ED3A940B768787\",\"date\":551685611,\"hash\":\"3167356610724D6C3C2EA09B6C5A62E157C17B6D3CD6EC06819CCF1DCDD735C0\",\"owner_funds\":\"9307.377018112995\"},\"type\":\"transaction\",\"validated\":true}\n";
//		testOfferQuality(consumeFull2);
//		c.filterStream(esl1);
//
//	}
	
	

	
	public static void testOfferQuality(String raw) throws Exception {
		System.out.println("\n");
		System.out.println("\n");
		System.out.println("****NEW TX****");
		
		
		JSONObject transaction = new JSONObject(raw);
		JSONObject metaJSON = (JSONObject) transaction.remove("meta");
		TransactionMeta meta = (TransactionMeta) STObject.fromJSONObject(metaJSON);
		Transaction txn = (Transaction) STObject.fromJSONObject(transaction.getJSONObject("transaction"));

		if (txn.get(Field.TransactionType).toString().equals("OfferCrate")) {
			Amount gets = txn.get(Amount.TakerGets);
			Amount pays = txn.get(Amount.TakerPays);

			System.out.println("---------------------------------------------------------------");
			System.out.println("OfferCreate ");
			System.out.println("---------------------------------------------------------------");
			System.out.println("Get/Pay:    " + gets.currencyString() + "/" + pays.currencyString());
			System.out.println("Bid:        " + gets.computeQuality(pays));
			System.out.println("TakerPays:  " + pays);
			System.out.println("TakerGets:  " + gets);
		} else if (txn.get(Field.TransactionType).toString().equals("OfferCancel")) {
			System.out.println("---------------------------------------------------------------");
			System.out.println("OfferCancel ");
			System.out.println("---------------------------------------------------------------");
		} else if (txn.get(Field.TransactionType).toString().equals("Payment")) {
			System.out.println("---------------------------------------------------------------");
			System.out.println("Payment ");
			System.out.println("---------------------------------------------------------------");

		} else {
			System.out.println("---------------------------------------------------------------");
			System.out.println(txn.get(Field.TransactionType).toString());
			System.out.println("---------------------------------------------------------------");
		}

		System.out.println(txn.prettyJSON());
		ArrayList<AffectedNode> deletedNodes = new ArrayList<>();
		ArrayList<Offer> offersExecuted = new ArrayList<>();

		for (AffectedNode node : meta.affectedNodes()) {
			
			if (!node.isCreatedNode()) {
				// Merge fields from node / node.FinalFields && node.PreviousFields
				// to determine state of node prior to transaction.
				// Any fields that were in PreviousFields will  have their final
				// values
				// in a nested STObject keyed by FinalFields.
				LedgerEntry asPrevious = (LedgerEntry) node.nodeAsPrevious();
				// If it's an offer
				if(node.isDeletedNode()){
					deletedNodes.add(node);
				}
				if (asPrevious instanceof Offer) {
					// We can down-cast this to use Offer specific methods
					offersExecuted.add((Offer) asPrevious);
				}
			} else {
				LedgerEntry asFinal = (LedgerEntry) node.nodeAsPrevious();
				if (asFinal instanceof Offer) {
					Offer offer = (Offer) asFinal;						
					System.out.println("---------------------------------------------------------------");
					System.out.println("Offer Created");
					System.out.println("---------------------------------------------------------------");
					System.out.println("Get/Pay:    " + offer.getPayCurrencyPair());
					System.out.println("Bid:        " + offer.bidQuality());
					System.out.println("TakerPays:  " + offer.takerPays());
					System.out.println("TakerGets:  " + offer.takerGets());
					System.out.println("---------------------------------------------------------------");
					System.out.println(offer.prettyJSON());
				}
			}
		}
		
		deletedNodes.forEach(dn -> {
			LedgerEntry le = (LedgerEntry) dn.nodeAsFinal();
			STObject finalFields = dn.get(STObject.FinalFields);
			
			Hash256 previousTxnId = le.get(Hash256.PreviousTxnID);
			if (previousTxnId != null){
				System.out.println(previousTxnId.toString());

			}
		});

//		Collections.sort(offersExecuted, Offer.qualityAscending);
		for (Offer offer : offersExecuted) {
			STObject finalFields = offer.get(STObject.FinalFields);
			if (finalFields == null || !Common.isTakersExist(finalFields)) {
				System.out.println("FinalFields is null or one of the takers is null");
//				System.out.println(offer.prettyJSON());

			} else {
        STObject executedTest = new STObject();
        Amount testTakerPays = finalFields.get(Amount.TakerPays);
        Amount testTakerGets = finalFields.get(Amount.TakerGets);
        
				STObject executed = offer.executed(finalFields);
				// This will be computed from the BookDirectory field
				System.out.println("---------------------------------------------------------------");
				System.out.println("Offer Executed");
				System.out.println("---------------------------------------------------------------");
				System.out.println("Get/Pay: " + offer.getPayCurrencyPair());
				System.out.println("Ask:     " + offer.directoryAskQuality().stripTrailingZeros().toPlainString());
				System.out.println("Paid:    " + executed.get(Amount.TakerPays));
				System.out.println("Got:     " + executed.get(Amount.TakerGets));
				System.out.println("---------------------------------------------------------------");
				System.out.println(offer.prettyJSON());
			}

		}
		System.out.println("****END TX****");
		System.out.println("\n");
		System.out.println("\n");


}

}
